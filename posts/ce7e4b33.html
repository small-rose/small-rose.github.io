<!-- build time:Mon Sep 21 2020 12:55:31 GMT+0800 (中国标准时间) --><!DOCTYPE HTML><html lang="zh-CN"><head><meta charset="utf-8"><meta http-equiv="Content-Security-Policy" content="upgrade-insecure-requests"><meta name="keywords" content="java/其他/redis.conf, zhangxiaocai.cn,hexo,java,java web,个人博客,技术笔记"><meta name="description" content="Small-Rose,张小菜苔,个人技术笔记,记录学习/开发问题"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width,initial-scale=1,user-scalable=no"><meta name="renderer" content="webkit|ie-stand|ie-comp"><meta name="mobile-web-app-capable" content="yes"><meta name="format-detection" content="telephone=no"><meta name="apple-mobile-web-app-capable" content="yes"><meta name="apple-mobile-web-app-status-bar-style" content="black-translucent"><title>java/其他/redis.conf | 张小菜苔</title><link rel="icon" type="image/x-icon, image/vnd.microsoft.icon" href="https://cdn.jsdelivr.net/gh/small-rose/small-rose.github.io/favicon.ico"><link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/gh/small-rose/small-rose.github.io/libs/awesome/css/all.css"><link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/gh/small-rose/small-rose.github.io/libs/materialize/materialize.min.css"><link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/gh/small-rose/small-rose.github.io/libs/aos/aos.css"><link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/gh/small-rose/small-rose.github.io/libs/animate/animate.min.css"><link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/gh/small-rose/small-rose.github.io/libs/lightGallery/css/lightgallery.min.css"><link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/gh/small-rose/small-rose.github.io/css/matery.css"><link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/gh/small-rose/small-rose.github.io/css/my.css"><script src="https://cdn.jsdelivr.net/gh/small-rose/small-rose.github.io/libs/jquery/jquery.min.js"></script><meta name="generator" content="Hexo 4.2.1"><link rel="alternate" href="/atom.xml" title="张小菜苔" type="application/atom+xml"><link rel="stylesheet" href="/css/prism-tomorrow.css" type="text/css"></head><style type="text/css" lang="css">#loading-container{position:fixed;top:0;left:0;min-height:100vh;width:100vw;z-index:9999;display:flex;flex-direction:column;justify-content:center;align-items:center;background:#FFF;text-align:center;-webkit-transition:opacity 1s ease;-moz-transition:opacity 1s ease;-o-transition:opacity 1s ease;transition:opacity 1s ease}.loading-image{width:120px;height:50px;transform:translate(-50%)}.loading-image div:nth-child(2){-webkit-animation:pacman-balls 1s linear 0s infinite;animation:pacman-balls 1s linear 0s infinite}.loading-image div:nth-child(3){-webkit-animation:pacman-balls 1s linear .33s infinite;animation:pacman-balls 1s linear .33s infinite}.loading-image div:nth-child(4){-webkit-animation:pacman-balls 1s linear .66s infinite;animation:pacman-balls 1s linear .66s infinite}.loading-image div:nth-child(5){-webkit-animation:pacman-balls 1s linear .99s infinite;animation:pacman-balls 1s linear .99s infinite}.loading-image div:first-of-type{width:0;height:0;border:25px solid #49b1f5;border-right-color:transparent;border-radius:25px;-webkit-animation:rotate_pacman_half_up .5s 0s infinite;animation:rotate_pacman_half_up .5s 0s infinite}.loading-image div:nth-child(2){width:0;height:0;border:25px solid #49b1f5;border-right-color:transparent;border-radius:25px;-webkit-animation:rotate_pacman_half_down .5s 0s infinite;animation:rotate_pacman_half_down .5s 0s infinite;margin-top:-50px}@-webkit-keyframes rotate_pacman_half_up{0%{transform:rotate(270deg)}50%{transform:rotate(1turn)}to{transform:rotate(270deg)}}@keyframes rotate_pacman_half_up{0%{transform:rotate(270deg)}50%{transform:rotate(1turn)}to{transform:rotate(270deg)}}@-webkit-keyframes rotate_pacman_half_down{0%{transform:rotate(90deg)}50%{transform:rotate(0)}to{transform:rotate(90deg)}}@keyframes rotate_pacman_half_down{0%{transform:rotate(90deg)}50%{transform:rotate(0)}to{transform:rotate(90deg)}}@-webkit-keyframes pacman-balls{75%{opacity:.7}to{transform:translate(-100px,-6.25px)}}@keyframes pacman-balls{75%{opacity:.7}to{transform:translate(-100px,-6.25px)}}.loading-image div:nth-child(3),.loading-image div:nth-child(4),.loading-image div:nth-child(5),.loading-image div:nth-child(6){background-color:#49b1f5;width:15px;height:15px;border-radius:100%;margin:2px;width:10px;height:10px;position:absolute;transform:translateY(-6.25px);top:25px;left:100px}.loading-text{margin-bottom:20vh;text-align:center;color:#2c3e50;font-size:2rem;box-sizing:border-box;padding:0 10px;text-shadow:0 2px 10px rgba(0,0,0,.2)}@media only screen and (max-width:500px){.loading-text{font-size:1.5rem}}.fadeout{opacity:0;filter:alpha(opacity=0)}@-webkit-keyframes fadeInDown{0%{opacity:0;-webkit-transform:translate3d(0,-100%,0);transform:translate3d(0,-100%,0)}100%{opacity:1;-webkit-transform:none;transform:none}}@keyframes fadeInDown{0%{opacity:0;-webkit-transform:translate3d(0,-100%,0)}}</style><script>!function(){const n=function(){setTimeout(function(){const n=document.getElementById("loading-container");n.className="fadeout",setTimeout(function(){n.style.display="none"},2500)},1e3)};n()}()</script><body><div id="loading-container"><p class="loading-text">嘘~ 正在从服务器偷取页面 . . .</p><div class="loading-image"><div></div><div></div><div></div><div></div><div></div></div></div><header class="navbar-fixed"><nav id="headNav" class="bg-color nav-transparent"><div id="navContainer" class="nav-wrapper container"><div class="brand-logo"><a href="/" class="waves-effect waves-light"><img src="https://cdn.jsdelivr.net/gh/small-rose/small-rose.github.io/medias/logo-1.png" class="logo-img" alt="LOGO"> <span class="logo-span diyFont">张小菜苔</span></a></div><a href="#" data-target="mobile-nav" class="sidenav-trigger button-collapse"><i class="fas fa-bars"></i></a><ul class="right nav-menu"><li class="hide-on-med-and-down nav-item"><a href="/" class="waves-effect waves-light"><i class="fas fa-home"></i><span>首页</span></a></li><li class="hide-on-med-and-down nav-item"><a href="/tags" class="waves-effect waves-light"><i class="fas fa-tags"></i><span>标签</span></a></li><li class="hide-on-med-and-down nav-item"><a href="/categories" class="waves-effect waves-light"><i class="fas fa-bookmark"></i><span>分类</span></a></li><li class="hide-on-med-and-down nav-item"><a href="/archives" class="waves-effect waves-light"><i class="fas fa-archive"></i><span>归档</span></a></li><li class="hide-on-med-and-down nav-item"><a href="/about" class="waves-effect waves-light"><i class="fas fa-user-circle"></i><span>关于</span></a></li><li class="hide-on-med-and-down nav-item"><a href="/contact" class="waves-effect waves-light"><i class="fas fa-comments"></i><span>留言薄</span></a></li><li class="hide-on-med-and-down nav-item"><a href="/friends" class="waves-effect waves-light"><i class="fas fa-address-book"></i><span>友情链接</span></a></li><li class="hide-on-med-and-down nav-item"><a href="" class="waves-effect waves-light"><i class="fas fa-list"></i> <span>Secret</span> <i class="fas fa-chevron-down" aria-hidden="true"></i></a><ul class="sub-nav menus_item_child"><li><a href="/navigate"><i class="fas fa-location-arrow" style="margin-top:-20px"></i> <span>导航</span></a></li><li><a href="/box"><i class="fas fa-map-marker" style="margin-top:-20px"></i> <span>收藏</span></a></li><li><a href="https://hut.zhangxiaocai.cn" target="_blank" rel="noopener"><i class="fas fa-pen-alt" style="margin-top:-20px"></i> <span>写作</span></a></li><li><a href="https://yun.zhangxiaocai.cn" target="_blank" rel="noopener"><i class="fas fa-cloud" style="margin-top:-20px"></i> <span>云盘</span></a></li></ul></li><li><a href="#searchModal" class="modal-trigger waves-effect waves-light"><i id="searchIcon" class="fas fa-search" title="搜索"></i></a></li><li class="fullscreen"><a href="javascript:fullscreen()" class="modal-trigger waves-effect waves-light"><i id="fullscreen" class="fa fa-expand-arrows-alt" title="全屏"></i></a></li></ul><div id="mobile-nav" class="side-nav sidenav"><div class="mobile-head bg-color"><img src="https://cdn.jsdelivr.net/gh/small-rose/small-rose.github.io/medias/logo-1.png" class="logo-img circle responsive-img"><div class="logo-name">张小菜苔</div><div class="logo-desc">Small-Rose,张小菜苔,个人技术笔记,记录学习/开发问题</div></div><ul class="menu-list mobile-menu-list"><li class="m-nav-item"><a href="/" class="waves-effect waves-light"><i class="fa-fw fas fa-home"></i> 首页</a></li><li class="m-nav-item"><a href="/tags" class="waves-effect waves-light"><i class="fa-fw fas fa-tags"></i> 标签</a></li><li class="m-nav-item"><a href="/categories" class="waves-effect waves-light"><i class="fa-fw fas fa-bookmark"></i> 分类</a></li><li class="m-nav-item"><a href="/archives" class="waves-effect waves-light"><i class="fa-fw fas fa-archive"></i> 归档</a></li><li class="m-nav-item"><a href="/about" class="waves-effect waves-light"><i class="fa-fw fas fa-user-circle"></i> 关于</a></li><li class="m-nav-item"><a href="/contact" class="waves-effect waves-light"><i class="fa-fw fas fa-comments"></i> 留言簿</a></li><li class="m-nav-item"><a href="/friends" class="waves-effect waves-light"><i class="fa-fw fas fa-address-book"></i> 友情链接</a></li><li class="m-nav-item"><a href="javascript:;"><i class="fa-fw fas fa-list"></i> Secret <span class="m-icon"><i class="fas fa-chevron-right"></i></span></a><ul><li><a href="/navigate" style="margin-left:75px"><i class="fa fas fa-location-arrow" style="position:absolute;left:50px"></i> <span>导航</span></a></li><li><a href="/box" style="margin-left:75px"><i class="fa fas fa-map-marker" style="position:absolute;left:50px"></i> <span>收藏</span></a></li><li><a href="https://hut.zhangxiaocai.cn" target="_blank" rel="noopener" style="margin-left:75px"><i class="fa fas fa-pen-alt" style="position:absolute;left:50px"></i> <span>写作</span></a></li><li><a href="https://yun.zhangxiaocai.cn" target="_blank" rel="noopener" style="margin-left:75px"><i class="fa fas fa-cloud" style="position:absolute;left:50px"></i> <span>云盘</span></a></li></ul></li></ul></div></div></nav></header><div class="bg-cover pd-header post-cover" style="background-image:url(https://cdn.jsdelivr.net/gh/small-rose/small-rose.github.io/medias/featureimages/17.jpg)"><div class="container" style="right:0;left:0"><div class="row"><div class="col s12 m12 l12"><div class="brand"><h1 class="description center-align post-title">java/其他/redis.conf</h1></div></div></div></div></div><main class="post-container content"><link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/small-rose/small-rose.github.io/libs/tocbot/tocbot.css"><style>#articleContent h1::before,#articleContent h2::before,#articleContent h3::before,#articleContent h4::before,#articleContent h5::before,#articleContent h6::before{display:block;content:" ";height:100px;margin-top:-100px;visibility:hidden}#articleContent :focus{outline:0}.toc-fixed{position:fixed;top:64px}.toc-widget{width:345px;padding-left:20px}.toc-widget .toc-title{margin:35px 0 15px 0;padding-left:17px;font-size:1.5rem;font-weight:700;line-height:1.5rem}.toc-widget ol{padding:0;list-style:none}#toc-content{height:calc(100vh - 250px);overflow:auto}#toc-content ol{padding-left:10px}#toc-content ol li{padding-left:10px}#toc-content .toc-link:hover{color:#42b983;font-weight:700;text-decoration:underline}#toc-content .toc-link::before{background-color:transparent;max-height:25px;position:absolute;right:23.5vw;display:block}#toc-content .is-active-link{color:#42b983}#floating-toc-btn{position:fixed;right:32px;bottom:155px;padding-top:15px;margin-bottom:0;z-index:998}#floating-toc-btn .btn-floating{width:48px;height:48px}#floating-toc-btn .btn-floating i{line-height:48px;font-size:1.4rem}</style><div class="row"><div id="main-content" class="col s12 m12 l9"><div id="artDetail"><div class="card"><div class="card-content article-info"><div class="row tag-cate"><div class="col s7"><div class="article-tag"><span class="chip bg-color">无标签</span></div></div><div class="col s5 right-align"></div></div><div class="post-info"><div class="post-date info-break-policy"><i class="far fa-calendar-minus fa-fw"></i>发布日期:&nbsp;&nbsp; 2020-09-21</div><div class="info-break-policy"><i class="fa fa-pencil"></i> 作者: Small Rose / 张小菜苔</div><div class="post-date info-break-policy"><i class="far fa-calendar-check fa-fw"></i>更新日期:&nbsp;&nbsp; 2020-09-21</div><div class="info-break-policy"><i class="far fa-file-word fa-fw"></i>文章字数:&nbsp;&nbsp; 7.2k</div><div class="info-break-policy"><i class="far fa-clock fa-fw"></i>阅读时长:&nbsp;&nbsp; 44 分</div><div id="busuanzi_container_page_pv" class="info-break-policy"><i class="far fa-eye fa-fw"></i>阅读次数:&nbsp;&nbsp; <span id="busuanzi_value_page_pv"></span></div></div></div><hr class="clearfix"><div class="card-content article-card-content"><div id="articleContent"><h1 id="Redis-configuration-file-example"><a href="#Redis-configuration-file-example" class="headerlink" title="Redis configuration file example."></a>Redis configuration file example.</h1><p>#</p><h1 id="Note-that-in-order-to-read-the-configuration-file-Redis-must-be"><a href="#Note-that-in-order-to-read-the-configuration-file-Redis-must-be" class="headerlink" title="Note that in order to read the configuration file, Redis must be"></a>Note that in order to read the configuration file, Redis must be</h1><h1 id="started-with-the-file-path-as-first-argument"><a href="#started-with-the-file-path-as-first-argument" class="headerlink" title="started with the file path as first argument:"></a>started with the file path as first argument:</h1><p>#</p><h1 id="redis-server-path-to-redis-conf"><a href="#redis-server-path-to-redis-conf" class="headerlink" title="./redis-server /path/to/redis.conf"></a>./redis-server /path/to/redis.conf</h1><h1 id="Note-on-units-when-memory-size-is-needed-it-is-possible-to-specify"><a href="#Note-on-units-when-memory-size-is-needed-it-is-possible-to-specify" class="headerlink" title="Note on units: when memory size is needed, it is possible to specify"></a>Note on units: when memory size is needed, it is possible to specify</h1><h1 id="it-in-the-usual-form-of-1k-5GB-4M-and-so-forth"><a href="#it-in-the-usual-form-of-1k-5GB-4M-and-so-forth" class="headerlink" title="it in the usual form of 1k 5GB 4M and so forth:"></a>it in the usual form of 1k 5GB 4M and so forth:</h1><p>#</p><h1 id="1k-gt-1000-bytes"><a href="#1k-gt-1000-bytes" class="headerlink" title="1k =&gt; 1000 bytes"></a>1k =&gt; 1000 bytes</h1><h1 id="1kb-gt-1024-bytes"><a href="#1kb-gt-1024-bytes" class="headerlink" title="1kb =&gt; 1024 bytes"></a>1kb =&gt; 1024 bytes</h1><h1 id="1m-gt-1000000-bytes"><a href="#1m-gt-1000000-bytes" class="headerlink" title="1m =&gt; 1000000 bytes"></a>1m =&gt; 1000000 bytes</h1><h1 id="1mb-gt-1024-1024-bytes"><a href="#1mb-gt-1024-1024-bytes" class="headerlink" title="1mb =&gt; 1024*1024 bytes"></a>1mb =&gt; 1024*1024 bytes</h1><h1 id="1g-gt-1000000000-bytes"><a href="#1g-gt-1000000000-bytes" class="headerlink" title="1g =&gt; 1000000000 bytes"></a>1g =&gt; 1000000000 bytes</h1><h1 id="1gb-gt-102410241024-bytes"><a href="#1gb-gt-102410241024-bytes" class="headerlink" title="1gb =&gt; 102410241024 bytes"></a>1gb =&gt; 1024<em>1024</em>1024 bytes</h1><p>#</p><h1 id="units-are-case-insensitive-so-1GB-1Gb-1gB-are-all-the-same"><a href="#units-are-case-insensitive-so-1GB-1Gb-1gB-are-all-the-same" class="headerlink" title="units are case insensitive so 1GB 1Gb 1gB are all the same."></a>units are case insensitive so 1GB 1Gb 1gB are all the same.</h1><p>################################## INCLUDES ###################################</p><h1 id="Include-one-or-more-other-config-files-here-This-is-useful-if-you"><a href="#Include-one-or-more-other-config-files-here-This-is-useful-if-you" class="headerlink" title="Include one or more other config files here.  This is useful if you"></a>Include one or more other config files here. This is useful if you</h1><h1 id="have-a-standard-template-that-goes-to-all-Redis-servers-but-also-need"><a href="#have-a-standard-template-that-goes-to-all-Redis-servers-but-also-need" class="headerlink" title="have a standard template that goes to all Redis servers but also need"></a>have a standard template that goes to all Redis servers but also need</h1><h1 id="to-customize-a-few-per-server-settings-Include-files-can-include"><a href="#to-customize-a-few-per-server-settings-Include-files-can-include" class="headerlink" title="to customize a few per-server settings.  Include files can include"></a>to customize a few per-server settings. Include files can include</h1><h1 id="other-files-so-use-this-wisely"><a href="#other-files-so-use-this-wisely" class="headerlink" title="other files, so use this wisely."></a>other files, so use this wisely.</h1><p>#</p><h1 id="Notice-option-“include”-won’t-be-rewritten-by-command-“CONFIG-REWRITE”"><a href="#Notice-option-“include”-won’t-be-rewritten-by-command-“CONFIG-REWRITE”" class="headerlink" title="Notice option “include” won’t be rewritten by command “CONFIG REWRITE”"></a>Notice option “include” won’t be rewritten by command “CONFIG REWRITE”</h1><h1 id="from-admin-or-Redis-Sentinel-Since-Redis-always-uses-the-last-processed"><a href="#from-admin-or-Redis-Sentinel-Since-Redis-always-uses-the-last-processed" class="headerlink" title="from admin or Redis Sentinel. Since Redis always uses the last processed"></a>from admin or Redis Sentinel. Since Redis always uses the last processed</h1><h1 id="line-as-value-of-a-configuration-directive-you’d-better-put-includes"><a href="#line-as-value-of-a-configuration-directive-you’d-better-put-includes" class="headerlink" title="line as value of a configuration directive, you’d better put includes"></a>line as value of a configuration directive, you’d better put includes</h1><h1 id="at-the-beginning-of-this-file-to-avoid-overwriting-config-change-at-runtime"><a href="#at-the-beginning-of-this-file-to-avoid-overwriting-config-change-at-runtime" class="headerlink" title="at the beginning of this file to avoid overwriting config change at runtime."></a>at the beginning of this file to avoid overwriting config change at runtime.</h1><p>#</p><h1 id="If-instead-you-are-interested-in-using-includes-to-override-configuration"><a href="#If-instead-you-are-interested-in-using-includes-to-override-configuration" class="headerlink" title="If instead you are interested in using includes to override configuration"></a>If instead you are interested in using includes to override configuration</h1><h1 id="options-it-is-better-to-use-include-as-the-last-line"><a href="#options-it-is-better-to-use-include-as-the-last-line" class="headerlink" title="options, it is better to use include as the last line."></a>options, it is better to use include as the last line.</h1><p>#</p><h1 id="include-path-to-local-conf"><a href="#include-path-to-local-conf" class="headerlink" title="include /path/to/local.conf"></a>include /path/to/local.conf</h1><h1 id="include-path-to-other-conf"><a href="#include-path-to-other-conf" class="headerlink" title="include /path/to/other.conf"></a>include /path/to/other.conf</h1><p>################################## NETWORK #####################################</p><h1 id="By-default-if-no-“bind”-configuration-directive-is-specified-Redis-listens"><a href="#By-default-if-no-“bind”-configuration-directive-is-specified-Redis-listens" class="headerlink" title="By default, if no “bind” configuration directive is specified, Redis listens"></a>By default, if no “bind” configuration directive is specified, Redis listens</h1><h1 id="for-connections-from-all-the-network-interfaces-available-on-the-server"><a href="#for-connections-from-all-the-network-interfaces-available-on-the-server" class="headerlink" title="for connections from all the network interfaces available on the server."></a>for connections from all the network interfaces available on the server.</h1><h1 id="It-is-possible-to-listen-to-just-one-or-multiple-selected-interfaces-using"><a href="#It-is-possible-to-listen-to-just-one-or-multiple-selected-interfaces-using" class="headerlink" title="It is possible to listen to just one or multiple selected interfaces using"></a>It is possible to listen to just one or multiple selected interfaces using</h1><h1 id="the-“bind”-configuration-directive-followed-by-one-or-more-IP-addresses"><a href="#the-“bind”-configuration-directive-followed-by-one-or-more-IP-addresses" class="headerlink" title="the “bind” configuration directive, followed by one or more IP addresses."></a>the “bind” configuration directive, followed by one or more IP addresses.</h1><p>#</p><h1 id="Examples"><a href="#Examples" class="headerlink" title="Examples:"></a>Examples:</h1><p>#</p><h1 id="bind-192-168-1-100-10-0-0-1"><a href="#bind-192-168-1-100-10-0-0-1" class="headerlink" title="bind 192.168.1.100 10.0.0.1"></a>bind 192.168.1.100 10.0.0.1</h1><h1 id="bind-127-0-0-1-1"><a href="#bind-127-0-0-1-1" class="headerlink" title="bind 127.0.0.1 ::1"></a>bind 127.0.0.1 ::1</h1><p>#</p><h1 id="WARNING-If-the-computer-running-Redis-is-directly-exposed-to-the"><a href="#WARNING-If-the-computer-running-Redis-is-directly-exposed-to-the" class="headerlink" title="~ WARNING ~ If the computer running Redis is directly exposed to the"></a><del>~ WARNING ~</del> If the computer running Redis is directly exposed to the</h1><h1 id="internet-binding-to-all-the-interfaces-is-dangerous-and-will-expose-the"><a href="#internet-binding-to-all-the-interfaces-is-dangerous-and-will-expose-the" class="headerlink" title="internet, binding to all the interfaces is dangerous and will expose the"></a>internet, binding to all the interfaces is dangerous and will expose the</h1><h1 id="instance-to-everybody-on-the-internet-So-by-default-we-uncomment-the"><a href="#instance-to-everybody-on-the-internet-So-by-default-we-uncomment-the" class="headerlink" title="instance to everybody on the internet. So by default we uncomment the"></a>instance to everybody on the internet. So by default we uncomment the</h1><h1 id="following-bind-directive-that-will-force-Redis-to-listen-only-into"><a href="#following-bind-directive-that-will-force-Redis-to-listen-only-into" class="headerlink" title="following bind directive, that will force Redis to listen only into"></a>following bind directive, that will force Redis to listen only into</h1><h1 id="the-IPv4-lookback-interface-address-this-means-Redis-will-be-able-to"><a href="#the-IPv4-lookback-interface-address-this-means-Redis-will-be-able-to" class="headerlink" title="the IPv4 lookback interface address (this means Redis will be able to"></a>the IPv4 lookback interface address (this means Redis will be able to</h1><h1 id="accept-connections-only-from-clients-running-into-the-same-computer-it"><a href="#accept-connections-only-from-clients-running-into-the-same-computer-it" class="headerlink" title="accept connections only from clients running into the same computer it"></a>accept connections only from clients running into the same computer it</h1><h1 id="is-running"><a href="#is-running" class="headerlink" title="is running)."></a>is running).</h1><p>#</p><h1 id="IF-YOU-ARE-SURE-YOU-WANT-YOUR-INSTANCE-TO-LISTEN-TO-ALL-THE-INTERFACES"><a href="#IF-YOU-ARE-SURE-YOU-WANT-YOUR-INSTANCE-TO-LISTEN-TO-ALL-THE-INTERFACES" class="headerlink" title="IF YOU ARE SURE YOU WANT YOUR INSTANCE TO LISTEN TO ALL THE INTERFACES"></a>IF YOU ARE SURE YOU WANT YOUR INSTANCE TO LISTEN TO ALL THE INTERFACES</h1><h1 id="JUST-COMMENT-THE-FOLLOWING-LINE"><a href="#JUST-COMMENT-THE-FOLLOWING-LINE" class="headerlink" title="JUST COMMENT THE FOLLOWING LINE."></a>JUST COMMENT THE FOLLOWING LINE.</h1><h1><a href="#" class="headerlink" title="~"></a><del>~</del></h1><p>#bind 127.0.0.1</p><h1 id="Protected-mode-is-a-layer-of-security-protection-in-order-to-avoid-that"><a href="#Protected-mode-is-a-layer-of-security-protection-in-order-to-avoid-that" class="headerlink" title="Protected mode is a layer of security protection, in order to avoid that"></a>Protected mode is a layer of security protection, in order to avoid that</h1><h1 id="Redis-instances-left-open-on-the-internet-are-accessed-and-exploited"><a href="#Redis-instances-left-open-on-the-internet-are-accessed-and-exploited" class="headerlink" title="Redis instances left open on the internet are accessed and exploited."></a>Redis instances left open on the internet are accessed and exploited.</h1><p>#</p><h1 id="When-protected-mode-is-on-and-if"><a href="#When-protected-mode-is-on-and-if" class="headerlink" title="When protected mode is on and if:"></a>When protected mode is on and if:</h1><p>#</p><h1 id="1-The-server-is-not-binding-explicitly-to-a-set-of-addresses-using-the"><a href="#1-The-server-is-not-binding-explicitly-to-a-set-of-addresses-using-the" class="headerlink" title="1) The server is not binding explicitly to a set of addresses using the"></a>1) The server is not binding explicitly to a set of addresses using the</h1><h1 id="“bind”-directive"><a href="#“bind”-directive" class="headerlink" title="“bind” directive."></a>“bind” directive.</h1><h1 id="2-No-password-is-configured"><a href="#2-No-password-is-configured" class="headerlink" title="2) No password is configured."></a>2) No password is configured.</h1><p>#</p><h1 id="The-server-only-accepts-connections-from-clients-connecting-from-the"><a href="#The-server-only-accepts-connections-from-clients-connecting-from-the" class="headerlink" title="The server only accepts connections from clients connecting from the"></a>The server only accepts connections from clients connecting from the</h1><h1 id="IPv4-and-IPv6-loopback-addresses-127-0-0-1-and-1-and-from-Unix-domain"><a href="#IPv4-and-IPv6-loopback-addresses-127-0-0-1-and-1-and-from-Unix-domain" class="headerlink" title="IPv4 and IPv6 loopback addresses 127.0.0.1 and ::1, and from Unix domain"></a>IPv4 and IPv6 loopback addresses 127.0.0.1 and ::1, and from Unix domain</h1><h1 id="sockets"><a href="#sockets" class="headerlink" title="sockets."></a>sockets.</h1><p>#</p><h1 id="By-default-protected-mode-is-enabled-You-should-disable-it-only-if"><a href="#By-default-protected-mode-is-enabled-You-should-disable-it-only-if" class="headerlink" title="By default protected mode is enabled. You should disable it only if"></a>By default protected mode is enabled. You should disable it only if</h1><h1 id="you-are-sure-you-want-clients-from-other-hosts-to-connect-to-Redis"><a href="#you-are-sure-you-want-clients-from-other-hosts-to-connect-to-Redis" class="headerlink" title="you are sure you want clients from other hosts to connect to Redis"></a>you are sure you want clients from other hosts to connect to Redis</h1><h1 id="even-if-no-authentication-is-configured-nor-a-specific-set-of-interfaces"><a href="#even-if-no-authentication-is-configured-nor-a-specific-set-of-interfaces" class="headerlink" title="even if no authentication is configured, nor a specific set of interfaces"></a>even if no authentication is configured, nor a specific set of interfaces</h1><h1 id="are-explicitly-listed-using-the-“bind”-directive"><a href="#are-explicitly-listed-using-the-“bind”-directive" class="headerlink" title="are explicitly listed using the “bind” directive."></a>are explicitly listed using the “bind” directive.</h1><p>protected-mode yes</p><h1 id="Accept-connections-on-the-specified-port-default-is-6379-IANA-815344"><a href="#Accept-connections-on-the-specified-port-default-is-6379-IANA-815344" class="headerlink" title="Accept connections on the specified port, default is 6379 (IANA #815344)."></a>Accept connections on the specified port, default is 6379 (IANA #815344).</h1><h1 id="If-port-0-is-specified-Redis-will-not-listen-on-a-TCP-socket"><a href="#If-port-0-is-specified-Redis-will-not-listen-on-a-TCP-socket" class="headerlink" title="If port 0 is specified Redis will not listen on a TCP socket."></a>If port 0 is specified Redis will not listen on a TCP socket.</h1><p>port 6379</p><h1 id="TCP-listen-backlog"><a href="#TCP-listen-backlog" class="headerlink" title="TCP listen() backlog."></a>TCP listen() backlog.</h1><p>#</p><h1 id="In-high-requests-per-second-environments-you-need-an-high-backlog-in-order"><a href="#In-high-requests-per-second-environments-you-need-an-high-backlog-in-order" class="headerlink" title="In high requests-per-second environments you need an high backlog in order"></a>In high requests-per-second environments you need an high backlog in order</h1><h1 id="to-avoid-slow-clients-connections-issues-Note-that-the-Linux-kernel"><a href="#to-avoid-slow-clients-connections-issues-Note-that-the-Linux-kernel" class="headerlink" title="to avoid slow clients connections issues. Note that the Linux kernel"></a>to avoid slow clients connections issues. Note that the Linux kernel</h1><h1 id="will-silently-truncate-it-to-the-value-of-proc-sys-net-core-somaxconn-so"><a href="#will-silently-truncate-it-to-the-value-of-proc-sys-net-core-somaxconn-so" class="headerlink" title="will silently truncate it to the value of /proc/sys/net/core/somaxconn so"></a>will silently truncate it to the value of /proc/sys/net/core/somaxconn so</h1><h1 id="make-sure-to-raise-both-the-value-of-somaxconn-and-tcp-max-syn-backlog"><a href="#make-sure-to-raise-both-the-value-of-somaxconn-and-tcp-max-syn-backlog" class="headerlink" title="make sure to raise both the value of somaxconn and tcp_max_syn_backlog"></a>make sure to raise both the value of somaxconn and tcp_max_syn_backlog</h1><h1 id="in-order-to-get-the-desired-effect"><a href="#in-order-to-get-the-desired-effect" class="headerlink" title="in order to get the desired effect."></a>in order to get the desired effect.</h1><p>tcp-backlog 511</p><h1 id="Unix-socket"><a href="#Unix-socket" class="headerlink" title="Unix socket."></a>Unix socket.</h1><p>#</p><h1 id="Specify-the-path-for-the-Unix-socket-that-will-be-used-to-listen-for"><a href="#Specify-the-path-for-the-Unix-socket-that-will-be-used-to-listen-for" class="headerlink" title="Specify the path for the Unix socket that will be used to listen for"></a>Specify the path for the Unix socket that will be used to listen for</h1><h1 id="incoming-connections-There-is-no-default-so-Redis-will-not-listen"><a href="#incoming-connections-There-is-no-default-so-Redis-will-not-listen" class="headerlink" title="incoming connections. There is no default, so Redis will not listen"></a>incoming connections. There is no default, so Redis will not listen</h1><h1 id="on-a-unix-socket-when-not-specified"><a href="#on-a-unix-socket-when-not-specified" class="headerlink" title="on a unix socket when not specified."></a>on a unix socket when not specified.</h1><p>#</p><h1 id="unixsocket-tmp-redis-sock"><a href="#unixsocket-tmp-redis-sock" class="headerlink" title="unixsocket /tmp/redis.sock"></a>unixsocket /tmp/redis.sock</h1><h1 id="unixsocketperm-700"><a href="#unixsocketperm-700" class="headerlink" title="unixsocketperm 700"></a>unixsocketperm 700</h1><h1 id="Close-the-connection-after-a-client-is-idle-for-N-seconds-0-to-disable"><a href="#Close-the-connection-after-a-client-is-idle-for-N-seconds-0-to-disable" class="headerlink" title="Close the connection after a client is idle for N seconds (0 to disable)"></a>Close the connection after a client is idle for N seconds (0 to disable)</h1><p>timeout 0</p><h1 id="TCP-keepalive"><a href="#TCP-keepalive" class="headerlink" title="TCP keepalive."></a>TCP keepalive.</h1><p>#</p><h1 id="If-non-zero-use-SO-KEEPALIVE-to-send-TCP-ACKs-to-clients-in-absence"><a href="#If-non-zero-use-SO-KEEPALIVE-to-send-TCP-ACKs-to-clients-in-absence" class="headerlink" title="If non-zero, use SO_KEEPALIVE to send TCP ACKs to clients in absence"></a>If non-zero, use SO_KEEPALIVE to send TCP ACKs to clients in absence</h1><h1 id="of-communication-This-is-useful-for-two-reasons"><a href="#of-communication-This-is-useful-for-two-reasons" class="headerlink" title="of communication. This is useful for two reasons:"></a>of communication. This is useful for two reasons:</h1><p>#</p><h1 id="1-Detect-dead-peers"><a href="#1-Detect-dead-peers" class="headerlink" title="1) Detect dead peers."></a>1) Detect dead peers.</h1><h1 id="2-Take-the-connection-alive-from-the-point-of-view-of-network"><a href="#2-Take-the-connection-alive-from-the-point-of-view-of-network" class="headerlink" title="2) Take the connection alive from the point of view of network"></a>2) Take the connection alive from the point of view of network</h1><h1 id="equipment-in-the-middle"><a href="#equipment-in-the-middle" class="headerlink" title="equipment in the middle."></a>equipment in the middle.</h1><p>#</p><h1 id="On-Linux-the-specified-value-in-seconds-is-the-period-used-to-send-ACKs"><a href="#On-Linux-the-specified-value-in-seconds-is-the-period-used-to-send-ACKs" class="headerlink" title="On Linux, the specified value (in seconds) is the period used to send ACKs."></a>On Linux, the specified value (in seconds) is the period used to send ACKs.</h1><h1 id="Note-that-to-close-the-connection-the-double-of-the-time-is-needed"><a href="#Note-that-to-close-the-connection-the-double-of-the-time-is-needed" class="headerlink" title="Note that to close the connection the double of the time is needed."></a>Note that to close the connection the double of the time is needed.</h1><h1 id="On-other-kernels-the-period-depends-on-the-kernel-configuration"><a href="#On-other-kernels-the-period-depends-on-the-kernel-configuration" class="headerlink" title="On other kernels the period depends on the kernel configuration."></a>On other kernels the period depends on the kernel configuration.</h1><p>#</p><h1 id="A-reasonable-value-for-this-option-is-300-seconds-which-is-the-new"><a href="#A-reasonable-value-for-this-option-is-300-seconds-which-is-the-new" class="headerlink" title="A reasonable value for this option is 300 seconds, which is the new"></a>A reasonable value for this option is 300 seconds, which is the new</h1><h1 id="Redis-default-starting-with-Redis-3-2-1"><a href="#Redis-default-starting-with-Redis-3-2-1" class="headerlink" title="Redis default starting with Redis 3.2.1."></a>Redis default starting with Redis 3.2.1.</h1><p>tcp-keepalive 300</p><p>################################# GENERAL #####################################</p><h1 id="By-default-Redis-does-not-run-as-a-daemon-Use-‘yes’-if-you-need-it"><a href="#By-default-Redis-does-not-run-as-a-daemon-Use-‘yes’-if-you-need-it" class="headerlink" title="By default Redis does not run as a daemon. Use ‘yes’ if you need it."></a>By default Redis does not run as a daemon. Use ‘yes’ if you need it.</h1><h1 id="Note-that-Redis-will-write-a-pid-file-in-var-run-redis-pid-when-daemonized"><a href="#Note-that-Redis-will-write-a-pid-file-in-var-run-redis-pid-when-daemonized" class="headerlink" title="Note that Redis will write a pid file in /var/run/redis.pid when daemonized."></a>Note that Redis will write a pid file in /var/run/redis.pid when daemonized.</h1><p>#daemonize no</p><h1 id="If-you-run-Redis-from-upstart-or-systemd-Redis-can-interact-with-your"><a href="#If-you-run-Redis-from-upstart-or-systemd-Redis-can-interact-with-your" class="headerlink" title="If you run Redis from upstart or systemd, Redis can interact with your"></a>If you run Redis from upstart or systemd, Redis can interact with your</h1><h1 id="supervision-tree-Options"><a href="#supervision-tree-Options" class="headerlink" title="supervision tree. Options:"></a>supervision tree. Options:</h1><h1 id="supervised-no-no-supervision-interaction"><a href="#supervised-no-no-supervision-interaction" class="headerlink" title="supervised no      - no supervision interaction"></a>supervised no - no supervision interaction</h1><h1 id="supervised-upstart-signal-upstart-by-putting-Redis-into-SIGSTOP-mode"><a href="#supervised-upstart-signal-upstart-by-putting-Redis-into-SIGSTOP-mode" class="headerlink" title="supervised upstart - signal upstart by putting Redis into SIGSTOP mode"></a>supervised upstart - signal upstart by putting Redis into SIGSTOP mode</h1><h1 id="supervised-systemd-signal-systemd-by-writing-READY-1-to-NOTIFY-SOCKET"><a href="#supervised-systemd-signal-systemd-by-writing-READY-1-to-NOTIFY-SOCKET" class="headerlink" title="supervised systemd - signal systemd by writing READY=1 to $NOTIFY_SOCKET"></a>supervised systemd - signal systemd by writing READY=1 to $NOTIFY_SOCKET</h1><h1 id="supervised-auto-detect-upstart-or-systemd-method-based-on"><a href="#supervised-auto-detect-upstart-or-systemd-method-based-on" class="headerlink" title="supervised auto    - detect upstart or systemd method based on"></a>supervised auto - detect upstart or systemd method based on</h1><h1 id="UPSTART-JOB-or-NOTIFY-SOCKET-environment-variables"><a href="#UPSTART-JOB-or-NOTIFY-SOCKET-environment-variables" class="headerlink" title="UPSTART_JOB or NOTIFY_SOCKET environment variables"></a>UPSTART_JOB or NOTIFY_SOCKET environment variables</h1><h1 id="Note-these-supervision-methods-only-signal-“process-is-ready-”"><a href="#Note-these-supervision-methods-only-signal-“process-is-ready-”" class="headerlink" title="Note: these supervision methods only signal “process is ready.”"></a>Note: these supervision methods only signal “process is ready.”</h1><h1 id="They-do-not-enable-continuous-liveness-pings-back-to-your-supervisor"><a href="#They-do-not-enable-continuous-liveness-pings-back-to-your-supervisor" class="headerlink" title="They do not enable continuous liveness pings back to your supervisor."></a>They do not enable continuous liveness pings back to your supervisor.</h1><p>supervised no</p><h1 id="If-a-pid-file-is-specified-Redis-writes-it-where-specified-at-startup"><a href="#If-a-pid-file-is-specified-Redis-writes-it-where-specified-at-startup" class="headerlink" title="If a pid file is specified, Redis writes it where specified at startup"></a>If a pid file is specified, Redis writes it where specified at startup</h1><h1 id="and-removes-it-at-exit"><a href="#and-removes-it-at-exit" class="headerlink" title="and removes it at exit."></a>and removes it at exit.</h1><p>#</p><h1 id="When-the-server-runs-non-daemonized-no-pid-file-is-created-if-none-is"><a href="#When-the-server-runs-non-daemonized-no-pid-file-is-created-if-none-is" class="headerlink" title="When the server runs non daemonized, no pid file is created if none is"></a>When the server runs non daemonized, no pid file is created if none is</h1><h1 id="specified-in-the-configuration-When-the-server-is-daemonized-the-pid-file"><a href="#specified-in-the-configuration-When-the-server-is-daemonized-the-pid-file" class="headerlink" title="specified in the configuration. When the server is daemonized, the pid file"></a>specified in the configuration. When the server is daemonized, the pid file</h1><h1 id="is-used-even-if-not-specified-defaulting-to-“-var-run-redis-pid”"><a href="#is-used-even-if-not-specified-defaulting-to-“-var-run-redis-pid”" class="headerlink" title="is used even if not specified, defaulting to “/var/run/redis.pid”."></a>is used even if not specified, defaulting to “/var/run/redis.pid”.</h1><p>#</p><h1 id="Creating-a-pid-file-is-best-effort-if-Redis-is-not-able-to-create-it"><a href="#Creating-a-pid-file-is-best-effort-if-Redis-is-not-able-to-create-it" class="headerlink" title="Creating a pid file is best effort: if Redis is not able to create it"></a>Creating a pid file is best effort: if Redis is not able to create it</h1><h1 id="nothing-bad-happens-the-server-will-start-and-run-normally"><a href="#nothing-bad-happens-the-server-will-start-and-run-normally" class="headerlink" title="nothing bad happens, the server will start and run normally."></a>nothing bad happens, the server will start and run normally.</h1><p>pidfile /var/run/redis_6379.pid</p><h1 id="Specify-the-server-verbosity-level"><a href="#Specify-the-server-verbosity-level" class="headerlink" title="Specify the server verbosity level."></a>Specify the server verbosity level.</h1><h1 id="This-can-be-one-of"><a href="#This-can-be-one-of" class="headerlink" title="This can be one of:"></a>This can be one of:</h1><h1 id="debug-a-lot-of-information-useful-for-development-testing"><a href="#debug-a-lot-of-information-useful-for-development-testing" class="headerlink" title="debug (a lot of information, useful for development/testing)"></a>debug (a lot of information, useful for development/testing)</h1><h1 id="verbose-many-rarely-useful-info-but-not-a-mess-like-the-debug-level"><a href="#verbose-many-rarely-useful-info-but-not-a-mess-like-the-debug-level" class="headerlink" title="verbose (many rarely useful info, but not a mess like the debug level)"></a>verbose (many rarely useful info, but not a mess like the debug level)</h1><h1 id="notice-moderately-verbose-what-you-want-in-production-probably"><a href="#notice-moderately-verbose-what-you-want-in-production-probably" class="headerlink" title="notice (moderately verbose, what you want in production probably)"></a>notice (moderately verbose, what you want in production probably)</h1><h1 id="warning-only-very-important-critical-messages-are-logged"><a href="#warning-only-very-important-critical-messages-are-logged" class="headerlink" title="warning (only very important / critical messages are logged)"></a>warning (only very important / critical messages are logged)</h1><p>loglevel notice</p><h1 id="Specify-the-log-file-name-Also-the-empty-string-can-be-used-to-force"><a href="#Specify-the-log-file-name-Also-the-empty-string-can-be-used-to-force" class="headerlink" title="Specify the log file name. Also the empty string can be used to force"></a>Specify the log file name. Also the empty string can be used to force</h1><h1 id="Redis-to-log-on-the-standard-output-Note-that-if-you-use-standard"><a href="#Redis-to-log-on-the-standard-output-Note-that-if-you-use-standard" class="headerlink" title="Redis to log on the standard output. Note that if you use standard"></a>Redis to log on the standard output. Note that if you use standard</h1><h1 id="output-for-logging-but-daemonize-logs-will-be-sent-to-dev-null"><a href="#output-for-logging-but-daemonize-logs-will-be-sent-to-dev-null" class="headerlink" title="output for logging but daemonize, logs will be sent to /dev/null"></a>output for logging but daemonize, logs will be sent to /dev/null</h1><p>logfile “”</p><h1 id="To-enable-logging-to-the-system-logger-just-set-‘syslog-enabled’-to-yes"><a href="#To-enable-logging-to-the-system-logger-just-set-‘syslog-enabled’-to-yes" class="headerlink" title="To enable logging to the system logger, just set ‘syslog-enabled’ to yes,"></a>To enable logging to the system logger, just set ‘syslog-enabled’ to yes,</h1><h1 id="and-optionally-update-the-other-syslog-parameters-to-suit-your-needs"><a href="#and-optionally-update-the-other-syslog-parameters-to-suit-your-needs" class="headerlink" title="and optionally update the other syslog parameters to suit your needs."></a>and optionally update the other syslog parameters to suit your needs.</h1><h1 id="syslog-enabled-no"><a href="#syslog-enabled-no" class="headerlink" title="syslog-enabled no"></a>syslog-enabled no</h1><h1 id="Specify-the-syslog-identity"><a href="#Specify-the-syslog-identity" class="headerlink" title="Specify the syslog identity."></a>Specify the syslog identity.</h1><h1 id="syslog-ident-redis"><a href="#syslog-ident-redis" class="headerlink" title="syslog-ident redis"></a>syslog-ident redis</h1><h1 id="Specify-the-syslog-facility-Must-be-USER-or-between-LOCAL0-LOCAL7"><a href="#Specify-the-syslog-facility-Must-be-USER-or-between-LOCAL0-LOCAL7" class="headerlink" title="Specify the syslog facility. Must be USER or between LOCAL0-LOCAL7."></a>Specify the syslog facility. Must be USER or between LOCAL0-LOCAL7.</h1><h1 id="syslog-facility-local0"><a href="#syslog-facility-local0" class="headerlink" title="syslog-facility local0"></a>syslog-facility local0</h1><h1 id="Set-the-number-of-databases-The-default-database-is-DB-0-you-can-select"><a href="#Set-the-number-of-databases-The-default-database-is-DB-0-you-can-select" class="headerlink" title="Set the number of databases. The default database is DB 0, you can select"></a>Set the number of databases. The default database is DB 0, you can select</h1><h1 id="a-different-one-on-a-per-connection-basis-using-SELECT-where"><a href="#a-different-one-on-a-per-connection-basis-using-SELECT-where" class="headerlink" title="a different one on a per-connection basis using SELECT  where"></a>a different one on a per-connection basis using SELECT<dbid>where</dbid></h1><h1 id="dbid-is-a-number-between-0-and-‘databases’-1"><a href="#dbid-is-a-number-between-0-and-‘databases’-1" class="headerlink" title="dbid is a number between 0 and ‘databases’-1"></a>dbid is a number between 0 and ‘databases’-1</h1><p>databases 16</p><p>################################ SNAPSHOTTING ################################<br>#</p><h1 id="Save-the-DB-on-disk"><a href="#Save-the-DB-on-disk" class="headerlink" title="Save the DB on disk:"></a>Save the DB on disk:</h1><p>#</p><h1 id="save"><a href="#save" class="headerlink" title="save  "></a>save<seconds><changes></changes></seconds></h1><p>#</p><h1 id="Will-save-the-DB-if-both-the-given-number-of-seconds-and-the-given"><a href="#Will-save-the-DB-if-both-the-given-number-of-seconds-and-the-given" class="headerlink" title="Will save the DB if both the given number of seconds and the given"></a>Will save the DB if both the given number of seconds and the given</h1><h1 id="number-of-write-operations-against-the-DB-occurred"><a href="#number-of-write-operations-against-the-DB-occurred" class="headerlink" title="number of write operations against the DB occurred."></a>number of write operations against the DB occurred.</h1><p>#</p><h1 id="In-the-example-below-the-behaviour-will-be-to-save"><a href="#In-the-example-below-the-behaviour-will-be-to-save" class="headerlink" title="In the example below the behaviour will be to save:"></a>In the example below the behaviour will be to save:</h1><h1 id="after-900-sec-15-min-if-at-least-1-key-changed"><a href="#after-900-sec-15-min-if-at-least-1-key-changed" class="headerlink" title="after 900 sec (15 min) if at least 1 key changed"></a>after 900 sec (15 min) if at least 1 key changed</h1><h1 id="after-300-sec-5-min-if-at-least-10-keys-changed"><a href="#after-300-sec-5-min-if-at-least-10-keys-changed" class="headerlink" title="after 300 sec (5 min) if at least 10 keys changed"></a>after 300 sec (5 min) if at least 10 keys changed</h1><h1 id="after-60-sec-if-at-least-10000-keys-changed"><a href="#after-60-sec-if-at-least-10000-keys-changed" class="headerlink" title="after 60 sec if at least 10000 keys changed"></a>after 60 sec if at least 10000 keys changed</h1><p>#</p><h1 id="Note-you-can-disable-saving-completely-by-commenting-out-all-“save”-lines"><a href="#Note-you-can-disable-saving-completely-by-commenting-out-all-“save”-lines" class="headerlink" title="Note: you can disable saving completely by commenting out all “save” lines."></a>Note: you can disable saving completely by commenting out all “save” lines.</h1><p>#</p><h1 id="It-is-also-possible-to-remove-all-the-previously-configured-save"><a href="#It-is-also-possible-to-remove-all-the-previously-configured-save" class="headerlink" title="It is also possible to remove all the previously configured save"></a>It is also possible to remove all the previously configured save</h1><h1 id="points-by-adding-a-save-directive-with-a-single-empty-string-argument"><a href="#points-by-adding-a-save-directive-with-a-single-empty-string-argument" class="headerlink" title="points by adding a save directive with a single empty string argument"></a>points by adding a save directive with a single empty string argument</h1><h1 id="like-in-the-following-example"><a href="#like-in-the-following-example" class="headerlink" title="like in the following example:"></a>like in the following example:</h1><p>#</p><h1 id="save-“”"><a href="#save-“”" class="headerlink" title="save “”"></a>save “”</h1><p>save 120 1<br>save 300 10<br>save 60 10000</p><h1 id="By-default-Redis-will-stop-accepting-writes-if-RDB-snapshots-are-enabled"><a href="#By-default-Redis-will-stop-accepting-writes-if-RDB-snapshots-are-enabled" class="headerlink" title="By default Redis will stop accepting writes if RDB snapshots are enabled"></a>By default Redis will stop accepting writes if RDB snapshots are enabled</h1><h1 id="at-least-one-save-point-and-the-latest-background-save-failed"><a href="#at-least-one-save-point-and-the-latest-background-save-failed" class="headerlink" title="(at least one save point) and the latest background save failed."></a>(at least one save point) and the latest background save failed.</h1><h1 id="This-will-make-the-user-aware-in-a-hard-way-that-data-is-not-persisting"><a href="#This-will-make-the-user-aware-in-a-hard-way-that-data-is-not-persisting" class="headerlink" title="This will make the user aware (in a hard way) that data is not persisting"></a>This will make the user aware (in a hard way) that data is not persisting</h1><h1 id="on-disk-properly-otherwise-chances-are-that-no-one-will-notice-and-some"><a href="#on-disk-properly-otherwise-chances-are-that-no-one-will-notice-and-some" class="headerlink" title="on disk properly, otherwise chances are that no one will notice and some"></a>on disk properly, otherwise chances are that no one will notice and some</h1><h1 id="disaster-will-happen"><a href="#disaster-will-happen" class="headerlink" title="disaster will happen."></a>disaster will happen.</h1><p>#</p><h1 id="If-the-background-saving-process-will-start-working-again-Redis-will"><a href="#If-the-background-saving-process-will-start-working-again-Redis-will" class="headerlink" title="If the background saving process will start working again Redis will"></a>If the background saving process will start working again Redis will</h1><h1 id="automatically-allow-writes-again"><a href="#automatically-allow-writes-again" class="headerlink" title="automatically allow writes again."></a>automatically allow writes again.</h1><p>#</p><h1 id="However-if-you-have-setup-your-proper-monitoring-of-the-Redis-server"><a href="#However-if-you-have-setup-your-proper-monitoring-of-the-Redis-server" class="headerlink" title="However if you have setup your proper monitoring of the Redis server"></a>However if you have setup your proper monitoring of the Redis server</h1><h1 id="and-persistence-you-may-want-to-disable-this-feature-so-that-Redis-will"><a href="#and-persistence-you-may-want-to-disable-this-feature-so-that-Redis-will" class="headerlink" title="and persistence, you may want to disable this feature so that Redis will"></a>and persistence, you may want to disable this feature so that Redis will</h1><h1 id="continue-to-work-as-usual-even-if-there-are-problems-with-disk"><a href="#continue-to-work-as-usual-even-if-there-are-problems-with-disk" class="headerlink" title="continue to work as usual even if there are problems with disk,"></a>continue to work as usual even if there are problems with disk,</h1><h1 id="permissions-and-so-forth"><a href="#permissions-and-so-forth" class="headerlink" title="permissions, and so forth."></a>permissions, and so forth.</h1><p>stop-writes-on-bgsave-error yes</p><h1 id="Compress-string-objects-using-LZF-when-dump-rdb-databases"><a href="#Compress-string-objects-using-LZF-when-dump-rdb-databases" class="headerlink" title="Compress string objects using LZF when dump .rdb databases?"></a>Compress string objects using LZF when dump .rdb databases?</h1><h1 id="For-default-that’s-set-to-‘yes’-as-it’s-almost-always-a-win"><a href="#For-default-that’s-set-to-‘yes’-as-it’s-almost-always-a-win" class="headerlink" title="For default that’s set to ‘yes’ as it’s almost always a win."></a>For default that’s set to ‘yes’ as it’s almost always a win.</h1><h1 id="If-you-want-to-save-some-CPU-in-the-saving-child-set-it-to-‘no’-but"><a href="#If-you-want-to-save-some-CPU-in-the-saving-child-set-it-to-‘no’-but" class="headerlink" title="If you want to save some CPU in the saving child set it to ‘no’ but"></a>If you want to save some CPU in the saving child set it to ‘no’ but</h1><h1 id="the-dataset-will-likely-be-bigger-if-you-have-compressible-values-or-keys"><a href="#the-dataset-will-likely-be-bigger-if-you-have-compressible-values-or-keys" class="headerlink" title="the dataset will likely be bigger if you have compressible values or keys."></a>the dataset will likely be bigger if you have compressible values or keys.</h1><p>rdbcompression yes</p><h1 id="Since-version-5-of-RDB-a-CRC64-checksum-is-placed-at-the-end-of-the-file"><a href="#Since-version-5-of-RDB-a-CRC64-checksum-is-placed-at-the-end-of-the-file" class="headerlink" title="Since version 5 of RDB a CRC64 checksum is placed at the end of the file."></a>Since version 5 of RDB a CRC64 checksum is placed at the end of the file.</h1><h1 id="This-makes-the-format-more-resistant-to-corruption-but-there-is-a-performance"><a href="#This-makes-the-format-more-resistant-to-corruption-but-there-is-a-performance" class="headerlink" title="This makes the format more resistant to corruption but there is a performance"></a>This makes the format more resistant to corruption but there is a performance</h1><h1 id="hit-to-pay-around-10-when-saving-and-loading-RDB-files-so-you-can-disable-it"><a href="#hit-to-pay-around-10-when-saving-and-loading-RDB-files-so-you-can-disable-it" class="headerlink" title="hit to pay (around 10%) when saving and loading RDB files, so you can disable it"></a>hit to pay (around 10%) when saving and loading RDB files, so you can disable it</h1><h1 id="for-maximum-performances"><a href="#for-maximum-performances" class="headerlink" title="for maximum performances."></a>for maximum performances.</h1><p>#</p><h1 id="RDB-files-created-with-checksum-disabled-have-a-checksum-of-zero-that-will"><a href="#RDB-files-created-with-checksum-disabled-have-a-checksum-of-zero-that-will" class="headerlink" title="RDB files created with checksum disabled have a checksum of zero that will"></a>RDB files created with checksum disabled have a checksum of zero that will</h1><h1 id="tell-the-loading-code-to-skip-the-check"><a href="#tell-the-loading-code-to-skip-the-check" class="headerlink" title="tell the loading code to skip the check."></a>tell the loading code to skip the check.</h1><p>rdbchecksum yes</p><h1 id="The-filename-where-to-dump-the-DB"><a href="#The-filename-where-to-dump-the-DB" class="headerlink" title="The filename where to dump the DB"></a>The filename where to dump the DB</h1><p>dbfilename dump.rdb</p><h1 id="The-working-directory"><a href="#The-working-directory" class="headerlink" title="The working directory."></a>The working directory.</h1><p>#</p><h1 id="The-DB-will-be-written-inside-this-directory-with-the-filename-specified"><a href="#The-DB-will-be-written-inside-this-directory-with-the-filename-specified" class="headerlink" title="The DB will be written inside this directory, with the filename specified"></a>The DB will be written inside this directory, with the filename specified</h1><h1 id="above-using-the-‘dbfilename’-configuration-directive"><a href="#above-using-the-‘dbfilename’-configuration-directive" class="headerlink" title="above using the ‘dbfilename’ configuration directive."></a>above using the ‘dbfilename’ configuration directive.</h1><p>#</p><h1 id="The-Append-Only-File-will-also-be-created-inside-this-directory"><a href="#The-Append-Only-File-will-also-be-created-inside-this-directory" class="headerlink" title="The Append Only File will also be created inside this directory."></a>The Append Only File will also be created inside this directory.</h1><p>#</p><h1 id="Note-that-you-must-specify-a-directory-here-not-a-file-name"><a href="#Note-that-you-must-specify-a-directory-here-not-a-file-name" class="headerlink" title="Note that you must specify a directory here, not a file name."></a>Note that you must specify a directory here, not a file name.</h1><p>dir ./</p><p>################################# REPLICATION #################################</p><h1 id="Master-Slave-replication-Use-slaveof-to-make-a-Redis-instance-a-copy-of"><a href="#Master-Slave-replication-Use-slaveof-to-make-a-Redis-instance-a-copy-of" class="headerlink" title="Master-Slave replication. Use slaveof to make a Redis instance a copy of"></a>Master-Slave replication. Use slaveof to make a Redis instance a copy of</h1><h1 id="another-Redis-server-A-few-things-to-understand-ASAP-about-Redis-replication"><a href="#another-Redis-server-A-few-things-to-understand-ASAP-about-Redis-replication" class="headerlink" title="another Redis server. A few things to understand ASAP about Redis replication."></a>another Redis server. A few things to understand ASAP about Redis replication.</h1><p>#</p><h1 id="1-Redis-replication-is-asynchronous-but-you-can-configure-a-master-to"><a href="#1-Redis-replication-is-asynchronous-but-you-can-configure-a-master-to" class="headerlink" title="1) Redis replication is asynchronous, but you can configure a master to"></a>1) Redis replication is asynchronous, but you can configure a master to</h1><h1 id="stop-accepting-writes-if-it-appears-to-be-not-connected-with-at-least"><a href="#stop-accepting-writes-if-it-appears-to-be-not-connected-with-at-least" class="headerlink" title="stop accepting writes if it appears to be not connected with at least"></a>stop accepting writes if it appears to be not connected with at least</h1><h1 id="a-given-number-of-slaves"><a href="#a-given-number-of-slaves" class="headerlink" title="a given number of slaves."></a>a given number of slaves.</h1><h1 id="2-Redis-slaves-are-able-to-perform-a-partial-resynchronization-with-the"><a href="#2-Redis-slaves-are-able-to-perform-a-partial-resynchronization-with-the" class="headerlink" title="2) Redis slaves are able to perform a partial resynchronization with the"></a>2) Redis slaves are able to perform a partial resynchronization with the</h1><h1 id="master-if-the-replication-link-is-lost-for-a-relatively-small-amount-of"><a href="#master-if-the-replication-link-is-lost-for-a-relatively-small-amount-of" class="headerlink" title="master if the replication link is lost for a relatively small amount of"></a>master if the replication link is lost for a relatively small amount of</h1><h1 id="time-You-may-want-to-configure-the-replication-backlog-size-see-the-next"><a href="#time-You-may-want-to-configure-the-replication-backlog-size-see-the-next" class="headerlink" title="time. You may want to configure the replication backlog size (see the next"></a>time. You may want to configure the replication backlog size (see the next</h1><h1 id="sections-of-this-file-with-a-sensible-value-depending-on-your-needs"><a href="#sections-of-this-file-with-a-sensible-value-depending-on-your-needs" class="headerlink" title="sections of this file) with a sensible value depending on your needs."></a>sections of this file) with a sensible value depending on your needs.</h1><h1 id="3-Replication-is-automatic-and-does-not-need-user-intervention-After-a"><a href="#3-Replication-is-automatic-and-does-not-need-user-intervention-After-a" class="headerlink" title="3) Replication is automatic and does not need user intervention. After a"></a>3) Replication is automatic and does not need user intervention. After a</h1><h1 id="network-partition-slaves-automatically-try-to-reconnect-to-masters"><a href="#network-partition-slaves-automatically-try-to-reconnect-to-masters" class="headerlink" title="network partition slaves automatically try to reconnect to masters"></a>network partition slaves automatically try to reconnect to masters</h1><h1 id="and-resynchronize-with-them"><a href="#and-resynchronize-with-them" class="headerlink" title="and resynchronize with them."></a>and resynchronize with them.</h1><p>#</p><h1 id="slaveof"><a href="#slaveof" class="headerlink" title="slaveof  "></a>slaveof<masterip><masterport></masterport></masterip></h1><h1 id="If-the-master-is-password-protected-using-the-“requirepass”-configuration"><a href="#If-the-master-is-password-protected-using-the-“requirepass”-configuration" class="headerlink" title="If the master is password protected (using the “requirepass” configuration"></a>If the master is password protected (using the “requirepass” configuration</h1><h1 id="directive-below-it-is-possible-to-tell-the-slave-to-authenticate-before"><a href="#directive-below-it-is-possible-to-tell-the-slave-to-authenticate-before" class="headerlink" title="directive below) it is possible to tell the slave to authenticate before"></a>directive below) it is possible to tell the slave to authenticate before</h1><h1 id="starting-the-replication-synchronization-process-otherwise-the-master-will"><a href="#starting-the-replication-synchronization-process-otherwise-the-master-will" class="headerlink" title="starting the replication synchronization process, otherwise the master will"></a>starting the replication synchronization process, otherwise the master will</h1><h1 id="refuse-the-slave-request"><a href="#refuse-the-slave-request" class="headerlink" title="refuse the slave request."></a>refuse the slave request.</h1><p>#</p><h1 id="masterauth"><a href="#masterauth" class="headerlink" title="masterauth "></a>masterauth<master-password></master-password></h1><h1 id="When-a-slave-loses-its-connection-with-the-master-or-when-the-replication"><a href="#When-a-slave-loses-its-connection-with-the-master-or-when-the-replication" class="headerlink" title="When a slave loses its connection with the master, or when the replication"></a>When a slave loses its connection with the master, or when the replication</h1><h1 id="is-still-in-progress-the-slave-can-act-in-two-different-ways"><a href="#is-still-in-progress-the-slave-can-act-in-two-different-ways" class="headerlink" title="is still in progress, the slave can act in two different ways:"></a>is still in progress, the slave can act in two different ways:</h1><p>#</p><h1 id="1-if-slave-serve-stale-data-is-set-to-‘yes’-the-default-the-slave-will"><a href="#1-if-slave-serve-stale-data-is-set-to-‘yes’-the-default-the-slave-will" class="headerlink" title="1) if slave-serve-stale-data is set to ‘yes’ (the default) the slave will"></a>1) if slave-serve-stale-data is set to ‘yes’ (the default) the slave will</h1><h1 id="still-reply-to-client-requests-possibly-with-out-of-date-data-or-the"><a href="#still-reply-to-client-requests-possibly-with-out-of-date-data-or-the" class="headerlink" title="still reply to client requests, possibly with out of date data, or the"></a>still reply to client requests, possibly with out of date data, or the</h1><h1 id="data-set-may-just-be-empty-if-this-is-the-first-synchronization"><a href="#data-set-may-just-be-empty-if-this-is-the-first-synchronization" class="headerlink" title="data set may just be empty if this is the first synchronization."></a>data set may just be empty if this is the first synchronization.</h1><p>#</p><h1 id="2-if-slave-serve-stale-data-is-set-to-‘no’-the-slave-will-reply-with"><a href="#2-if-slave-serve-stale-data-is-set-to-‘no’-the-slave-will-reply-with" class="headerlink" title="2) if slave-serve-stale-data is set to ‘no’ the slave will reply with"></a>2) if slave-serve-stale-data is set to ‘no’ the slave will reply with</h1><h1 id="an-error-“SYNC-with-master-in-progress”-to-all-the-kind-of-commands"><a href="#an-error-“SYNC-with-master-in-progress”-to-all-the-kind-of-commands" class="headerlink" title="an error “SYNC with master in progress” to all the kind of commands"></a>an error “SYNC with master in progress” to all the kind of commands</h1><h1 id="but-to-INFO-and-SLAVEOF"><a href="#but-to-INFO-and-SLAVEOF" class="headerlink" title="but to INFO and SLAVEOF."></a>but to INFO and SLAVEOF.</h1><p>#<br>slave-serve-stale-data yes</p><h1 id="You-can-configure-a-slave-instance-to-accept-writes-or-not-Writing-against"><a href="#You-can-configure-a-slave-instance-to-accept-writes-or-not-Writing-against" class="headerlink" title="You can configure a slave instance to accept writes or not. Writing against"></a>You can configure a slave instance to accept writes or not. Writing against</h1><h1 id="a-slave-instance-may-be-useful-to-store-some-ephemeral-data-because-data"><a href="#a-slave-instance-may-be-useful-to-store-some-ephemeral-data-because-data" class="headerlink" title="a slave instance may be useful to store some ephemeral data (because data"></a>a slave instance may be useful to store some ephemeral data (because data</h1><h1 id="written-on-a-slave-will-be-easily-deleted-after-resync-with-the-master-but"><a href="#written-on-a-slave-will-be-easily-deleted-after-resync-with-the-master-but" class="headerlink" title="written on a slave will be easily deleted after resync with the master) but"></a>written on a slave will be easily deleted after resync with the master) but</h1><h1 id="may-also-cause-problems-if-clients-are-writing-to-it-because-of-a"><a href="#may-also-cause-problems-if-clients-are-writing-to-it-because-of-a" class="headerlink" title="may also cause problems if clients are writing to it because of a"></a>may also cause problems if clients are writing to it because of a</h1><h1 id="misconfiguration"><a href="#misconfiguration" class="headerlink" title="misconfiguration."></a>misconfiguration.</h1><p>#</p><h1 id="Since-Redis-2-6-by-default-slaves-are-read-only"><a href="#Since-Redis-2-6-by-default-slaves-are-read-only" class="headerlink" title="Since Redis 2.6 by default slaves are read-only."></a>Since Redis 2.6 by default slaves are read-only.</h1><p>#</p><h1 id="Note-read-only-slaves-are-not-designed-to-be-exposed-to-untrusted-clients"><a href="#Note-read-only-slaves-are-not-designed-to-be-exposed-to-untrusted-clients" class="headerlink" title="Note: read only slaves are not designed to be exposed to untrusted clients"></a>Note: read only slaves are not designed to be exposed to untrusted clients</h1><h1 id="on-the-internet-It’s-just-a-protection-layer-against-misuse-of-the-instance"><a href="#on-the-internet-It’s-just-a-protection-layer-against-misuse-of-the-instance" class="headerlink" title="on the internet. It’s just a protection layer against misuse of the instance."></a>on the internet. It’s just a protection layer against misuse of the instance.</h1><h1 id="Still-a-read-only-slave-exports-by-default-all-the-administrative-commands"><a href="#Still-a-read-only-slave-exports-by-default-all-the-administrative-commands" class="headerlink" title="Still a read only slave exports by default all the administrative commands"></a>Still a read only slave exports by default all the administrative commands</h1><h1 id="such-as-CONFIG-DEBUG-and-so-forth-To-a-limited-extent-you-can-improve"><a href="#such-as-CONFIG-DEBUG-and-so-forth-To-a-limited-extent-you-can-improve" class="headerlink" title="such as CONFIG, DEBUG, and so forth. To a limited extent you can improve"></a>such as CONFIG, DEBUG, and so forth. To a limited extent you can improve</h1><h1 id="security-of-read-only-slaves-using-‘rename-command’-to-shadow-all-the"><a href="#security-of-read-only-slaves-using-‘rename-command’-to-shadow-all-the" class="headerlink" title="security of read only slaves using ‘rename-command’ to shadow all the"></a>security of read only slaves using ‘rename-command’ to shadow all the</h1><h1 id="administrative-dangerous-commands"><a href="#administrative-dangerous-commands" class="headerlink" title="administrative / dangerous commands."></a>administrative / dangerous commands.</h1><p>slave-read-only yes</p><h1 id="Replication-SYNC-strategy-disk-or-socket"><a href="#Replication-SYNC-strategy-disk-or-socket" class="headerlink" title="Replication SYNC strategy: disk or socket."></a>Replication SYNC strategy: disk or socket.</h1><p>#</p><h1 id="——————————————————"><a href="#——————————————————" class="headerlink" title="——————————————————-"></a>——————————————————-</h1><h1 id="WARNING-DISKLESS-REPLICATION-IS-EXPERIMENTAL-CURRENTLY"><a href="#WARNING-DISKLESS-REPLICATION-IS-EXPERIMENTAL-CURRENTLY" class="headerlink" title="WARNING: DISKLESS REPLICATION IS EXPERIMENTAL CURRENTLY"></a>WARNING: DISKLESS REPLICATION IS EXPERIMENTAL CURRENTLY</h1><h1 id="——————————————————-1"><a href="#——————————————————-1" class="headerlink" title="——————————————————-"></a>——————————————————-</h1><p>#</p><h1 id="New-slaves-and-reconnecting-slaves-that-are-not-able-to-continue-the-replication"><a href="#New-slaves-and-reconnecting-slaves-that-are-not-able-to-continue-the-replication" class="headerlink" title="New slaves and reconnecting slaves that are not able to continue the replication"></a>New slaves and reconnecting slaves that are not able to continue the replication</h1><h1 id="process-just-receiving-differences-need-to-do-what-is-called-a-“full"><a href="#process-just-receiving-differences-need-to-do-what-is-called-a-“full" class="headerlink" title="process just receiving differences, need to do what is called a “full"></a>process just receiving differences, need to do what is called a “full</h1><h1 id="synchronization”-An-RDB-file-is-transmitted-from-the-master-to-the-slaves"><a href="#synchronization”-An-RDB-file-is-transmitted-from-the-master-to-the-slaves" class="headerlink" title="synchronization”. An RDB file is transmitted from the master to the slaves."></a>synchronization”. An RDB file is transmitted from the master to the slaves.</h1><h1 id="The-transmission-can-happen-in-two-different-ways"><a href="#The-transmission-can-happen-in-two-different-ways" class="headerlink" title="The transmission can happen in two different ways:"></a>The transmission can happen in two different ways:</h1><p>#</p><h1 id="1-Disk-backed-The-Redis-master-creates-a-new-process-that-writes-the-RDB"><a href="#1-Disk-backed-The-Redis-master-creates-a-new-process-that-writes-the-RDB" class="headerlink" title="1) Disk-backed: The Redis master creates a new process that writes the RDB"></a>1) Disk-backed: The Redis master creates a new process that writes the RDB</h1><h1 id="file-on-disk-Later-the-file-is-transferred-by-the-parent"><a href="#file-on-disk-Later-the-file-is-transferred-by-the-parent" class="headerlink" title="file on disk. Later the file is transferred by the parent"></a>file on disk. Later the file is transferred by the parent</h1><h1 id="process-to-the-slaves-incrementally"><a href="#process-to-the-slaves-incrementally" class="headerlink" title="process to the slaves incrementally."></a>process to the slaves incrementally.</h1><h1 id="2-Diskless-The-Redis-master-creates-a-new-process-that-directly-writes-the"><a href="#2-Diskless-The-Redis-master-creates-a-new-process-that-directly-writes-the" class="headerlink" title="2) Diskless: The Redis master creates a new process that directly writes the"></a>2) Diskless: The Redis master creates a new process that directly writes the</h1><h1 id="RDB-file-to-slave-sockets-without-touching-the-disk-at-all"><a href="#RDB-file-to-slave-sockets-without-touching-the-disk-at-all" class="headerlink" title="RDB file to slave sockets, without touching the disk at all."></a>RDB file to slave sockets, without touching the disk at all.</h1><p>#</p><h1 id="With-disk-backed-replication-while-the-RDB-file-is-generated-more-slaves"><a href="#With-disk-backed-replication-while-the-RDB-file-is-generated-more-slaves" class="headerlink" title="With disk-backed replication, while the RDB file is generated, more slaves"></a>With disk-backed replication, while the RDB file is generated, more slaves</h1><h1 id="can-be-queued-and-served-with-the-RDB-file-as-soon-as-the-current-child-producing"><a href="#can-be-queued-and-served-with-the-RDB-file-as-soon-as-the-current-child-producing" class="headerlink" title="can be queued and served with the RDB file as soon as the current child producing"></a>can be queued and served with the RDB file as soon as the current child producing</h1><h1 id="the-RDB-file-finishes-its-work-With-diskless-replication-instead-once"><a href="#the-RDB-file-finishes-its-work-With-diskless-replication-instead-once" class="headerlink" title="the RDB file finishes its work. With diskless replication instead once"></a>the RDB file finishes its work. With diskless replication instead once</h1><h1 id="the-transfer-starts-new-slaves-arriving-will-be-queued-and-a-new-transfer"><a href="#the-transfer-starts-new-slaves-arriving-will-be-queued-and-a-new-transfer" class="headerlink" title="the transfer starts, new slaves arriving will be queued and a new transfer"></a>the transfer starts, new slaves arriving will be queued and a new transfer</h1><h1 id="will-start-when-the-current-one-terminates"><a href="#will-start-when-the-current-one-terminates" class="headerlink" title="will start when the current one terminates."></a>will start when the current one terminates.</h1><p>#</p><h1 id="When-diskless-replication-is-used-the-master-waits-a-configurable-amount-of"><a href="#When-diskless-replication-is-used-the-master-waits-a-configurable-amount-of" class="headerlink" title="When diskless replication is used, the master waits a configurable amount of"></a>When diskless replication is used, the master waits a configurable amount of</h1><h1 id="time-in-seconds-before-starting-the-transfer-in-the-hope-that-multiple-slaves"><a href="#time-in-seconds-before-starting-the-transfer-in-the-hope-that-multiple-slaves" class="headerlink" title="time (in seconds) before starting the transfer in the hope that multiple slaves"></a>time (in seconds) before starting the transfer in the hope that multiple slaves</h1><h1 id="will-arrive-and-the-transfer-can-be-parallelized"><a href="#will-arrive-and-the-transfer-can-be-parallelized" class="headerlink" title="will arrive and the transfer can be parallelized."></a>will arrive and the transfer can be parallelized.</h1><p>#</p><h1 id="With-slow-disks-and-fast-large-bandwidth-networks-diskless-replication"><a href="#With-slow-disks-and-fast-large-bandwidth-networks-diskless-replication" class="headerlink" title="With slow disks and fast (large bandwidth) networks, diskless replication"></a>With slow disks and fast (large bandwidth) networks, diskless replication</h1><h1 id="works-better"><a href="#works-better" class="headerlink" title="works better."></a>works better.</h1><p>repl-diskless-sync no</p><h1 id="When-diskless-replication-is-enabled-it-is-possible-to-configure-the-delay"><a href="#When-diskless-replication-is-enabled-it-is-possible-to-configure-the-delay" class="headerlink" title="When diskless replication is enabled, it is possible to configure the delay"></a>When diskless replication is enabled, it is possible to configure the delay</h1><h1 id="the-server-waits-in-order-to-spawn-the-child-that-transfers-the-RDB-via-socket"><a href="#the-server-waits-in-order-to-spawn-the-child-that-transfers-the-RDB-via-socket" class="headerlink" title="the server waits in order to spawn the child that transfers the RDB via socket"></a>the server waits in order to spawn the child that transfers the RDB via socket</h1><h1 id="to-the-slaves"><a href="#to-the-slaves" class="headerlink" title="to the slaves."></a>to the slaves.</h1><p>#</p><h1 id="This-is-important-since-once-the-transfer-starts-it-is-not-possible-to-serve"><a href="#This-is-important-since-once-the-transfer-starts-it-is-not-possible-to-serve" class="headerlink" title="This is important since once the transfer starts, it is not possible to serve"></a>This is important since once the transfer starts, it is not possible to serve</h1><h1 id="new-slaves-arriving-that-will-be-queued-for-the-next-RDB-transfer-so-the-server"><a href="#new-slaves-arriving-that-will-be-queued-for-the-next-RDB-transfer-so-the-server" class="headerlink" title="new slaves arriving, that will be queued for the next RDB transfer, so the server"></a>new slaves arriving, that will be queued for the next RDB transfer, so the server</h1><h1 id="waits-a-delay-in-order-to-let-more-slaves-arrive"><a href="#waits-a-delay-in-order-to-let-more-slaves-arrive" class="headerlink" title="waits a delay in order to let more slaves arrive."></a>waits a delay in order to let more slaves arrive.</h1><p>#</p><h1 id="The-delay-is-specified-in-seconds-and-by-default-is-5-seconds-To-disable"><a href="#The-delay-is-specified-in-seconds-and-by-default-is-5-seconds-To-disable" class="headerlink" title="The delay is specified in seconds, and by default is 5 seconds. To disable"></a>The delay is specified in seconds, and by default is 5 seconds. To disable</h1><h1 id="it-entirely-just-set-it-to-0-seconds-and-the-transfer-will-start-ASAP"><a href="#it-entirely-just-set-it-to-0-seconds-and-the-transfer-will-start-ASAP" class="headerlink" title="it entirely just set it to 0 seconds and the transfer will start ASAP."></a>it entirely just set it to 0 seconds and the transfer will start ASAP.</h1><p>repl-diskless-sync-delay 5</p><h1 id="Slaves-send-PINGs-to-server-in-a-predefined-interval-It’s-possible-to-change"><a href="#Slaves-send-PINGs-to-server-in-a-predefined-interval-It’s-possible-to-change" class="headerlink" title="Slaves send PINGs to server in a predefined interval. It’s possible to change"></a>Slaves send PINGs to server in a predefined interval. It’s possible to change</h1><h1 id="this-interval-with-the-repl-ping-slave-period-option-The-default-value-is-10"><a href="#this-interval-with-the-repl-ping-slave-period-option-The-default-value-is-10" class="headerlink" title="this interval with the repl_ping_slave_period option. The default value is 10"></a>this interval with the repl_ping_slave_period option. The default value is 10</h1><h1 id="seconds"><a href="#seconds" class="headerlink" title="seconds."></a>seconds.</h1><p>#</p><h1 id="repl-ping-slave-period-10"><a href="#repl-ping-slave-period-10" class="headerlink" title="repl-ping-slave-period 10"></a>repl-ping-slave-period 10</h1><h1 id="The-following-option-sets-the-replication-timeout-for"><a href="#The-following-option-sets-the-replication-timeout-for" class="headerlink" title="The following option sets the replication timeout for:"></a>The following option sets the replication timeout for:</h1><p>#</p><h1 id="1-Bulk-transfer-I-O-during-SYNC-from-the-point-of-view-of-slave"><a href="#1-Bulk-transfer-I-O-during-SYNC-from-the-point-of-view-of-slave" class="headerlink" title="1) Bulk transfer I/O during SYNC, from the point of view of slave."></a>1) Bulk transfer I/O during SYNC, from the point of view of slave.</h1><h1 id="2-Master-timeout-from-the-point-of-view-of-slaves-data-pings"><a href="#2-Master-timeout-from-the-point-of-view-of-slaves-data-pings" class="headerlink" title="2) Master timeout from the point of view of slaves (data, pings)."></a>2) Master timeout from the point of view of slaves (data, pings).</h1><h1 id="3-Slave-timeout-from-the-point-of-view-of-masters-REPLCONF-ACK-pings"><a href="#3-Slave-timeout-from-the-point-of-view-of-masters-REPLCONF-ACK-pings" class="headerlink" title="3) Slave timeout from the point of view of masters (REPLCONF ACK pings)."></a>3) Slave timeout from the point of view of masters (REPLCONF ACK pings).</h1><p>#</p><h1 id="It-is-important-to-make-sure-that-this-value-is-greater-than-the-value"><a href="#It-is-important-to-make-sure-that-this-value-is-greater-than-the-value" class="headerlink" title="It is important to make sure that this value is greater than the value"></a>It is important to make sure that this value is greater than the value</h1><h1 id="specified-for-repl-ping-slave-period-otherwise-a-timeout-will-be-detected"><a href="#specified-for-repl-ping-slave-period-otherwise-a-timeout-will-be-detected" class="headerlink" title="specified for repl-ping-slave-period otherwise a timeout will be detected"></a>specified for repl-ping-slave-period otherwise a timeout will be detected</h1><h1 id="every-time-there-is-low-traffic-between-the-master-and-the-slave"><a href="#every-time-there-is-low-traffic-between-the-master-and-the-slave" class="headerlink" title="every time there is low traffic between the master and the slave."></a>every time there is low traffic between the master and the slave.</h1><p>#</p><h1 id="repl-timeout-60"><a href="#repl-timeout-60" class="headerlink" title="repl-timeout 60"></a>repl-timeout 60</h1><h1 id="Disable-TCP-NODELAY-on-the-slave-socket-after-SYNC"><a href="#Disable-TCP-NODELAY-on-the-slave-socket-after-SYNC" class="headerlink" title="Disable TCP_NODELAY on the slave socket after SYNC?"></a>Disable TCP_NODELAY on the slave socket after SYNC?</h1><p>#</p><h1 id="If-you-select-“yes”-Redis-will-use-a-smaller-number-of-TCP-packets-and"><a href="#If-you-select-“yes”-Redis-will-use-a-smaller-number-of-TCP-packets-and" class="headerlink" title="If you select “yes” Redis will use a smaller number of TCP packets and"></a>If you select “yes” Redis will use a smaller number of TCP packets and</h1><h1 id="less-bandwidth-to-send-data-to-slaves-But-this-can-add-a-delay-for"><a href="#less-bandwidth-to-send-data-to-slaves-But-this-can-add-a-delay-for" class="headerlink" title="less bandwidth to send data to slaves. But this can add a delay for"></a>less bandwidth to send data to slaves. But this can add a delay for</h1><h1 id="the-data-to-appear-on-the-slave-side-up-to-40-milliseconds-with"><a href="#the-data-to-appear-on-the-slave-side-up-to-40-milliseconds-with" class="headerlink" title="the data to appear on the slave side, up to 40 milliseconds with"></a>the data to appear on the slave side, up to 40 milliseconds with</h1><h1 id="Linux-kernels-using-a-default-configuration"><a href="#Linux-kernels-using-a-default-configuration" class="headerlink" title="Linux kernels using a default configuration."></a>Linux kernels using a default configuration.</h1><p>#</p><h1 id="If-you-select-“no”-the-delay-for-data-to-appear-on-the-slave-side-will"><a href="#If-you-select-“no”-the-delay-for-data-to-appear-on-the-slave-side-will" class="headerlink" title="If you select “no” the delay for data to appear on the slave side will"></a>If you select “no” the delay for data to appear on the slave side will</h1><h1 id="be-reduced-but-more-bandwidth-will-be-used-for-replication"><a href="#be-reduced-but-more-bandwidth-will-be-used-for-replication" class="headerlink" title="be reduced but more bandwidth will be used for replication."></a>be reduced but more bandwidth will be used for replication.</h1><p>#</p><h1 id="By-default-we-optimize-for-low-latency-but-in-very-high-traffic-conditions"><a href="#By-default-we-optimize-for-low-latency-but-in-very-high-traffic-conditions" class="headerlink" title="By default we optimize for low latency, but in very high traffic conditions"></a>By default we optimize for low latency, but in very high traffic conditions</h1><h1 id="or-when-the-master-and-slaves-are-many-hops-away-turning-this-to-“yes”-may"><a href="#or-when-the-master-and-slaves-are-many-hops-away-turning-this-to-“yes”-may" class="headerlink" title="or when the master and slaves are many hops away, turning this to “yes” may"></a>or when the master and slaves are many hops away, turning this to “yes” may</h1><h1 id="be-a-good-idea"><a href="#be-a-good-idea" class="headerlink" title="be a good idea."></a>be a good idea.</h1><p>repl-disable-tcp-nodelay no</p><h1 id="Set-the-replication-backlog-size-The-backlog-is-a-buffer-that-accumulates"><a href="#Set-the-replication-backlog-size-The-backlog-is-a-buffer-that-accumulates" class="headerlink" title="Set the replication backlog size. The backlog is a buffer that accumulates"></a>Set the replication backlog size. The backlog is a buffer that accumulates</h1><h1 id="slave-data-when-slaves-are-disconnected-for-some-time-so-that-when-a-slave"><a href="#slave-data-when-slaves-are-disconnected-for-some-time-so-that-when-a-slave" class="headerlink" title="slave data when slaves are disconnected for some time, so that when a slave"></a>slave data when slaves are disconnected for some time, so that when a slave</h1><h1 id="wants-to-reconnect-again-often-a-full-resync-is-not-needed-but-a-partial"><a href="#wants-to-reconnect-again-often-a-full-resync-is-not-needed-but-a-partial" class="headerlink" title="wants to reconnect again, often a full resync is not needed, but a partial"></a>wants to reconnect again, often a full resync is not needed, but a partial</h1><h1 id="resync-is-enough-just-passing-the-portion-of-data-the-slave-missed-while"><a href="#resync-is-enough-just-passing-the-portion-of-data-the-slave-missed-while" class="headerlink" title="resync is enough, just passing the portion of data the slave missed while"></a>resync is enough, just passing the portion of data the slave missed while</h1><h1 id="disconnected"><a href="#disconnected" class="headerlink" title="disconnected."></a>disconnected.</h1><p>#</p><h1 id="The-bigger-the-replication-backlog-the-longer-the-time-the-slave-can-be"><a href="#The-bigger-the-replication-backlog-the-longer-the-time-the-slave-can-be" class="headerlink" title="The bigger the replication backlog, the longer the time the slave can be"></a>The bigger the replication backlog, the longer the time the slave can be</h1><h1 id="disconnected-and-later-be-able-to-perform-a-partial-resynchronization"><a href="#disconnected-and-later-be-able-to-perform-a-partial-resynchronization" class="headerlink" title="disconnected and later be able to perform a partial resynchronization."></a>disconnected and later be able to perform a partial resynchronization.</h1><p>#</p><h1 id="The-backlog-is-only-allocated-once-there-is-at-least-a-slave-connected"><a href="#The-backlog-is-only-allocated-once-there-is-at-least-a-slave-connected" class="headerlink" title="The backlog is only allocated once there is at least a slave connected."></a>The backlog is only allocated once there is at least a slave connected.</h1><p>#</p><h1 id="repl-backlog-size-1mb"><a href="#repl-backlog-size-1mb" class="headerlink" title="repl-backlog-size 1mb"></a>repl-backlog-size 1mb</h1><h1 id="After-a-master-has-no-longer-connected-slaves-for-some-time-the-backlog"><a href="#After-a-master-has-no-longer-connected-slaves-for-some-time-the-backlog" class="headerlink" title="After a master has no longer connected slaves for some time, the backlog"></a>After a master has no longer connected slaves for some time, the backlog</h1><h1 id="will-be-freed-The-following-option-configures-the-amount-of-seconds-that"><a href="#will-be-freed-The-following-option-configures-the-amount-of-seconds-that" class="headerlink" title="will be freed. The following option configures the amount of seconds that"></a>will be freed. The following option configures the amount of seconds that</h1><h1 id="need-to-elapse-starting-from-the-time-the-last-slave-disconnected-for"><a href="#need-to-elapse-starting-from-the-time-the-last-slave-disconnected-for" class="headerlink" title="need to elapse, starting from the time the last slave disconnected, for"></a>need to elapse, starting from the time the last slave disconnected, for</h1><h1 id="the-backlog-buffer-to-be-freed"><a href="#the-backlog-buffer-to-be-freed" class="headerlink" title="the backlog buffer to be freed."></a>the backlog buffer to be freed.</h1><p>#</p><h1 id="A-value-of-0-means-to-never-release-the-backlog"><a href="#A-value-of-0-means-to-never-release-the-backlog" class="headerlink" title="A value of 0 means to never release the backlog."></a>A value of 0 means to never release the backlog.</h1><p>#</p><h1 id="repl-backlog-ttl-3600"><a href="#repl-backlog-ttl-3600" class="headerlink" title="repl-backlog-ttl 3600"></a>repl-backlog-ttl 3600</h1><h1 id="The-slave-priority-is-an-integer-number-published-by-Redis-in-the-INFO-output"><a href="#The-slave-priority-is-an-integer-number-published-by-Redis-in-the-INFO-output" class="headerlink" title="The slave priority is an integer number published by Redis in the INFO output."></a>The slave priority is an integer number published by Redis in the INFO output.</h1><h1 id="It-is-used-by-Redis-Sentinel-in-order-to-select-a-slave-to-promote-into-a"><a href="#It-is-used-by-Redis-Sentinel-in-order-to-select-a-slave-to-promote-into-a" class="headerlink" title="It is used by Redis Sentinel in order to select a slave to promote into a"></a>It is used by Redis Sentinel in order to select a slave to promote into a</h1><h1 id="master-if-the-master-is-no-longer-working-correctly"><a href="#master-if-the-master-is-no-longer-working-correctly" class="headerlink" title="master if the master is no longer working correctly."></a>master if the master is no longer working correctly.</h1><p>#</p><h1 id="A-slave-with-a-low-priority-number-is-considered-better-for-promotion-so"><a href="#A-slave-with-a-low-priority-number-is-considered-better-for-promotion-so" class="headerlink" title="A slave with a low priority number is considered better for promotion, so"></a>A slave with a low priority number is considered better for promotion, so</h1><h1 id="for-instance-if-there-are-three-slaves-with-priority-10-100-25-Sentinel-will"><a href="#for-instance-if-there-are-three-slaves-with-priority-10-100-25-Sentinel-will" class="headerlink" title="for instance if there are three slaves with priority 10, 100, 25 Sentinel will"></a>for instance if there are three slaves with priority 10, 100, 25 Sentinel will</h1><h1 id="pick-the-one-with-priority-10-that-is-the-lowest"><a href="#pick-the-one-with-priority-10-that-is-the-lowest" class="headerlink" title="pick the one with priority 10, that is the lowest."></a>pick the one with priority 10, that is the lowest.</h1><p>#</p><h1 id="However-a-special-priority-of-0-marks-the-slave-as-not-able-to-perform-the"><a href="#However-a-special-priority-of-0-marks-the-slave-as-not-able-to-perform-the" class="headerlink" title="However a special priority of 0 marks the slave as not able to perform the"></a>However a special priority of 0 marks the slave as not able to perform the</h1><h1 id="role-of-master-so-a-slave-with-priority-of-0-will-never-be-selected-by"><a href="#role-of-master-so-a-slave-with-priority-of-0-will-never-be-selected-by" class="headerlink" title="role of master, so a slave with priority of 0 will never be selected by"></a>role of master, so a slave with priority of 0 will never be selected by</h1><h1 id="Redis-Sentinel-for-promotion"><a href="#Redis-Sentinel-for-promotion" class="headerlink" title="Redis Sentinel for promotion."></a>Redis Sentinel for promotion.</h1><p>#</p><h1 id="By-default-the-priority-is-100"><a href="#By-default-the-priority-is-100" class="headerlink" title="By default the priority is 100."></a>By default the priority is 100.</h1><p>slave-priority 100</p><h1 id="It-is-possible-for-a-master-to-stop-accepting-writes-if-there-are-less-than"><a href="#It-is-possible-for-a-master-to-stop-accepting-writes-if-there-are-less-than" class="headerlink" title="It is possible for a master to stop accepting writes if there are less than"></a>It is possible for a master to stop accepting writes if there are less than</h1><h1 id="N-slaves-connected-having-a-lag-less-or-equal-than-M-seconds"><a href="#N-slaves-connected-having-a-lag-less-or-equal-than-M-seconds" class="headerlink" title="N slaves connected, having a lag less or equal than M seconds."></a>N slaves connected, having a lag less or equal than M seconds.</h1><p>#</p><h1 id="The-N-slaves-need-to-be-in-“online”-state"><a href="#The-N-slaves-need-to-be-in-“online”-state" class="headerlink" title="The N slaves need to be in “online” state."></a>The N slaves need to be in “online” state.</h1><p>#</p><h1 id="The-lag-in-seconds-that-must-be-lt-the-specified-value-is-calculated-from"><a href="#The-lag-in-seconds-that-must-be-lt-the-specified-value-is-calculated-from" class="headerlink" title="The lag in seconds, that must be &lt;= the specified value, is calculated from"></a>The lag in seconds, that must be &lt;= the specified value, is calculated from</h1><h1 id="the-last-ping-received-from-the-slave-that-is-usually-sent-every-second"><a href="#the-last-ping-received-from-the-slave-that-is-usually-sent-every-second" class="headerlink" title="the last ping received from the slave, that is usually sent every second."></a>the last ping received from the slave, that is usually sent every second.</h1><p>#</p><h1 id="This-option-does-not-GUARANTEE-that-N-replicas-will-accept-the-write-but"><a href="#This-option-does-not-GUARANTEE-that-N-replicas-will-accept-the-write-but" class="headerlink" title="This option does not GUARANTEE that N replicas will accept the write, but"></a>This option does not GUARANTEE that N replicas will accept the write, but</h1><h1 id="will-limit-the-window-of-exposure-for-lost-writes-in-case-not-enough-slaves"><a href="#will-limit-the-window-of-exposure-for-lost-writes-in-case-not-enough-slaves" class="headerlink" title="will limit the window of exposure for lost writes in case not enough slaves"></a>will limit the window of exposure for lost writes in case not enough slaves</h1><h1 id="are-available-to-the-specified-number-of-seconds"><a href="#are-available-to-the-specified-number-of-seconds" class="headerlink" title="are available, to the specified number of seconds."></a>are available, to the specified number of seconds.</h1><p>#</p><h1 id="For-example-to-require-at-least-3-slaves-with-a-lag-lt-10-seconds-use"><a href="#For-example-to-require-at-least-3-slaves-with-a-lag-lt-10-seconds-use" class="headerlink" title="For example to require at least 3 slaves with a lag &lt;= 10 seconds use:"></a>For example to require at least 3 slaves with a lag &lt;= 10 seconds use:</h1><p>#</p><h1 id="min-slaves-to-write-3"><a href="#min-slaves-to-write-3" class="headerlink" title="min-slaves-to-write 3"></a>min-slaves-to-write 3</h1><h1 id="min-slaves-max-lag-10"><a href="#min-slaves-max-lag-10" class="headerlink" title="min-slaves-max-lag 10"></a>min-slaves-max-lag 10</h1><p>#</p><h1 id="Setting-one-or-the-other-to-0-disables-the-feature"><a href="#Setting-one-or-the-other-to-0-disables-the-feature" class="headerlink" title="Setting one or the other to 0 disables the feature."></a>Setting one or the other to 0 disables the feature.</h1><p>#</p><h1 id="By-default-min-slaves-to-write-is-set-to-0-feature-disabled-and"><a href="#By-default-min-slaves-to-write-is-set-to-0-feature-disabled-and" class="headerlink" title="By default min-slaves-to-write is set to 0 (feature disabled) and"></a>By default min-slaves-to-write is set to 0 (feature disabled) and</h1><h1 id="min-slaves-max-lag-is-set-to-10"><a href="#min-slaves-max-lag-is-set-to-10" class="headerlink" title="min-slaves-max-lag is set to 10."></a>min-slaves-max-lag is set to 10.</h1><h1 id="A-Redis-master-is-able-to-list-the-address-and-port-of-the-attached"><a href="#A-Redis-master-is-able-to-list-the-address-and-port-of-the-attached" class="headerlink" title="A Redis master is able to list the address and port of the attached"></a>A Redis master is able to list the address and port of the attached</h1><h1 id="slaves-in-different-ways-For-example-the-“INFO-replication”-section"><a href="#slaves-in-different-ways-For-example-the-“INFO-replication”-section" class="headerlink" title="slaves in different ways. For example the “INFO replication” section"></a>slaves in different ways. For example the “INFO replication” section</h1><h1 id="offers-this-information-which-is-used-among-other-tools-by"><a href="#offers-this-information-which-is-used-among-other-tools-by" class="headerlink" title="offers this information, which is used, among other tools, by"></a>offers this information, which is used, among other tools, by</h1><h1 id="Redis-Sentinel-in-order-to-discover-slave-instances"><a href="#Redis-Sentinel-in-order-to-discover-slave-instances" class="headerlink" title="Redis Sentinel in order to discover slave instances."></a>Redis Sentinel in order to discover slave instances.</h1><h1 id="Another-place-where-this-info-is-available-is-in-the-output-of-the"><a href="#Another-place-where-this-info-is-available-is-in-the-output-of-the" class="headerlink" title="Another place where this info is available is in the output of the"></a>Another place where this info is available is in the output of the</h1><h1 id="“ROLE”-command-of-a-masteer"><a href="#“ROLE”-command-of-a-masteer" class="headerlink" title="“ROLE” command of a masteer."></a>“ROLE” command of a masteer.</h1><p>#</p><h1 id="The-listed-IP-and-address-normally-reported-by-a-slave-is-obtained"><a href="#The-listed-IP-and-address-normally-reported-by-a-slave-is-obtained" class="headerlink" title="The listed IP and address normally reported by a slave is obtained"></a>The listed IP and address normally reported by a slave is obtained</h1><h1 id="in-the-following-way"><a href="#in-the-following-way" class="headerlink" title="in the following way:"></a>in the following way:</h1><p>#</p><h1 id="IP-The-address-is-auto-detected-by-checking-the-peer-address"><a href="#IP-The-address-is-auto-detected-by-checking-the-peer-address" class="headerlink" title="IP: The address is auto detected by checking the peer address"></a>IP: The address is auto detected by checking the peer address</h1><h1 id="of-the-socket-used-by-the-slave-to-connect-with-the-master"><a href="#of-the-socket-used-by-the-slave-to-connect-with-the-master" class="headerlink" title="of the socket used by the slave to connect with the master."></a>of the socket used by the slave to connect with the master.</h1><p>#</p><h1 id="Port-The-port-is-communicated-by-the-slave-during-the-replication"><a href="#Port-The-port-is-communicated-by-the-slave-during-the-replication" class="headerlink" title="Port: The port is communicated by the slave during the replication"></a>Port: The port is communicated by the slave during the replication</h1><h1 id="handshake-and-is-normally-the-port-that-the-slave-is-using-to"><a href="#handshake-and-is-normally-the-port-that-the-slave-is-using-to" class="headerlink" title="handshake, and is normally the port that the slave is using to"></a>handshake, and is normally the port that the slave is using to</h1><h1 id="list-for-connections"><a href="#list-for-connections" class="headerlink" title="list for connections."></a>list for connections.</h1><p>#</p><h1 id="However-when-port-forwarding-or-Network-Address-Translation-NAT-is"><a href="#However-when-port-forwarding-or-Network-Address-Translation-NAT-is" class="headerlink" title="However when port forwarding or Network Address Translation (NAT) is"></a>However when port forwarding or Network Address Translation (NAT) is</h1><h1 id="used-the-slave-may-be-actually-reachable-via-different-IP-and-port"><a href="#used-the-slave-may-be-actually-reachable-via-different-IP-and-port" class="headerlink" title="used, the slave may be actually reachable via different IP and port"></a>used, the slave may be actually reachable via different IP and port</h1><h1 id="pairs-The-following-two-options-can-be-used-by-a-slave-in-order-to"><a href="#pairs-The-following-two-options-can-be-used-by-a-slave-in-order-to" class="headerlink" title="pairs. The following two options can be used by a slave in order to"></a>pairs. The following two options can be used by a slave in order to</h1><h1 id="report-to-its-master-a-specific-set-of-IP-and-port-so-that-both-INFO"><a href="#report-to-its-master-a-specific-set-of-IP-and-port-so-that-both-INFO" class="headerlink" title="report to its master a specific set of IP and port, so that both INFO"></a>report to its master a specific set of IP and port, so that both INFO</h1><h1 id="and-ROLE-will-report-those-values"><a href="#and-ROLE-will-report-those-values" class="headerlink" title="and ROLE will report those values."></a>and ROLE will report those values.</h1><p>#</p><h1 id="There-is-no-need-to-use-both-the-options-if-you-need-to-override-just"><a href="#There-is-no-need-to-use-both-the-options-if-you-need-to-override-just" class="headerlink" title="There is no need to use both the options if you need to override just"></a>There is no need to use both the options if you need to override just</h1><h1 id="the-port-or-the-IP-address"><a href="#the-port-or-the-IP-address" class="headerlink" title="the port or the IP address."></a>the port or the IP address.</h1><p>#</p><h1 id="slave-announce-ip-5-5-5-5"><a href="#slave-announce-ip-5-5-5-5" class="headerlink" title="slave-announce-ip 5.5.5.5"></a>slave-announce-ip 5.5.5.5</h1><h1 id="slave-announce-port-1234"><a href="#slave-announce-port-1234" class="headerlink" title="slave-announce-port 1234"></a>slave-announce-port 1234</h1><p>################################## SECURITY ###################################</p><h1 id="Require-clients-to-issue-AUTH-before-processing-any-other"><a href="#Require-clients-to-issue-AUTH-before-processing-any-other" class="headerlink" title="Require clients to issue AUTH  before processing any other"></a>Require clients to issue AUTH<password>before processing any other</password></h1><h1 id="commands-This-might-be-useful-in-environments-in-which-you-do-not-trust"><a href="#commands-This-might-be-useful-in-environments-in-which-you-do-not-trust" class="headerlink" title="commands.  This might be useful in environments in which you do not trust"></a>commands. This might be useful in environments in which you do not trust</h1><h1 id="others-with-access-to-the-host-running-redis-server"><a href="#others-with-access-to-the-host-running-redis-server" class="headerlink" title="others with access to the host running redis-server."></a>others with access to the host running redis-server.</h1><p>#</p><h1 id="This-should-stay-commented-out-for-backward-compatibility-and-because-most"><a href="#This-should-stay-commented-out-for-backward-compatibility-and-because-most" class="headerlink" title="This should stay commented out for backward compatibility and because most"></a>This should stay commented out for backward compatibility and because most</h1><h1 id="people-do-not-need-auth-e-g-they-run-their-own-servers"><a href="#people-do-not-need-auth-e-g-they-run-their-own-servers" class="headerlink" title="people do not need auth (e.g. they run their own servers)."></a>people do not need auth (e.g. they run their own servers).</h1><p>#</p><h1 id="Warning-since-Redis-is-pretty-fast-an-outside-user-can-try-up-to"><a href="#Warning-since-Redis-is-pretty-fast-an-outside-user-can-try-up-to" class="headerlink" title="Warning: since Redis is pretty fast an outside user can try up to"></a>Warning: since Redis is pretty fast an outside user can try up to</h1><h1 id="150k-passwords-per-second-against-a-good-box-This-means-that-you-should"><a href="#150k-passwords-per-second-against-a-good-box-This-means-that-you-should" class="headerlink" title="150k passwords per second against a good box. This means that you should"></a>150k passwords per second against a good box. This means that you should</h1><h1 id="use-a-very-strong-password-otherwise-it-will-be-very-easy-to-break"><a href="#use-a-very-strong-password-otherwise-it-will-be-very-easy-to-break" class="headerlink" title="use a very strong password otherwise it will be very easy to break."></a>use a very strong password otherwise it will be very easy to break.</h1><p>#</p><h1 id="requirepass-foobared"><a href="#requirepass-foobared" class="headerlink" title="requirepass foobared"></a>requirepass foobared</h1><h1 id="Command-renaming"><a href="#Command-renaming" class="headerlink" title="Command renaming."></a>Command renaming.</h1><p>#</p><h1 id="It-is-possible-to-change-the-name-of-dangerous-commands-in-a-shared"><a href="#It-is-possible-to-change-the-name-of-dangerous-commands-in-a-shared" class="headerlink" title="It is possible to change the name of dangerous commands in a shared"></a>It is possible to change the name of dangerous commands in a shared</h1><h1 id="environment-For-instance-the-CONFIG-command-may-be-renamed-into-something"><a href="#environment-For-instance-the-CONFIG-command-may-be-renamed-into-something" class="headerlink" title="environment. For instance the CONFIG command may be renamed into something"></a>environment. For instance the CONFIG command may be renamed into something</h1><h1 id="hard-to-guess-so-that-it-will-still-be-available-for-internal-use-tools"><a href="#hard-to-guess-so-that-it-will-still-be-available-for-internal-use-tools" class="headerlink" title="hard to guess so that it will still be available for internal-use tools"></a>hard to guess so that it will still be available for internal-use tools</h1><h1 id="but-not-available-for-general-clients"><a href="#but-not-available-for-general-clients" class="headerlink" title="but not available for general clients."></a>but not available for general clients.</h1><p>#</p><h1 id="Example"><a href="#Example" class="headerlink" title="Example:"></a>Example:</h1><p>#</p><h1 id="rename-command-CONFIG-b840fc02d524045429941cc15f59e41cb7be6c52"><a href="#rename-command-CONFIG-b840fc02d524045429941cc15f59e41cb7be6c52" class="headerlink" title="rename-command CONFIG b840fc02d524045429941cc15f59e41cb7be6c52"></a>rename-command CONFIG b840fc02d524045429941cc15f59e41cb7be6c52</h1><p>#</p><h1 id="It-is-also-possible-to-completely-kill-a-command-by-renaming-it-into"><a href="#It-is-also-possible-to-completely-kill-a-command-by-renaming-it-into" class="headerlink" title="It is also possible to completely kill a command by renaming it into"></a>It is also possible to completely kill a command by renaming it into</h1><h1 id="an-empty-string"><a href="#an-empty-string" class="headerlink" title="an empty string:"></a>an empty string:</h1><p>#</p><h1 id="rename-command-CONFIG-“”"><a href="#rename-command-CONFIG-“”" class="headerlink" title="rename-command CONFIG “”"></a>rename-command CONFIG “”</h1><p>#</p><h1 id="Please-note-that-changing-the-name-of-commands-that-are-logged-into-the"><a href="#Please-note-that-changing-the-name-of-commands-that-are-logged-into-the" class="headerlink" title="Please note that changing the name of commands that are logged into the"></a>Please note that changing the name of commands that are logged into the</h1><h1 id="AOF-file-or-transmitted-to-slaves-may-cause-problems"><a href="#AOF-file-or-transmitted-to-slaves-may-cause-problems" class="headerlink" title="AOF file or transmitted to slaves may cause problems."></a>AOF file or transmitted to slaves may cause problems.</h1><p>################################### LIMITS ####################################</p><h1 id="Set-the-max-number-of-connected-clients-at-the-same-time-By-default"><a href="#Set-the-max-number-of-connected-clients-at-the-same-time-By-default" class="headerlink" title="Set the max number of connected clients at the same time. By default"></a>Set the max number of connected clients at the same time. By default</h1><h1 id="this-limit-is-set-to-10000-clients-however-if-the-Redis-server-is-not"><a href="#this-limit-is-set-to-10000-clients-however-if-the-Redis-server-is-not" class="headerlink" title="this limit is set to 10000 clients, however if the Redis server is not"></a>this limit is set to 10000 clients, however if the Redis server is not</h1><h1 id="able-to-configure-the-process-file-limit-to-allow-for-the-specified-limit"><a href="#able-to-configure-the-process-file-limit-to-allow-for-the-specified-limit" class="headerlink" title="able to configure the process file limit to allow for the specified limit"></a>able to configure the process file limit to allow for the specified limit</h1><h1 id="the-max-number-of-allowed-clients-is-set-to-the-current-file-limit"><a href="#the-max-number-of-allowed-clients-is-set-to-the-current-file-limit" class="headerlink" title="the max number of allowed clients is set to the current file limit"></a>the max number of allowed clients is set to the current file limit</h1><h1 id="minus-32-as-Redis-reserves-a-few-file-descriptors-for-internal-uses"><a href="#minus-32-as-Redis-reserves-a-few-file-descriptors-for-internal-uses" class="headerlink" title="minus 32 (as Redis reserves a few file descriptors for internal uses)."></a>minus 32 (as Redis reserves a few file descriptors for internal uses).</h1><p>#</p><h1 id="Once-the-limit-is-reached-Redis-will-close-all-the-new-connections-sending"><a href="#Once-the-limit-is-reached-Redis-will-close-all-the-new-connections-sending" class="headerlink" title="Once the limit is reached Redis will close all the new connections sending"></a>Once the limit is reached Redis will close all the new connections sending</h1><h1 id="an-error-‘max-number-of-clients-reached’"><a href="#an-error-‘max-number-of-clients-reached’" class="headerlink" title="an error ‘max number of clients reached’."></a>an error ‘max number of clients reached’.</h1><p>#</p><h1 id="maxclients-10000"><a href="#maxclients-10000" class="headerlink" title="maxclients 10000"></a>maxclients 10000</h1><h1 id="Don’t-use-more-memory-than-the-specified-amount-of-bytes"><a href="#Don’t-use-more-memory-than-the-specified-amount-of-bytes" class="headerlink" title="Don’t use more memory than the specified amount of bytes."></a>Don’t use more memory than the specified amount of bytes.</h1><h1 id="When-the-memory-limit-is-reached-Redis-will-try-to-remove-keys"><a href="#When-the-memory-limit-is-reached-Redis-will-try-to-remove-keys" class="headerlink" title="When the memory limit is reached Redis will try to remove keys"></a>When the memory limit is reached Redis will try to remove keys</h1><h1 id="according-to-the-eviction-policy-selected-see-maxmemory-policy"><a href="#according-to-the-eviction-policy-selected-see-maxmemory-policy" class="headerlink" title="according to the eviction policy selected (see maxmemory-policy)."></a>according to the eviction policy selected (see maxmemory-policy).</h1><p>#</p><h1 id="If-Redis-can’t-remove-keys-according-to-the-policy-or-if-the-policy-is"><a href="#If-Redis-can’t-remove-keys-according-to-the-policy-or-if-the-policy-is" class="headerlink" title="If Redis can’t remove keys according to the policy, or if the policy is"></a>If Redis can’t remove keys according to the policy, or if the policy is</h1><h1 id="set-to-‘noeviction’-Redis-will-start-to-reply-with-errors-to-commands"><a href="#set-to-‘noeviction’-Redis-will-start-to-reply-with-errors-to-commands" class="headerlink" title="set to ‘noeviction’, Redis will start to reply with errors to commands"></a>set to ‘noeviction’, Redis will start to reply with errors to commands</h1><h1 id="that-would-use-more-memory-like-SET-LPUSH-and-so-on-and-will-continue"><a href="#that-would-use-more-memory-like-SET-LPUSH-and-so-on-and-will-continue" class="headerlink" title="that would use more memory, like SET, LPUSH, and so on, and will continue"></a>that would use more memory, like SET, LPUSH, and so on, and will continue</h1><h1 id="to-reply-to-read-only-commands-like-GET"><a href="#to-reply-to-read-only-commands-like-GET" class="headerlink" title="to reply to read-only commands like GET."></a>to reply to read-only commands like GET.</h1><p>#</p><h1 id="This-option-is-usually-useful-when-using-Redis-as-an-LRU-cache-or-to-set"><a href="#This-option-is-usually-useful-when-using-Redis-as-an-LRU-cache-or-to-set" class="headerlink" title="This option is usually useful when using Redis as an LRU cache, or to set"></a>This option is usually useful when using Redis as an LRU cache, or to set</h1><h1 id="a-hard-memory-limit-for-an-instance-using-the-‘noeviction’-policy"><a href="#a-hard-memory-limit-for-an-instance-using-the-‘noeviction’-policy" class="headerlink" title="a hard memory limit for an instance (using the ‘noeviction’ policy)."></a>a hard memory limit for an instance (using the ‘noeviction’ policy).</h1><p>#</p><h1 id="WARNING-If-you-have-slaves-attached-to-an-instance-with-maxmemory-on"><a href="#WARNING-If-you-have-slaves-attached-to-an-instance-with-maxmemory-on" class="headerlink" title="WARNING: If you have slaves attached to an instance with maxmemory on,"></a>WARNING: If you have slaves attached to an instance with maxmemory on,</h1><h1 id="the-size-of-the-output-buffers-needed-to-feed-the-slaves-are-subtracted"><a href="#the-size-of-the-output-buffers-needed-to-feed-the-slaves-are-subtracted" class="headerlink" title="the size of the output buffers needed to feed the slaves are subtracted"></a>the size of the output buffers needed to feed the slaves are subtracted</h1><h1 id="from-the-used-memory-count-so-that-network-problems-resyncs-will"><a href="#from-the-used-memory-count-so-that-network-problems-resyncs-will" class="headerlink" title="from the used memory count, so that network problems / resyncs will"></a>from the used memory count, so that network problems / resyncs will</h1><h1 id="not-trigger-a-loop-where-keys-are-evicted-and-in-turn-the-output"><a href="#not-trigger-a-loop-where-keys-are-evicted-and-in-turn-the-output" class="headerlink" title="not trigger a loop where keys are evicted, and in turn the output"></a>not trigger a loop where keys are evicted, and in turn the output</h1><h1 id="buffer-of-slaves-is-full-with-DELs-of-keys-evicted-triggering-the-deletion"><a href="#buffer-of-slaves-is-full-with-DELs-of-keys-evicted-triggering-the-deletion" class="headerlink" title="buffer of slaves is full with DELs of keys evicted triggering the deletion"></a>buffer of slaves is full with DELs of keys evicted triggering the deletion</h1><h1 id="of-more-keys-and-so-forth-until-the-database-is-completely-emptied"><a href="#of-more-keys-and-so-forth-until-the-database-is-completely-emptied" class="headerlink" title="of more keys, and so forth until the database is completely emptied."></a>of more keys, and so forth until the database is completely emptied.</h1><p>#</p><h1 id="In-short…-if-you-have-slaves-attached-it-is-suggested-that-you-set-a-lower"><a href="#In-short…-if-you-have-slaves-attached-it-is-suggested-that-you-set-a-lower" class="headerlink" title="In short… if you have slaves attached it is suggested that you set a lower"></a>In short… if you have slaves attached it is suggested that you set a lower</h1><h1 id="limit-for-maxmemory-so-that-there-is-some-free-RAM-on-the-system-for-slave"><a href="#limit-for-maxmemory-so-that-there-is-some-free-RAM-on-the-system-for-slave" class="headerlink" title="limit for maxmemory so that there is some free RAM on the system for slave"></a>limit for maxmemory so that there is some free RAM on the system for slave</h1><h1 id="output-buffers-but-this-is-not-needed-if-the-policy-is-‘noeviction’"><a href="#output-buffers-but-this-is-not-needed-if-the-policy-is-‘noeviction’" class="headerlink" title="output buffers (but this is not needed if the policy is ‘noeviction’)."></a>output buffers (but this is not needed if the policy is ‘noeviction’).</h1><p>#</p><h1 id="maxmemory"><a href="#maxmemory" class="headerlink" title="maxmemory "></a>maxmemory<bytes></bytes></h1><h1 id="MAXMEMORY-POLICY-how-Redis-will-select-what-to-remove-when-maxmemory"><a href="#MAXMEMORY-POLICY-how-Redis-will-select-what-to-remove-when-maxmemory" class="headerlink" title="MAXMEMORY POLICY: how Redis will select what to remove when maxmemory"></a>MAXMEMORY POLICY: how Redis will select what to remove when maxmemory</h1><h1 id="is-reached-You-can-select-among-five-behaviors"><a href="#is-reached-You-can-select-among-five-behaviors" class="headerlink" title="is reached. You can select among five behaviors:"></a>is reached. You can select among five behaviors:</h1><p>#</p><h1 id="volatile-lru-gt-remove-the-key-with-an-expire-set-using-an-LRU-algorithm"><a href="#volatile-lru-gt-remove-the-key-with-an-expire-set-using-an-LRU-algorithm" class="headerlink" title="volatile-lru -&gt; remove the key with an expire set using an LRU algorithm"></a>volatile-lru -&gt; remove the key with an expire set using an LRU algorithm</h1><h1 id="allkeys-lru-gt-remove-any-key-according-to-the-LRU-algorithm"><a href="#allkeys-lru-gt-remove-any-key-according-to-the-LRU-algorithm" class="headerlink" title="allkeys-lru -&gt; remove any key according to the LRU algorithm"></a>allkeys-lru -&gt; remove any key according to the LRU algorithm</h1><h1 id="volatile-random-gt-remove-a-random-key-with-an-expire-set"><a href="#volatile-random-gt-remove-a-random-key-with-an-expire-set" class="headerlink" title="volatile-random -&gt; remove a random key with an expire set"></a>volatile-random -&gt; remove a random key with an expire set</h1><h1 id="allkeys-random-gt-remove-a-random-key-any-key"><a href="#allkeys-random-gt-remove-a-random-key-any-key" class="headerlink" title="allkeys-random -&gt; remove a random key, any key"></a>allkeys-random -&gt; remove a random key, any key</h1><h1 id="volatile-ttl-gt-remove-the-key-with-the-nearest-expire-time-minor-TTL"><a href="#volatile-ttl-gt-remove-the-key-with-the-nearest-expire-time-minor-TTL" class="headerlink" title="volatile-ttl -&gt; remove the key with the nearest expire time (minor TTL)"></a>volatile-ttl -&gt; remove the key with the nearest expire time (minor TTL)</h1><h1 id="noeviction-gt-don’t-expire-at-all-just-return-an-error-on-write-operations"><a href="#noeviction-gt-don’t-expire-at-all-just-return-an-error-on-write-operations" class="headerlink" title="noeviction -&gt; don’t expire at all, just return an error on write operations"></a>noeviction -&gt; don’t expire at all, just return an error on write operations</h1><p>#</p><h1 id="Note-with-any-of-the-above-policies-Redis-will-return-an-error-on-write"><a href="#Note-with-any-of-the-above-policies-Redis-will-return-an-error-on-write" class="headerlink" title="Note: with any of the above policies, Redis will return an error on write"></a>Note: with any of the above policies, Redis will return an error on write</h1><h1 id="operations-when-there-are-no-suitable-keys-for-eviction"><a href="#operations-when-there-are-no-suitable-keys-for-eviction" class="headerlink" title="operations, when there are no suitable keys for eviction."></a>operations, when there are no suitable keys for eviction.</h1><p>#</p><h1 id="At-the-date-of-writing-these-commands-are-set-setnx-setex-append"><a href="#At-the-date-of-writing-these-commands-are-set-setnx-setex-append" class="headerlink" title="At the date of writing these commands are: set setnx setex append"></a>At the date of writing these commands are: set setnx setex append</h1><h1 id="incr-decr-rpush-lpush-rpushx-lpushx-linsert-lset-rpoplpush-sadd"><a href="#incr-decr-rpush-lpush-rpushx-lpushx-linsert-lset-rpoplpush-sadd" class="headerlink" title="incr decr rpush lpush rpushx lpushx linsert lset rpoplpush sadd"></a>incr decr rpush lpush rpushx lpushx linsert lset rpoplpush sadd</h1><h1 id="sinter-sinterstore-sunion-sunionstore-sdiff-sdiffstore-zadd-zincrby"><a href="#sinter-sinterstore-sunion-sunionstore-sdiff-sdiffstore-zadd-zincrby" class="headerlink" title="sinter sinterstore sunion sunionstore sdiff sdiffstore zadd zincrby"></a>sinter sinterstore sunion sunionstore sdiff sdiffstore zadd zincrby</h1><h1 id="zunionstore-zinterstore-hset-hsetnx-hmset-hincrby-incrby-decrby"><a href="#zunionstore-zinterstore-hset-hsetnx-hmset-hincrby-incrby-decrby" class="headerlink" title="zunionstore zinterstore hset hsetnx hmset hincrby incrby decrby"></a>zunionstore zinterstore hset hsetnx hmset hincrby incrby decrby</h1><h1 id="getset-mset-msetnx-exec-sort"><a href="#getset-mset-msetnx-exec-sort" class="headerlink" title="getset mset msetnx exec sort"></a>getset mset msetnx exec sort</h1><p>#</p><h1 id="The-default-is"><a href="#The-default-is" class="headerlink" title="The default is:"></a>The default is:</h1><p>#</p><h1 id="maxmemory-policy-noeviction"><a href="#maxmemory-policy-noeviction" class="headerlink" title="maxmemory-policy noeviction"></a>maxmemory-policy noeviction</h1><h1 id="LRU-and-minimal-TTL-algorithms-are-not-precise-algorithms-but-approximated"><a href="#LRU-and-minimal-TTL-algorithms-are-not-precise-algorithms-but-approximated" class="headerlink" title="LRU and minimal TTL algorithms are not precise algorithms but approximated"></a>LRU and minimal TTL algorithms are not precise algorithms but approximated</h1><h1 id="algorithms-in-order-to-save-memory-so-you-can-tune-it-for-speed-or"><a href="#algorithms-in-order-to-save-memory-so-you-can-tune-it-for-speed-or" class="headerlink" title="algorithms (in order to save memory), so you can tune it for speed or"></a>algorithms (in order to save memory), so you can tune it for speed or</h1><h1 id="accuracy-For-default-Redis-will-check-five-keys-and-pick-the-one-that-was"><a href="#accuracy-For-default-Redis-will-check-five-keys-and-pick-the-one-that-was" class="headerlink" title="accuracy. For default Redis will check five keys and pick the one that was"></a>accuracy. For default Redis will check five keys and pick the one that was</h1><h1 id="used-less-recently-you-can-change-the-sample-size-using-the-following"><a href="#used-less-recently-you-can-change-the-sample-size-using-the-following" class="headerlink" title="used less recently, you can change the sample size using the following"></a>used less recently, you can change the sample size using the following</h1><h1 id="configuration-directive"><a href="#configuration-directive" class="headerlink" title="configuration directive."></a>configuration directive.</h1><p>#</p><h1 id="The-default-of-5-produces-good-enough-results-10-Approximates-very-closely"><a href="#The-default-of-5-produces-good-enough-results-10-Approximates-very-closely" class="headerlink" title="The default of 5 produces good enough results. 10 Approximates very closely"></a>The default of 5 produces good enough results. 10 Approximates very closely</h1><h1 id="true-LRU-but-costs-a-bit-more-CPU-3-is-very-fast-but-not-very-accurate"><a href="#true-LRU-but-costs-a-bit-more-CPU-3-is-very-fast-but-not-very-accurate" class="headerlink" title="true LRU but costs a bit more CPU. 3 is very fast but not very accurate."></a>true LRU but costs a bit more CPU. 3 is very fast but not very accurate.</h1><p>#</p><h1 id="maxmemory-samples-5"><a href="#maxmemory-samples-5" class="headerlink" title="maxmemory-samples 5"></a>maxmemory-samples 5</h1><p>############################## APPEND ONLY MODE ###############################</p><h1 id="By-default-Redis-asynchronously-dumps-the-dataset-on-disk-This-mode-is"><a href="#By-default-Redis-asynchronously-dumps-the-dataset-on-disk-This-mode-is" class="headerlink" title="By default Redis asynchronously dumps the dataset on disk. This mode is"></a>By default Redis asynchronously dumps the dataset on disk. This mode is</h1><h1 id="good-enough-in-many-applications-but-an-issue-with-the-Redis-process-or"><a href="#good-enough-in-many-applications-but-an-issue-with-the-Redis-process-or" class="headerlink" title="good enough in many applications, but an issue with the Redis process or"></a>good enough in many applications, but an issue with the Redis process or</h1><h1 id="a-power-outage-may-result-into-a-few-minutes-of-writes-lost-depending-on"><a href="#a-power-outage-may-result-into-a-few-minutes-of-writes-lost-depending-on" class="headerlink" title="a power outage may result into a few minutes of writes lost (depending on"></a>a power outage may result into a few minutes of writes lost (depending on</h1><h1 id="the-configured-save-points"><a href="#the-configured-save-points" class="headerlink" title="the configured save points)."></a>the configured save points).</h1><p>#</p><h1 id="The-Append-Only-File-is-an-alternative-persistence-mode-that-provides"><a href="#The-Append-Only-File-is-an-alternative-persistence-mode-that-provides" class="headerlink" title="The Append Only File is an alternative persistence mode that provides"></a>The Append Only File is an alternative persistence mode that provides</h1><h1 id="much-better-durability-For-instance-using-the-default-data-fsync-policy"><a href="#much-better-durability-For-instance-using-the-default-data-fsync-policy" class="headerlink" title="much better durability. For instance using the default data fsync policy"></a>much better durability. For instance using the default data fsync policy</h1><h1 id="see-later-in-the-config-file-Redis-can-lose-just-one-second-of-writes-in-a"><a href="#see-later-in-the-config-file-Redis-can-lose-just-one-second-of-writes-in-a" class="headerlink" title="(see later in the config file) Redis can lose just one second of writes in a"></a>(see later in the config file) Redis can lose just one second of writes in a</h1><h1 id="dramatic-event-like-a-server-power-outage-or-a-single-write-if-something"><a href="#dramatic-event-like-a-server-power-outage-or-a-single-write-if-something" class="headerlink" title="dramatic event like a server power outage, or a single write if something"></a>dramatic event like a server power outage, or a single write if something</h1><h1 id="wrong-with-the-Redis-process-itself-happens-but-the-operating-system-is"><a href="#wrong-with-the-Redis-process-itself-happens-but-the-operating-system-is" class="headerlink" title="wrong with the Redis process itself happens, but the operating system is"></a>wrong with the Redis process itself happens, but the operating system is</h1><h1 id="still-running-correctly"><a href="#still-running-correctly" class="headerlink" title="still running correctly."></a>still running correctly.</h1><p>#</p><h1 id="AOF-and-RDB-persistence-can-be-enabled-at-the-same-time-without-problems"><a href="#AOF-and-RDB-persistence-can-be-enabled-at-the-same-time-without-problems" class="headerlink" title="AOF and RDB persistence can be enabled at the same time without problems."></a>AOF and RDB persistence can be enabled at the same time without problems.</h1><h1 id="If-the-AOF-is-enabled-on-startup-Redis-will-load-the-AOF-that-is-the-file"><a href="#If-the-AOF-is-enabled-on-startup-Redis-will-load-the-AOF-that-is-the-file" class="headerlink" title="If the AOF is enabled on startup Redis will load the AOF, that is the file"></a>If the AOF is enabled on startup Redis will load the AOF, that is the file</h1><h1 id="with-the-better-durability-guarantees"><a href="#with-the-better-durability-guarantees" class="headerlink" title="with the better durability guarantees."></a>with the better durability guarantees.</h1><p>#</p><h1 id="Please-check-http-redis-io-topics-persistence-for-more-information"><a href="#Please-check-http-redis-io-topics-persistence-for-more-information" class="headerlink" title="Please check http://redis.io/topics/persistence for more information."></a>Please check <a href="http://redis.io/topics/persistence" target="_blank" rel="noopener">http://redis.io/topics/persistence</a> for more information.</h1><p>appendonly no</p><h1 id="The-name-of-the-append-only-file-default-“appendonly-aof”"><a href="#The-name-of-the-append-only-file-default-“appendonly-aof”" class="headerlink" title="The name of the append only file (default: “appendonly.aof”)"></a>The name of the append only file (default: “appendonly.aof”)</h1><p>appendfilename “appendonly.aof”</p><h1 id="The-fsync-call-tells-the-Operating-System-to-actually-write-data-on-disk"><a href="#The-fsync-call-tells-the-Operating-System-to-actually-write-data-on-disk" class="headerlink" title="The fsync() call tells the Operating System to actually write data on disk"></a>The fsync() call tells the Operating System to actually write data on disk</h1><h1 id="instead-of-waiting-for-more-data-in-the-output-buffer-Some-OS-will-really-flush"><a href="#instead-of-waiting-for-more-data-in-the-output-buffer-Some-OS-will-really-flush" class="headerlink" title="instead of waiting for more data in the output buffer. Some OS will really flush"></a>instead of waiting for more data in the output buffer. Some OS will really flush</h1><h1 id="data-on-disk-some-other-OS-will-just-try-to-do-it-ASAP"><a href="#data-on-disk-some-other-OS-will-just-try-to-do-it-ASAP" class="headerlink" title="data on disk, some other OS will just try to do it ASAP."></a>data on disk, some other OS will just try to do it ASAP.</h1><p>#</p><h1 id="Redis-supports-three-different-modes"><a href="#Redis-supports-three-different-modes" class="headerlink" title="Redis supports three different modes:"></a>Redis supports three different modes:</h1><p>#</p><h1 id="no-don’t-fsync-just-let-the-OS-flush-the-data-when-it-wants-Faster"><a href="#no-don’t-fsync-just-let-the-OS-flush-the-data-when-it-wants-Faster" class="headerlink" title="no: don’t fsync, just let the OS flush the data when it wants. Faster."></a>no: don’t fsync, just let the OS flush the data when it wants. Faster.</h1><h1 id="always-fsync-after-every-write-to-the-append-only-log-Slow-Safest"><a href="#always-fsync-after-every-write-to-the-append-only-log-Slow-Safest" class="headerlink" title="always: fsync after every write to the append only log. Slow, Safest."></a>always: fsync after every write to the append only log. Slow, Safest.</h1><h1 id="everysec-fsync-only-one-time-every-second-Compromise"><a href="#everysec-fsync-only-one-time-every-second-Compromise" class="headerlink" title="everysec: fsync only one time every second. Compromise."></a>everysec: fsync only one time every second. Compromise.</h1><p>#</p><h1 id="The-default-is-“everysec”-as-that’s-usually-the-right-compromise-between"><a href="#The-default-is-“everysec”-as-that’s-usually-the-right-compromise-between" class="headerlink" title="The default is “everysec”, as that’s usually the right compromise between"></a>The default is “everysec”, as that’s usually the right compromise between</h1><h1 id="speed-and-data-safety-It’s-up-to-you-to-understand-if-you-can-relax-this-to"><a href="#speed-and-data-safety-It’s-up-to-you-to-understand-if-you-can-relax-this-to" class="headerlink" title="speed and data safety. It’s up to you to understand if you can relax this to"></a>speed and data safety. It’s up to you to understand if you can relax this to</h1><h1 id="“no”-that-will-let-the-operating-system-flush-the-output-buffer-when"><a href="#“no”-that-will-let-the-operating-system-flush-the-output-buffer-when" class="headerlink" title="“no” that will let the operating system flush the output buffer when"></a>“no” that will let the operating system flush the output buffer when</h1><h1 id="it-wants-for-better-performances-but-if-you-can-live-with-the-idea-of"><a href="#it-wants-for-better-performances-but-if-you-can-live-with-the-idea-of" class="headerlink" title="it wants, for better performances (but if you can live with the idea of"></a>it wants, for better performances (but if you can live with the idea of</h1><h1 id="some-data-loss-consider-the-default-persistence-mode-that’s-snapshotting"><a href="#some-data-loss-consider-the-default-persistence-mode-that’s-snapshotting" class="headerlink" title="some data loss consider the default persistence mode that’s snapshotting),"></a>some data loss consider the default persistence mode that’s snapshotting),</h1><h1 id="or-on-the-contrary-use-“always”-that’s-very-slow-but-a-bit-safer-than"><a href="#or-on-the-contrary-use-“always”-that’s-very-slow-but-a-bit-safer-than" class="headerlink" title="or on the contrary, use “always” that’s very slow but a bit safer than"></a>or on the contrary, use “always” that’s very slow but a bit safer than</h1><h1 id="everysec"><a href="#everysec" class="headerlink" title="everysec."></a>everysec.</h1><p>#</p><h1 id="More-details-please-check-the-following-article"><a href="#More-details-please-check-the-following-article" class="headerlink" title="More details please check the following article:"></a>More details please check the following article:</h1><h1 id="http-antirez-com-post-redis-persistence-demystified-html"><a href="#http-antirez-com-post-redis-persistence-demystified-html" class="headerlink" title="http://antirez.com/post/redis-persistence-demystified.html"></a><a href="http://antirez.com/post/redis-persistence-demystified.html" target="_blank" rel="noopener">http://antirez.com/post/redis-persistence-demystified.html</a></h1><p>#</p><h1 id="If-unsure-use-“everysec”"><a href="#If-unsure-use-“everysec”" class="headerlink" title="If unsure, use “everysec”."></a>If unsure, use “everysec”.</h1><h1 id="appendfsync-always"><a href="#appendfsync-always" class="headerlink" title="appendfsync always"></a>appendfsync always</h1><p>appendfsync everysec</p><h1 id="appendfsync-no"><a href="#appendfsync-no" class="headerlink" title="appendfsync no"></a>appendfsync no</h1><h1 id="When-the-AOF-fsync-policy-is-set-to-always-or-everysec-and-a-background"><a href="#When-the-AOF-fsync-policy-is-set-to-always-or-everysec-and-a-background" class="headerlink" title="When the AOF fsync policy is set to always or everysec, and a background"></a>When the AOF fsync policy is set to always or everysec, and a background</h1><h1 id="saving-process-a-background-save-or-AOF-log-background-rewriting-is"><a href="#saving-process-a-background-save-or-AOF-log-background-rewriting-is" class="headerlink" title="saving process (a background save or AOF log background rewriting) is"></a>saving process (a background save or AOF log background rewriting) is</h1><h1 id="performing-a-lot-of-I-O-against-the-disk-in-some-Linux-configurations"><a href="#performing-a-lot-of-I-O-against-the-disk-in-some-Linux-configurations" class="headerlink" title="performing a lot of I/O against the disk, in some Linux configurations"></a>performing a lot of I/O against the disk, in some Linux configurations</h1><h1 id="Redis-may-block-too-long-on-the-fsync-call-Note-that-there-is-no-fix-for"><a href="#Redis-may-block-too-long-on-the-fsync-call-Note-that-there-is-no-fix-for" class="headerlink" title="Redis may block too long on the fsync() call. Note that there is no fix for"></a>Redis may block too long on the fsync() call. Note that there is no fix for</h1><h1 id="this-currently-as-even-performing-fsync-in-a-different-thread-will-block"><a href="#this-currently-as-even-performing-fsync-in-a-different-thread-will-block" class="headerlink" title="this currently, as even performing fsync in a different thread will block"></a>this currently, as even performing fsync in a different thread will block</h1><h1 id="our-synchronous-write-2-call"><a href="#our-synchronous-write-2-call" class="headerlink" title="our synchronous write(2) call."></a>our synchronous write(2) call.</h1><p>#</p><h1 id="In-order-to-mitigate-this-problem-it’s-possible-to-use-the-following-option"><a href="#In-order-to-mitigate-this-problem-it’s-possible-to-use-the-following-option" class="headerlink" title="In order to mitigate this problem it’s possible to use the following option"></a>In order to mitigate this problem it’s possible to use the following option</h1><h1 id="that-will-prevent-fsync-from-being-called-in-the-main-process-while-a"><a href="#that-will-prevent-fsync-from-being-called-in-the-main-process-while-a" class="headerlink" title="that will prevent fsync() from being called in the main process while a"></a>that will prevent fsync() from being called in the main process while a</h1><h1 id="BGSAVE-or-BGREWRITEAOF-is-in-progress"><a href="#BGSAVE-or-BGREWRITEAOF-is-in-progress" class="headerlink" title="BGSAVE or BGREWRITEAOF is in progress."></a>BGSAVE or BGREWRITEAOF is in progress.</h1><p>#</p><h1 id="This-means-that-while-another-child-is-saving-the-durability-of-Redis-is"><a href="#This-means-that-while-another-child-is-saving-the-durability-of-Redis-is" class="headerlink" title="This means that while another child is saving, the durability of Redis is"></a>This means that while another child is saving, the durability of Redis is</h1><h1 id="the-same-as-“appendfsync-none”-In-practical-terms-this-means-that-it-is"><a href="#the-same-as-“appendfsync-none”-In-practical-terms-this-means-that-it-is" class="headerlink" title="the same as “appendfsync none”. In practical terms, this means that it is"></a>the same as “appendfsync none”. In practical terms, this means that it is</h1><h1 id="possible-to-lose-up-to-30-seconds-of-log-in-the-worst-scenario-with-the"><a href="#possible-to-lose-up-to-30-seconds-of-log-in-the-worst-scenario-with-the" class="headerlink" title="possible to lose up to 30 seconds of log in the worst scenario (with the"></a>possible to lose up to 30 seconds of log in the worst scenario (with the</h1><h1 id="default-Linux-settings"><a href="#default-Linux-settings" class="headerlink" title="default Linux settings)."></a>default Linux settings).</h1><p>#</p><h1 id="If-you-have-latency-problems-turn-this-to-“yes”-Otherwise-leave-it-as"><a href="#If-you-have-latency-problems-turn-this-to-“yes”-Otherwise-leave-it-as" class="headerlink" title="If you have latency problems turn this to “yes”. Otherwise leave it as"></a>If you have latency problems turn this to “yes”. Otherwise leave it as</h1><h1 id="“no”-that-is-the-safest-pick-from-the-point-of-view-of-durability"><a href="#“no”-that-is-the-safest-pick-from-the-point-of-view-of-durability" class="headerlink" title="“no” that is the safest pick from the point of view of durability."></a>“no” that is the safest pick from the point of view of durability.</h1><p>no-appendfsync-on-rewrite no</p><h1 id="Automatic-rewrite-of-the-append-only-file"><a href="#Automatic-rewrite-of-the-append-only-file" class="headerlink" title="Automatic rewrite of the append only file."></a>Automatic rewrite of the append only file.</h1><h1 id="Redis-is-able-to-automatically-rewrite-the-log-file-implicitly-calling"><a href="#Redis-is-able-to-automatically-rewrite-the-log-file-implicitly-calling" class="headerlink" title="Redis is able to automatically rewrite the log file implicitly calling"></a>Redis is able to automatically rewrite the log file implicitly calling</h1><h1 id="BGREWRITEAOF-when-the-AOF-log-size-grows-by-the-specified-percentage"><a href="#BGREWRITEAOF-when-the-AOF-log-size-grows-by-the-specified-percentage" class="headerlink" title="BGREWRITEAOF when the AOF log size grows by the specified percentage."></a>BGREWRITEAOF when the AOF log size grows by the specified percentage.</h1><p>#</p><h1 id="This-is-how-it-works-Redis-remembers-the-size-of-the-AOF-file-after-the"><a href="#This-is-how-it-works-Redis-remembers-the-size-of-the-AOF-file-after-the" class="headerlink" title="This is how it works: Redis remembers the size of the AOF file after the"></a>This is how it works: Redis remembers the size of the AOF file after the</h1><h1 id="latest-rewrite-if-no-rewrite-has-happened-since-the-restart-the-size-of"><a href="#latest-rewrite-if-no-rewrite-has-happened-since-the-restart-the-size-of" class="headerlink" title="latest rewrite (if no rewrite has happened since the restart, the size of"></a>latest rewrite (if no rewrite has happened since the restart, the size of</h1><h1 id="the-AOF-at-startup-is-used"><a href="#the-AOF-at-startup-is-used" class="headerlink" title="the AOF at startup is used)."></a>the AOF at startup is used).</h1><p>#</p><h1 id="This-base-size-is-compared-to-the-current-size-If-the-current-size-is"><a href="#This-base-size-is-compared-to-the-current-size-If-the-current-size-is" class="headerlink" title="This base size is compared to the current size. If the current size is"></a>This base size is compared to the current size. If the current size is</h1><h1 id="bigger-than-the-specified-percentage-the-rewrite-is-triggered-Also"><a href="#bigger-than-the-specified-percentage-the-rewrite-is-triggered-Also" class="headerlink" title="bigger than the specified percentage, the rewrite is triggered. Also"></a>bigger than the specified percentage, the rewrite is triggered. Also</h1><h1 id="you-need-to-specify-a-minimal-size-for-the-AOF-file-to-be-rewritten-this"><a href="#you-need-to-specify-a-minimal-size-for-the-AOF-file-to-be-rewritten-this" class="headerlink" title="you need to specify a minimal size for the AOF file to be rewritten, this"></a>you need to specify a minimal size for the AOF file to be rewritten, this</h1><h1 id="is-useful-to-avoid-rewriting-the-AOF-file-even-if-the-percentage-increase"><a href="#is-useful-to-avoid-rewriting-the-AOF-file-even-if-the-percentage-increase" class="headerlink" title="is useful to avoid rewriting the AOF file even if the percentage increase"></a>is useful to avoid rewriting the AOF file even if the percentage increase</h1><h1 id="is-reached-but-it-is-still-pretty-small"><a href="#is-reached-but-it-is-still-pretty-small" class="headerlink" title="is reached but it is still pretty small."></a>is reached but it is still pretty small.</h1><p>#</p><h1 id="Specify-a-percentage-of-zero-in-order-to-disable-the-automatic-AOF"><a href="#Specify-a-percentage-of-zero-in-order-to-disable-the-automatic-AOF" class="headerlink" title="Specify a percentage of zero in order to disable the automatic AOF"></a>Specify a percentage of zero in order to disable the automatic AOF</h1><h1 id="rewrite-feature"><a href="#rewrite-feature" class="headerlink" title="rewrite feature."></a>rewrite feature.</h1><p>auto-aof-rewrite-percentage 100<br>auto-aof-rewrite-min-size 64mb</p><h1 id="An-AOF-file-may-be-found-to-be-truncated-at-the-end-during-the-Redis"><a href="#An-AOF-file-may-be-found-to-be-truncated-at-the-end-during-the-Redis" class="headerlink" title="An AOF file may be found to be truncated at the end during the Redis"></a>An AOF file may be found to be truncated at the end during the Redis</h1><h1 id="startup-process-when-the-AOF-data-gets-loaded-back-into-memory"><a href="#startup-process-when-the-AOF-data-gets-loaded-back-into-memory" class="headerlink" title="startup process, when the AOF data gets loaded back into memory."></a>startup process, when the AOF data gets loaded back into memory.</h1><h1 id="This-may-happen-when-the-system-where-Redis-is-running"><a href="#This-may-happen-when-the-system-where-Redis-is-running" class="headerlink" title="This may happen when the system where Redis is running"></a>This may happen when the system where Redis is running</h1><h1 id="crashes-especially-when-an-ext4-filesystem-is-mounted-without-the"><a href="#crashes-especially-when-an-ext4-filesystem-is-mounted-without-the" class="headerlink" title="crashes, especially when an ext4 filesystem is mounted without the"></a>crashes, especially when an ext4 filesystem is mounted without the</h1><h1 id="data-ordered-option-however-this-can’t-happen-when-Redis-itself"><a href="#data-ordered-option-however-this-can’t-happen-when-Redis-itself" class="headerlink" title="data=ordered option (however this can’t happen when Redis itself"></a>data=ordered option (however this can’t happen when Redis itself</h1><h1 id="crashes-or-aborts-but-the-operating-system-still-works-correctly"><a href="#crashes-or-aborts-but-the-operating-system-still-works-correctly" class="headerlink" title="crashes or aborts but the operating system still works correctly)."></a>crashes or aborts but the operating system still works correctly).</h1><p>#</p><h1 id="Redis-can-either-exit-with-an-error-when-this-happens-or-load-as-much"><a href="#Redis-can-either-exit-with-an-error-when-this-happens-or-load-as-much" class="headerlink" title="Redis can either exit with an error when this happens, or load as much"></a>Redis can either exit with an error when this happens, or load as much</h1><h1 id="data-as-possible-the-default-now-and-start-if-the-AOF-file-is-found"><a href="#data-as-possible-the-default-now-and-start-if-the-AOF-file-is-found" class="headerlink" title="data as possible (the default now) and start if the AOF file is found"></a>data as possible (the default now) and start if the AOF file is found</h1><h1 id="to-be-truncated-at-the-end-The-following-option-controls-this-behavior"><a href="#to-be-truncated-at-the-end-The-following-option-controls-this-behavior" class="headerlink" title="to be truncated at the end. The following option controls this behavior."></a>to be truncated at the end. The following option controls this behavior.</h1><p>#</p><h1 id="If-aof-load-truncated-is-set-to-yes-a-truncated-AOF-file-is-loaded-and"><a href="#If-aof-load-truncated-is-set-to-yes-a-truncated-AOF-file-is-loaded-and" class="headerlink" title="If aof-load-truncated is set to yes, a truncated AOF file is loaded and"></a>If aof-load-truncated is set to yes, a truncated AOF file is loaded and</h1><h1 id="the-Redis-server-starts-emitting-a-log-to-inform-the-user-of-the-event"><a href="#the-Redis-server-starts-emitting-a-log-to-inform-the-user-of-the-event" class="headerlink" title="the Redis server starts emitting a log to inform the user of the event."></a>the Redis server starts emitting a log to inform the user of the event.</h1><h1 id="Otherwise-if-the-option-is-set-to-no-the-server-aborts-with-an-error"><a href="#Otherwise-if-the-option-is-set-to-no-the-server-aborts-with-an-error" class="headerlink" title="Otherwise if the option is set to no, the server aborts with an error"></a>Otherwise if the option is set to no, the server aborts with an error</h1><h1 id="and-refuses-to-start-When-the-option-is-set-to-no-the-user-requires"><a href="#and-refuses-to-start-When-the-option-is-set-to-no-the-user-requires" class="headerlink" title="and refuses to start. When the option is set to no, the user requires"></a>and refuses to start. When the option is set to no, the user requires</h1><h1 id="to-fix-the-AOF-file-using-the-“redis-check-aof”-utility-before-to-restart"><a href="#to-fix-the-AOF-file-using-the-“redis-check-aof”-utility-before-to-restart" class="headerlink" title="to fix the AOF file using the “redis-check-aof” utility before to restart"></a>to fix the AOF file using the “redis-check-aof” utility before to restart</h1><h1 id="the-server"><a href="#the-server" class="headerlink" title="the server."></a>the server.</h1><p>#</p><h1 id="Note-that-if-the-AOF-file-will-be-found-to-be-corrupted-in-the-middle"><a href="#Note-that-if-the-AOF-file-will-be-found-to-be-corrupted-in-the-middle" class="headerlink" title="Note that if the AOF file will be found to be corrupted in the middle"></a>Note that if the AOF file will be found to be corrupted in the middle</h1><h1 id="the-server-will-still-exit-with-an-error-This-option-only-applies-when"><a href="#the-server-will-still-exit-with-an-error-This-option-only-applies-when" class="headerlink" title="the server will still exit with an error. This option only applies when"></a>the server will still exit with an error. This option only applies when</h1><h1 id="Redis-will-try-to-read-more-data-from-the-AOF-file-but-not-enough-bytes"><a href="#Redis-will-try-to-read-more-data-from-the-AOF-file-but-not-enough-bytes" class="headerlink" title="Redis will try to read more data from the AOF file but not enough bytes"></a>Redis will try to read more data from the AOF file but not enough bytes</h1><h1 id="will-be-found"><a href="#will-be-found" class="headerlink" title="will be found."></a>will be found.</h1><p>aof-load-truncated yes</p><p>################################ LUA SCRIPTING ###############################</p><h1 id="Max-execution-time-of-a-Lua-script-in-milliseconds"><a href="#Max-execution-time-of-a-Lua-script-in-milliseconds" class="headerlink" title="Max execution time of a Lua script in milliseconds."></a>Max execution time of a Lua script in milliseconds.</h1><p>#</p><h1 id="If-the-maximum-execution-time-is-reached-Redis-will-log-that-a-script-is"><a href="#If-the-maximum-execution-time-is-reached-Redis-will-log-that-a-script-is" class="headerlink" title="If the maximum execution time is reached Redis will log that a script is"></a>If the maximum execution time is reached Redis will log that a script is</h1><h1 id="still-in-execution-after-the-maximum-allowed-time-and-will-start-to"><a href="#still-in-execution-after-the-maximum-allowed-time-and-will-start-to" class="headerlink" title="still in execution after the maximum allowed time and will start to"></a>still in execution after the maximum allowed time and will start to</h1><h1 id="reply-to-queries-with-an-error"><a href="#reply-to-queries-with-an-error" class="headerlink" title="reply to queries with an error."></a>reply to queries with an error.</h1><p>#</p><h1 id="When-a-long-running-script-exceeds-the-maximum-execution-time-only-the"><a href="#When-a-long-running-script-exceeds-the-maximum-execution-time-only-the" class="headerlink" title="When a long running script exceeds the maximum execution time only the"></a>When a long running script exceeds the maximum execution time only the</h1><h1 id="SCRIPT-KILL-and-SHUTDOWN-NOSAVE-commands-are-available-The-first-can-be"><a href="#SCRIPT-KILL-and-SHUTDOWN-NOSAVE-commands-are-available-The-first-can-be" class="headerlink" title="SCRIPT KILL and SHUTDOWN NOSAVE commands are available. The first can be"></a>SCRIPT KILL and SHUTDOWN NOSAVE commands are available. The first can be</h1><h1 id="used-to-stop-a-script-that-did-not-yet-called-write-commands-The-second"><a href="#used-to-stop-a-script-that-did-not-yet-called-write-commands-The-second" class="headerlink" title="used to stop a script that did not yet called write commands. The second"></a>used to stop a script that did not yet called write commands. The second</h1><h1 id="is-the-only-way-to-shut-down-the-server-in-the-case-a-write-command-was"><a href="#is-the-only-way-to-shut-down-the-server-in-the-case-a-write-command-was" class="headerlink" title="is the only way to shut down the server in the case a write command was"></a>is the only way to shut down the server in the case a write command was</h1><h1 id="already-issued-by-the-script-but-the-user-doesn’t-want-to-wait-for-the-natural"><a href="#already-issued-by-the-script-but-the-user-doesn’t-want-to-wait-for-the-natural" class="headerlink" title="already issued by the script but the user doesn’t want to wait for the natural"></a>already issued by the script but the user doesn’t want to wait for the natural</h1><h1 id="termination-of-the-script"><a href="#termination-of-the-script" class="headerlink" title="termination of the script."></a>termination of the script.</h1><p>#</p><h1 id="Set-it-to-0-or-a-negative-value-for-unlimited-execution-without-warnings"><a href="#Set-it-to-0-or-a-negative-value-for-unlimited-execution-without-warnings" class="headerlink" title="Set it to 0 or a negative value for unlimited execution without warnings."></a>Set it to 0 or a negative value for unlimited execution without warnings.</h1><p>lua-time-limit 5000</p><p>################################ REDIS CLUSTER ###############################<br>#</p><h1 id="-1"><a href="#-1" class="headerlink" title="++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++"></a>++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++</h1><h1 id="WARNING-EXPERIMENTAL-Redis-Cluster-is-considered-to-be-stable-code-however"><a href="#WARNING-EXPERIMENTAL-Redis-Cluster-is-considered-to-be-stable-code-however" class="headerlink" title="WARNING EXPERIMENTAL: Redis Cluster is considered to be stable code, however"></a>WARNING EXPERIMENTAL: Redis Cluster is considered to be stable code, however</h1><h1 id="in-order-to-mark-it-as-“mature”-we-need-to-wait-for-a-non-trivial-percentage"><a href="#in-order-to-mark-it-as-“mature”-we-need-to-wait-for-a-non-trivial-percentage" class="headerlink" title="in order to mark it as “mature” we need to wait for a non trivial percentage"></a>in order to mark it as “mature” we need to wait for a non trivial percentage</h1><h1 id="of-users-to-deploy-it-in-production"><a href="#of-users-to-deploy-it-in-production" class="headerlink" title="of users to deploy it in production."></a>of users to deploy it in production.</h1><h1 id="-2"><a href="#-2" class="headerlink" title="++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++"></a>++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++</h1><p>#</p><h1 id="Normal-Redis-instances-can’t-be-part-of-a-Redis-Cluster-only-nodes-that-are"><a href="#Normal-Redis-instances-can’t-be-part-of-a-Redis-Cluster-only-nodes-that-are" class="headerlink" title="Normal Redis instances can’t be part of a Redis Cluster; only nodes that are"></a>Normal Redis instances can’t be part of a Redis Cluster; only nodes that are</h1><h1 id="started-as-cluster-nodes-can-In-order-to-start-a-Redis-instance-as-a"><a href="#started-as-cluster-nodes-can-In-order-to-start-a-Redis-instance-as-a" class="headerlink" title="started as cluster nodes can. In order to start a Redis instance as a"></a>started as cluster nodes can. In order to start a Redis instance as a</h1><h1 id="cluster-node-enable-the-cluster-support-uncommenting-the-following"><a href="#cluster-node-enable-the-cluster-support-uncommenting-the-following" class="headerlink" title="cluster node enable the cluster support uncommenting the following:"></a>cluster node enable the cluster support uncommenting the following:</h1><p>#</p><h1 id="cluster-enabled-yes"><a href="#cluster-enabled-yes" class="headerlink" title="cluster-enabled yes"></a>cluster-enabled yes</h1><h1 id="Every-cluster-node-has-a-cluster-configuration-file-This-file-is-not"><a href="#Every-cluster-node-has-a-cluster-configuration-file-This-file-is-not" class="headerlink" title="Every cluster node has a cluster configuration file. This file is not"></a>Every cluster node has a cluster configuration file. This file is not</h1><h1 id="intended-to-be-edited-by-hand-It-is-created-and-updated-by-Redis-nodes"><a href="#intended-to-be-edited-by-hand-It-is-created-and-updated-by-Redis-nodes" class="headerlink" title="intended to be edited by hand. It is created and updated by Redis nodes."></a>intended to be edited by hand. It is created and updated by Redis nodes.</h1><h1 id="Every-Redis-Cluster-node-requires-a-different-cluster-configuration-file"><a href="#Every-Redis-Cluster-node-requires-a-different-cluster-configuration-file" class="headerlink" title="Every Redis Cluster node requires a different cluster configuration file."></a>Every Redis Cluster node requires a different cluster configuration file.</h1><h1 id="Make-sure-that-instances-running-in-the-same-system-do-not-have"><a href="#Make-sure-that-instances-running-in-the-same-system-do-not-have" class="headerlink" title="Make sure that instances running in the same system do not have"></a>Make sure that instances running in the same system do not have</h1><h1 id="overlapping-cluster-configuration-file-names"><a href="#overlapping-cluster-configuration-file-names" class="headerlink" title="overlapping cluster configuration file names."></a>overlapping cluster configuration file names.</h1><p>#</p><h1 id="cluster-config-file-nodes-6379-conf"><a href="#cluster-config-file-nodes-6379-conf" class="headerlink" title="cluster-config-file nodes-6379.conf"></a>cluster-config-file nodes-6379.conf</h1><h1 id="Cluster-node-timeout-is-the-amount-of-milliseconds-a-node-must-be-unreachable"><a href="#Cluster-node-timeout-is-the-amount-of-milliseconds-a-node-must-be-unreachable" class="headerlink" title="Cluster node timeout is the amount of milliseconds a node must be unreachable"></a>Cluster node timeout is the amount of milliseconds a node must be unreachable</h1><h1 id="for-it-to-be-considered-in-failure-state"><a href="#for-it-to-be-considered-in-failure-state" class="headerlink" title="for it to be considered in failure state."></a>for it to be considered in failure state.</h1><h1 id="Most-other-internal-time-limits-are-multiple-of-the-node-timeout"><a href="#Most-other-internal-time-limits-are-multiple-of-the-node-timeout" class="headerlink" title="Most other internal time limits are multiple of the node timeout."></a>Most other internal time limits are multiple of the node timeout.</h1><p>#</p><h1 id="cluster-node-timeout-15000"><a href="#cluster-node-timeout-15000" class="headerlink" title="cluster-node-timeout 15000"></a>cluster-node-timeout 15000</h1><h1 id="A-slave-of-a-failing-master-will-avoid-to-start-a-failover-if-its-data"><a href="#A-slave-of-a-failing-master-will-avoid-to-start-a-failover-if-its-data" class="headerlink" title="A slave of a failing master will avoid to start a failover if its data"></a>A slave of a failing master will avoid to start a failover if its data</h1><h1 id="looks-too-old"><a href="#looks-too-old" class="headerlink" title="looks too old."></a>looks too old.</h1><p>#</p><h1 id="There-is-no-simple-way-for-a-slave-to-actually-have-a-exact-measure-of"><a href="#There-is-no-simple-way-for-a-slave-to-actually-have-a-exact-measure-of" class="headerlink" title="There is no simple way for a slave to actually have a exact measure of"></a>There is no simple way for a slave to actually have a exact measure of</h1><h1 id="its-“data-age”-so-the-following-two-checks-are-performed"><a href="#its-“data-age”-so-the-following-two-checks-are-performed" class="headerlink" title="its “data age”, so the following two checks are performed:"></a>its “data age”, so the following two checks are performed:</h1><p>#</p><h1 id="1-If-there-are-multiple-slaves-able-to-failover-they-exchange-messages"><a href="#1-If-there-are-multiple-slaves-able-to-failover-they-exchange-messages" class="headerlink" title="1) If there are multiple slaves able to failover, they exchange messages"></a>1) If there are multiple slaves able to failover, they exchange messages</h1><h1 id="in-order-to-try-to-give-an-advantage-to-the-slave-with-the-best"><a href="#in-order-to-try-to-give-an-advantage-to-the-slave-with-the-best" class="headerlink" title="in order to try to give an advantage to the slave with the best"></a>in order to try to give an advantage to the slave with the best</h1><h1 id="replication-offset-more-data-from-the-master-processed"><a href="#replication-offset-more-data-from-the-master-processed" class="headerlink" title="replication offset (more data from the master processed)."></a>replication offset (more data from the master processed).</h1><h1 id="Slaves-will-try-to-get-their-rank-by-offset-and-apply-to-the-start"><a href="#Slaves-will-try-to-get-their-rank-by-offset-and-apply-to-the-start" class="headerlink" title="Slaves will try to get their rank by offset, and apply to the start"></a>Slaves will try to get their rank by offset, and apply to the start</h1><h1 id="of-the-failover-a-delay-proportional-to-their-rank"><a href="#of-the-failover-a-delay-proportional-to-their-rank" class="headerlink" title="of the failover a delay proportional to their rank."></a>of the failover a delay proportional to their rank.</h1><p>#</p><h1 id="2-Every-single-slave-computes-the-time-of-the-last-interaction-with"><a href="#2-Every-single-slave-computes-the-time-of-the-last-interaction-with" class="headerlink" title="2) Every single slave computes the time of the last interaction with"></a>2) Every single slave computes the time of the last interaction with</h1><h1 id="its-master-This-can-be-the-last-ping-or-command-received-if-the-master"><a href="#its-master-This-can-be-the-last-ping-or-command-received-if-the-master" class="headerlink" title="its master. This can be the last ping or command received (if the master"></a>its master. This can be the last ping or command received (if the master</h1><h1 id="is-still-in-the-“connected”-state-or-the-time-that-elapsed-since-the"><a href="#is-still-in-the-“connected”-state-or-the-time-that-elapsed-since-the" class="headerlink" title="is still in the “connected” state), or the time that elapsed since the"></a>is still in the “connected” state), or the time that elapsed since the</h1><h1 id="disconnection-with-the-master-if-the-replication-link-is-currently-down"><a href="#disconnection-with-the-master-if-the-replication-link-is-currently-down" class="headerlink" title="disconnection with the master (if the replication link is currently down)."></a>disconnection with the master (if the replication link is currently down).</h1><h1 id="If-the-last-interaction-is-too-old-the-slave-will-not-try-to-failover"><a href="#If-the-last-interaction-is-too-old-the-slave-will-not-try-to-failover" class="headerlink" title="If the last interaction is too old, the slave will not try to failover"></a>If the last interaction is too old, the slave will not try to failover</h1><h1 id="at-all"><a href="#at-all" class="headerlink" title="at all."></a>at all.</h1><p>#</p><h1 id="The-point-“2”-can-be-tuned-by-user-Specifically-a-slave-will-not-perform"><a href="#The-point-“2”-can-be-tuned-by-user-Specifically-a-slave-will-not-perform" class="headerlink" title="The point “2” can be tuned by user. Specifically a slave will not perform"></a>The point “2” can be tuned by user. Specifically a slave will not perform</h1><h1 id="the-failover-if-since-the-last-interaction-with-the-master-the-time"><a href="#the-failover-if-since-the-last-interaction-with-the-master-the-time" class="headerlink" title="the failover if, since the last interaction with the master, the time"></a>the failover if, since the last interaction with the master, the time</h1><h1 id="elapsed-is-greater-than"><a href="#elapsed-is-greater-than" class="headerlink" title="elapsed is greater than:"></a>elapsed is greater than:</h1><p>#</p><h1 id="node-timeout-slave-validity-factor-repl-ping-slave-period"><a href="#node-timeout-slave-validity-factor-repl-ping-slave-period" class="headerlink" title="(node-timeout * slave-validity-factor) + repl-ping-slave-period"></a>(node-timeout * slave-validity-factor) + repl-ping-slave-period</h1><p>#</p><h1 id="So-for-example-if-node-timeout-is-30-seconds-and-the-slave-validity-factor"><a href="#So-for-example-if-node-timeout-is-30-seconds-and-the-slave-validity-factor" class="headerlink" title="So for example if node-timeout is 30 seconds, and the slave-validity-factor"></a>So for example if node-timeout is 30 seconds, and the slave-validity-factor</h1><h1 id="is-10-and-assuming-a-default-repl-ping-slave-period-of-10-seconds-the"><a href="#is-10-and-assuming-a-default-repl-ping-slave-period-of-10-seconds-the" class="headerlink" title="is 10, and assuming a default repl-ping-slave-period of 10 seconds, the"></a>is 10, and assuming a default repl-ping-slave-period of 10 seconds, the</h1><h1 id="slave-will-not-try-to-failover-if-it-was-not-able-to-talk-with-the-master"><a href="#slave-will-not-try-to-failover-if-it-was-not-able-to-talk-with-the-master" class="headerlink" title="slave will not try to failover if it was not able to talk with the master"></a>slave will not try to failover if it was not able to talk with the master</h1><h1 id="for-longer-than-310-seconds"><a href="#for-longer-than-310-seconds" class="headerlink" title="for longer than 310 seconds."></a>for longer than 310 seconds.</h1><p>#</p><h1 id="A-large-slave-validity-factor-may-allow-slaves-with-too-old-data-to-failover"><a href="#A-large-slave-validity-factor-may-allow-slaves-with-too-old-data-to-failover" class="headerlink" title="A large slave-validity-factor may allow slaves with too old data to failover"></a>A large slave-validity-factor may allow slaves with too old data to failover</h1><h1 id="a-master-while-a-too-small-value-may-prevent-the-cluster-from-being-able-to"><a href="#a-master-while-a-too-small-value-may-prevent-the-cluster-from-being-able-to" class="headerlink" title="a master, while a too small value may prevent the cluster from being able to"></a>a master, while a too small value may prevent the cluster from being able to</h1><h1 id="elect-a-slave-at-all"><a href="#elect-a-slave-at-all" class="headerlink" title="elect a slave at all."></a>elect a slave at all.</h1><p>#</p><h1 id="For-maximum-availability-it-is-possible-to-set-the-slave-validity-factor"><a href="#For-maximum-availability-it-is-possible-to-set-the-slave-validity-factor" class="headerlink" title="For maximum availability, it is possible to set the slave-validity-factor"></a>For maximum availability, it is possible to set the slave-validity-factor</h1><h1 id="to-a-value-of-0-which-means-that-slaves-will-always-try-to-failover-the"><a href="#to-a-value-of-0-which-means-that-slaves-will-always-try-to-failover-the" class="headerlink" title="to a value of 0, which means, that slaves will always try to failover the"></a>to a value of 0, which means, that slaves will always try to failover the</h1><h1 id="master-regardless-of-the-last-time-they-interacted-with-the-master"><a href="#master-regardless-of-the-last-time-they-interacted-with-the-master" class="headerlink" title="master regardless of the last time they interacted with the master."></a>master regardless of the last time they interacted with the master.</h1><h1 id="However-they’ll-always-try-to-apply-a-delay-proportional-to-their"><a href="#However-they’ll-always-try-to-apply-a-delay-proportional-to-their" class="headerlink" title="(However they’ll always try to apply a delay proportional to their"></a>(However they’ll always try to apply a delay proportional to their</h1><h1 id="offset-rank"><a href="#offset-rank" class="headerlink" title="offset rank)."></a>offset rank).</h1><p>#</p><h1 id="Zero-is-the-only-value-able-to-guarantee-that-when-all-the-partitions-heal"><a href="#Zero-is-the-only-value-able-to-guarantee-that-when-all-the-partitions-heal" class="headerlink" title="Zero is the only value able to guarantee that when all the partitions heal"></a>Zero is the only value able to guarantee that when all the partitions heal</h1><h1 id="the-cluster-will-always-be-able-to-continue"><a href="#the-cluster-will-always-be-able-to-continue" class="headerlink" title="the cluster will always be able to continue."></a>the cluster will always be able to continue.</h1><p>#</p><h1 id="cluster-slave-validity-factor-10"><a href="#cluster-slave-validity-factor-10" class="headerlink" title="cluster-slave-validity-factor 10"></a>cluster-slave-validity-factor 10</h1><h1 id="Cluster-slaves-are-able-to-migrate-to-orphaned-masters-that-are-masters"><a href="#Cluster-slaves-are-able-to-migrate-to-orphaned-masters-that-are-masters" class="headerlink" title="Cluster slaves are able to migrate to orphaned masters, that are masters"></a>Cluster slaves are able to migrate to orphaned masters, that are masters</h1><h1 id="that-are-left-without-working-slaves-This-improves-the-cluster-ability"><a href="#that-are-left-without-working-slaves-This-improves-the-cluster-ability" class="headerlink" title="that are left without working slaves. This improves the cluster ability"></a>that are left without working slaves. This improves the cluster ability</h1><h1 id="to-resist-to-failures-as-otherwise-an-orphaned-master-can’t-be-failed-over"><a href="#to-resist-to-failures-as-otherwise-an-orphaned-master-can’t-be-failed-over" class="headerlink" title="to resist to failures as otherwise an orphaned master can’t be failed over"></a>to resist to failures as otherwise an orphaned master can’t be failed over</h1><h1 id="in-case-of-failure-if-it-has-no-working-slaves"><a href="#in-case-of-failure-if-it-has-no-working-slaves" class="headerlink" title="in case of failure if it has no working slaves."></a>in case of failure if it has no working slaves.</h1><p>#</p><h1 id="Slaves-migrate-to-orphaned-masters-only-if-there-are-still-at-least-a"><a href="#Slaves-migrate-to-orphaned-masters-only-if-there-are-still-at-least-a" class="headerlink" title="Slaves migrate to orphaned masters only if there are still at least a"></a>Slaves migrate to orphaned masters only if there are still at least a</h1><h1 id="given-number-of-other-working-slaves-for-their-old-master-This-number"><a href="#given-number-of-other-working-slaves-for-their-old-master-This-number" class="headerlink" title="given number of other working slaves for their old master. This number"></a>given number of other working slaves for their old master. This number</h1><h1 id="is-the-“migration-barrier”-A-migration-barrier-of-1-means-that-a-slave"><a href="#is-the-“migration-barrier”-A-migration-barrier-of-1-means-that-a-slave" class="headerlink" title="is the “migration barrier”. A migration barrier of 1 means that a slave"></a>is the “migration barrier”. A migration barrier of 1 means that a slave</h1><h1 id="will-migrate-only-if-there-is-at-least-1-other-working-slave-for-its-master"><a href="#will-migrate-only-if-there-is-at-least-1-other-working-slave-for-its-master" class="headerlink" title="will migrate only if there is at least 1 other working slave for its master"></a>will migrate only if there is at least 1 other working slave for its master</h1><h1 id="and-so-forth-It-usually-reflects-the-number-of-slaves-you-want-for-every"><a href="#and-so-forth-It-usually-reflects-the-number-of-slaves-you-want-for-every" class="headerlink" title="and so forth. It usually reflects the number of slaves you want for every"></a>and so forth. It usually reflects the number of slaves you want for every</h1><h1 id="master-in-your-cluster"><a href="#master-in-your-cluster" class="headerlink" title="master in your cluster."></a>master in your cluster.</h1><p>#</p><h1 id="Default-is-1-slaves-migrate-only-if-their-masters-remain-with-at-least"><a href="#Default-is-1-slaves-migrate-only-if-their-masters-remain-with-at-least" class="headerlink" title="Default is 1 (slaves migrate only if their masters remain with at least"></a>Default is 1 (slaves migrate only if their masters remain with at least</h1><h1 id="one-slave-To-disable-migration-just-set-it-to-a-very-large-value"><a href="#one-slave-To-disable-migration-just-set-it-to-a-very-large-value" class="headerlink" title="one slave). To disable migration just set it to a very large value."></a>one slave). To disable migration just set it to a very large value.</h1><h1 id="A-value-of-0-can-be-set-but-is-useful-only-for-debugging-and-dangerous"><a href="#A-value-of-0-can-be-set-but-is-useful-only-for-debugging-and-dangerous" class="headerlink" title="A value of 0 can be set but is useful only for debugging and dangerous"></a>A value of 0 can be set but is useful only for debugging and dangerous</h1><h1 id="in-production"><a href="#in-production" class="headerlink" title="in production."></a>in production.</h1><p>#</p><h1 id="cluster-migration-barrier-1"><a href="#cluster-migration-barrier-1" class="headerlink" title="cluster-migration-barrier 1"></a>cluster-migration-barrier 1</h1><h1 id="By-default-Redis-Cluster-nodes-stop-accepting-queries-if-they-detect-there"><a href="#By-default-Redis-Cluster-nodes-stop-accepting-queries-if-they-detect-there" class="headerlink" title="By default Redis Cluster nodes stop accepting queries if they detect there"></a>By default Redis Cluster nodes stop accepting queries if they detect there</h1><h1 id="is-at-least-an-hash-slot-uncovered-no-available-node-is-serving-it"><a href="#is-at-least-an-hash-slot-uncovered-no-available-node-is-serving-it" class="headerlink" title="is at least an hash slot uncovered (no available node is serving it)."></a>is at least an hash slot uncovered (no available node is serving it).</h1><h1 id="This-way-if-the-cluster-is-partially-down-for-example-a-range-of-hash-slots"><a href="#This-way-if-the-cluster-is-partially-down-for-example-a-range-of-hash-slots" class="headerlink" title="This way if the cluster is partially down (for example a range of hash slots"></a>This way if the cluster is partially down (for example a range of hash slots</h1><h1 id="are-no-longer-covered-all-the-cluster-becomes-eventually-unavailable"><a href="#are-no-longer-covered-all-the-cluster-becomes-eventually-unavailable" class="headerlink" title="are no longer covered) all the cluster becomes, eventually, unavailable."></a>are no longer covered) all the cluster becomes, eventually, unavailable.</h1><h1 id="It-automatically-returns-available-as-soon-as-all-the-slots-are-covered-again"><a href="#It-automatically-returns-available-as-soon-as-all-the-slots-are-covered-again" class="headerlink" title="It automatically returns available as soon as all the slots are covered again."></a>It automatically returns available as soon as all the slots are covered again.</h1><p>#</p><h1 id="However-sometimes-you-want-the-subset-of-the-cluster-which-is-working"><a href="#However-sometimes-you-want-the-subset-of-the-cluster-which-is-working" class="headerlink" title="However sometimes you want the subset of the cluster which is working,"></a>However sometimes you want the subset of the cluster which is working,</h1><h1 id="to-continue-to-accept-queries-for-the-part-of-the-key-space-that-is-still"><a href="#to-continue-to-accept-queries-for-the-part-of-the-key-space-that-is-still" class="headerlink" title="to continue to accept queries for the part of the key space that is still"></a>to continue to accept queries for the part of the key space that is still</h1><h1 id="covered-In-order-to-do-so-just-set-the-cluster-require-full-coverage"><a href="#covered-In-order-to-do-so-just-set-the-cluster-require-full-coverage" class="headerlink" title="covered. In order to do so, just set the cluster-require-full-coverage"></a>covered. In order to do so, just set the cluster-require-full-coverage</h1><h1 id="option-to-no"><a href="#option-to-no" class="headerlink" title="option to no."></a>option to no.</h1><p>#</p><h1 id="cluster-require-full-coverage-yes"><a href="#cluster-require-full-coverage-yes" class="headerlink" title="cluster-require-full-coverage yes"></a>cluster-require-full-coverage yes</h1><h1 id="In-order-to-setup-your-cluster-make-sure-to-read-the-documentation"><a href="#In-order-to-setup-your-cluster-make-sure-to-read-the-documentation" class="headerlink" title="In order to setup your cluster make sure to read the documentation"></a>In order to setup your cluster make sure to read the documentation</h1><h1 id="available-at-http-redis-io-web-site"><a href="#available-at-http-redis-io-web-site" class="headerlink" title="available at http://redis.io web site."></a>available at <a href="http://redis.io" target="_blank" rel="noopener">http://redis.io</a> web site.</h1><p>################################## SLOW LOG ###################################</p><h1 id="The-Redis-Slow-Log-is-a-system-to-log-queries-that-exceeded-a-specified"><a href="#The-Redis-Slow-Log-is-a-system-to-log-queries-that-exceeded-a-specified" class="headerlink" title="The Redis Slow Log is a system to log queries that exceeded a specified"></a>The Redis Slow Log is a system to log queries that exceeded a specified</h1><h1 id="execution-time-The-execution-time-does-not-include-the-I-O-operations"><a href="#execution-time-The-execution-time-does-not-include-the-I-O-operations" class="headerlink" title="execution time. The execution time does not include the I/O operations"></a>execution time. The execution time does not include the I/O operations</h1><h1 id="like-talking-with-the-client-sending-the-reply-and-so-forth"><a href="#like-talking-with-the-client-sending-the-reply-and-so-forth" class="headerlink" title="like talking with the client, sending the reply and so forth,"></a>like talking with the client, sending the reply and so forth,</h1><h1 id="but-just-the-time-needed-to-actually-execute-the-command-this-is-the-only"><a href="#but-just-the-time-needed-to-actually-execute-the-command-this-is-the-only" class="headerlink" title="but just the time needed to actually execute the command (this is the only"></a>but just the time needed to actually execute the command (this is the only</h1><h1 id="stage-of-command-execution-where-the-thread-is-blocked-and-can-not-serve"><a href="#stage-of-command-execution-where-the-thread-is-blocked-and-can-not-serve" class="headerlink" title="stage of command execution where the thread is blocked and can not serve"></a>stage of command execution where the thread is blocked and can not serve</h1><h1 id="other-requests-in-the-meantime"><a href="#other-requests-in-the-meantime" class="headerlink" title="other requests in the meantime)."></a>other requests in the meantime).</h1><p>#</p><h1 id="You-can-configure-the-slow-log-with-two-parameters-one-tells-Redis"><a href="#You-can-configure-the-slow-log-with-two-parameters-one-tells-Redis" class="headerlink" title="You can configure the slow log with two parameters: one tells Redis"></a>You can configure the slow log with two parameters: one tells Redis</h1><h1 id="what-is-the-execution-time-in-microseconds-to-exceed-in-order-for-the"><a href="#what-is-the-execution-time-in-microseconds-to-exceed-in-order-for-the" class="headerlink" title="what is the execution time, in microseconds, to exceed in order for the"></a>what is the execution time, in microseconds, to exceed in order for the</h1><h1 id="command-to-get-logged-and-the-other-parameter-is-the-length-of-the"><a href="#command-to-get-logged-and-the-other-parameter-is-the-length-of-the" class="headerlink" title="command to get logged, and the other parameter is the length of the"></a>command to get logged, and the other parameter is the length of the</h1><h1 id="slow-log-When-a-new-command-is-logged-the-oldest-one-is-removed-from-the"><a href="#slow-log-When-a-new-command-is-logged-the-oldest-one-is-removed-from-the" class="headerlink" title="slow log. When a new command is logged the oldest one is removed from the"></a>slow log. When a new command is logged the oldest one is removed from the</h1><h1 id="queue-of-logged-commands"><a href="#queue-of-logged-commands" class="headerlink" title="queue of logged commands."></a>queue of logged commands.</h1><h1 id="The-following-time-is-expressed-in-microseconds-so-1000000-is-equivalent"><a href="#The-following-time-is-expressed-in-microseconds-so-1000000-is-equivalent" class="headerlink" title="The following time is expressed in microseconds, so 1000000 is equivalent"></a>The following time is expressed in microseconds, so 1000000 is equivalent</h1><h1 id="to-one-second-Note-that-a-negative-number-disables-the-slow-log-while"><a href="#to-one-second-Note-that-a-negative-number-disables-the-slow-log-while" class="headerlink" title="to one second. Note that a negative number disables the slow log, while"></a>to one second. Note that a negative number disables the slow log, while</h1><h1 id="a-value-of-zero-forces-the-logging-of-every-command"><a href="#a-value-of-zero-forces-the-logging-of-every-command" class="headerlink" title="a value of zero forces the logging of every command."></a>a value of zero forces the logging of every command.</h1><p>slowlog-log-slower-than 10000</p><h1 id="There-is-no-limit-to-this-length-Just-be-aware-that-it-will-consume-memory"><a href="#There-is-no-limit-to-this-length-Just-be-aware-that-it-will-consume-memory" class="headerlink" title="There is no limit to this length. Just be aware that it will consume memory."></a>There is no limit to this length. Just be aware that it will consume memory.</h1><h1 id="You-can-reclaim-memory-used-by-the-slow-log-with-SLOWLOG-RESET"><a href="#You-can-reclaim-memory-used-by-the-slow-log-with-SLOWLOG-RESET" class="headerlink" title="You can reclaim memory used by the slow log with SLOWLOG RESET."></a>You can reclaim memory used by the slow log with SLOWLOG RESET.</h1><p>slowlog-max-len 128</p><p>################################ LATENCY MONITOR ##############################</p><h1 id="The-Redis-latency-monitoring-subsystem-samples-different-operations"><a href="#The-Redis-latency-monitoring-subsystem-samples-different-operations" class="headerlink" title="The Redis latency monitoring subsystem samples different operations"></a>The Redis latency monitoring subsystem samples different operations</h1><h1 id="at-runtime-in-order-to-collect-data-related-to-possible-sources-of"><a href="#at-runtime-in-order-to-collect-data-related-to-possible-sources-of" class="headerlink" title="at runtime in order to collect data related to possible sources of"></a>at runtime in order to collect data related to possible sources of</h1><h1 id="latency-of-a-Redis-instance"><a href="#latency-of-a-Redis-instance" class="headerlink" title="latency of a Redis instance."></a>latency of a Redis instance.</h1><p>#</p><h1 id="Via-the-LATENCY-command-this-information-is-available-to-the-user-that-can"><a href="#Via-the-LATENCY-command-this-information-is-available-to-the-user-that-can" class="headerlink" title="Via the LATENCY command this information is available to the user that can"></a>Via the LATENCY command this information is available to the user that can</h1><h1 id="print-graphs-and-obtain-reports"><a href="#print-graphs-and-obtain-reports" class="headerlink" title="print graphs and obtain reports."></a>print graphs and obtain reports.</h1><p>#</p><h1 id="The-system-only-logs-operations-that-were-performed-in-a-time-equal-or"><a href="#The-system-only-logs-operations-that-were-performed-in-a-time-equal-or" class="headerlink" title="The system only logs operations that were performed in a time equal or"></a>The system only logs operations that were performed in a time equal or</h1><h1 id="greater-than-the-amount-of-milliseconds-specified-via-the"><a href="#greater-than-the-amount-of-milliseconds-specified-via-the" class="headerlink" title="greater than the amount of milliseconds specified via the"></a>greater than the amount of milliseconds specified via the</h1><h1 id="latency-monitor-threshold-configuration-directive-When-its-value-is-set"><a href="#latency-monitor-threshold-configuration-directive-When-its-value-is-set" class="headerlink" title="latency-monitor-threshold configuration directive. When its value is set"></a>latency-monitor-threshold configuration directive. When its value is set</h1><h1 id="to-zero-the-latency-monitor-is-turned-off"><a href="#to-zero-the-latency-monitor-is-turned-off" class="headerlink" title="to zero, the latency monitor is turned off."></a>to zero, the latency monitor is turned off.</h1><p>#</p><h1 id="By-default-latency-monitoring-is-disabled-since-it-is-mostly-not-needed"><a href="#By-default-latency-monitoring-is-disabled-since-it-is-mostly-not-needed" class="headerlink" title="By default latency monitoring is disabled since it is mostly not needed"></a>By default latency monitoring is disabled since it is mostly not needed</h1><h1 id="if-you-don’t-have-latency-issues-and-collecting-data-has-a-performance"><a href="#if-you-don’t-have-latency-issues-and-collecting-data-has-a-performance" class="headerlink" title="if you don’t have latency issues, and collecting data has a performance"></a>if you don’t have latency issues, and collecting data has a performance</h1><h1 id="impact-that-while-very-small-can-be-measured-under-big-load-Latency"><a href="#impact-that-while-very-small-can-be-measured-under-big-load-Latency" class="headerlink" title="impact, that while very small, can be measured under big load. Latency"></a>impact, that while very small, can be measured under big load. Latency</h1><h1 id="monitoring-can-easily-be-enabled-at-runtime-using-the-command"><a href="#monitoring-can-easily-be-enabled-at-runtime-using-the-command" class="headerlink" title="monitoring can easily be enabled at runtime using the command"></a>monitoring can easily be enabled at runtime using the command</h1><h1 id="“CONFIG-SET-latency-monitor-threshold-“-if-needed"><a href="#“CONFIG-SET-latency-monitor-threshold-“-if-needed" class="headerlink" title="“CONFIG SET latency-monitor-threshold “ if needed."></a>“CONFIG SET latency-monitor-threshold<milliseconds>“ if needed.</milliseconds></h1><p>latency-monitor-threshold 0</p><p>############################# EVENT NOTIFICATION ##############################</p><h1 id="Redis-can-notify-Pub-Sub-clients-about-events-happening-in-the-key-space"><a href="#Redis-can-notify-Pub-Sub-clients-about-events-happening-in-the-key-space" class="headerlink" title="Redis can notify Pub/Sub clients about events happening in the key space."></a>Redis can notify Pub/Sub clients about events happening in the key space.</h1><h1 id="This-feature-is-documented-at-http-redis-io-topics-notifications"><a href="#This-feature-is-documented-at-http-redis-io-topics-notifications" class="headerlink" title="This feature is documented at http://redis.io/topics/notifications"></a>This feature is documented at <a href="http://redis.io/topics/notifications" target="_blank" rel="noopener">http://redis.io/topics/notifications</a></h1><p>#</p><h1 id="For-instance-if-keyspace-events-notification-is-enabled-and-a-client"><a href="#For-instance-if-keyspace-events-notification-is-enabled-and-a-client" class="headerlink" title="For instance if keyspace events notification is enabled, and a client"></a>For instance if keyspace events notification is enabled, and a client</h1><h1 id="performs-a-DEL-operation-on-key-“foo”-stored-in-the-Database-0-two"><a href="#performs-a-DEL-operation-on-key-“foo”-stored-in-the-Database-0-two" class="headerlink" title="performs a DEL operation on key “foo” stored in the Database 0, two"></a>performs a DEL operation on key “foo” stored in the Database 0, two</h1><h1 id="messages-will-be-published-via-Pub-Sub"><a href="#messages-will-be-published-via-Pub-Sub" class="headerlink" title="messages will be published via Pub/Sub:"></a>messages will be published via Pub/Sub:</h1><p>#</p><h1 id="PUBLISH-keyspace-0-foo-del"><a href="#PUBLISH-keyspace-0-foo-del" class="headerlink" title="PUBLISH keyspace@0:foo del"></a>PUBLISH <strong>keyspace@0</strong>:foo del</h1><h1 id="PUBLISH-keyevent-0-del-foo"><a href="#PUBLISH-keyevent-0-del-foo" class="headerlink" title="PUBLISH keyevent@0:del foo"></a>PUBLISH <strong>keyevent@0</strong>:del foo</h1><p>#</p><h1 id="It-is-possible-to-select-the-events-that-Redis-will-notify-among-a-set"><a href="#It-is-possible-to-select-the-events-that-Redis-will-notify-among-a-set" class="headerlink" title="It is possible to select the events that Redis will notify among a set"></a>It is possible to select the events that Redis will notify among a set</h1><h1 id="of-classes-Every-class-is-identified-by-a-single-character"><a href="#of-classes-Every-class-is-identified-by-a-single-character" class="headerlink" title="of classes. Every class is identified by a single character:"></a>of classes. Every class is identified by a single character:</h1><p>#</p><h1 id="K-Keyspace-events-published-with-keyspace-prefix"><a href="#K-Keyspace-events-published-with-keyspace-prefix" class="headerlink" title="K     Keyspace events, published with keyspace@ prefix."></a>K Keyspace events, published with <strong>keyspace@<db></db></strong>prefix.</h1><h1 id="E-Keyevent-events-published-with-keyevent-prefix"><a href="#E-Keyevent-events-published-with-keyevent-prefix" class="headerlink" title="E     Keyevent events, published with keyevent@ prefix."></a>E Keyevent events, published with <strong>keyevent@<db></db></strong>prefix.</h1><h1 id="g-Generic-commands-non-type-specific-like-DEL-EXPIRE-RENAME-…"><a href="#g-Generic-commands-non-type-specific-like-DEL-EXPIRE-RENAME-…" class="headerlink" title="g     Generic commands (non-type specific) like DEL, EXPIRE, RENAME, …"></a>g Generic commands (non-type specific) like DEL, EXPIRE, RENAME, …</h1><h1 id="String-commands"><a href="#String-commands" class="headerlink" title="$     String commands"></a>$ String commands</h1><h1 id="l-List-commands"><a href="#l-List-commands" class="headerlink" title="l     List commands"></a>l List commands</h1><h1 id="s-Set-commands"><a href="#s-Set-commands" class="headerlink" title="s     Set commands"></a>s Set commands</h1><h1 id="h-Hash-commands"><a href="#h-Hash-commands" class="headerlink" title="h     Hash commands"></a>h Hash commands</h1><h1 id="z-Sorted-set-commands"><a href="#z-Sorted-set-commands" class="headerlink" title="z     Sorted set commands"></a>z Sorted set commands</h1><h1 id="x-Expired-events-events-generated-every-time-a-key-expires"><a href="#x-Expired-events-events-generated-every-time-a-key-expires" class="headerlink" title="x     Expired events (events generated every time a key expires)"></a>x Expired events (events generated every time a key expires)</h1><h1 id="e-Evicted-events-events-generated-when-a-key-is-evicted-for-maxmemory"><a href="#e-Evicted-events-events-generated-when-a-key-is-evicted-for-maxmemory" class="headerlink" title="e     Evicted events (events generated when a key is evicted for maxmemory)"></a>e Evicted events (events generated when a key is evicted for maxmemory)</h1><h1 id="A-Alias-for-g-lshzxe-so-that-the-“AKE”-string-means-all-the-events"><a href="#A-Alias-for-g-lshzxe-so-that-the-“AKE”-string-means-all-the-events" class="headerlink" title="A     Alias for g$lshzxe, so that the “AKE” string means all the events."></a>A Alias for g$lshzxe, so that the “AKE” string means all the events.</h1><p>#</p><h1 id="The-“notify-keyspace-events”-takes-as-argument-a-string-that-is-composed"><a href="#The-“notify-keyspace-events”-takes-as-argument-a-string-that-is-composed" class="headerlink" title="The “notify-keyspace-events” takes as argument a string that is composed"></a>The “notify-keyspace-events” takes as argument a string that is composed</h1><h1 id="of-zero-or-multiple-characters-The-empty-string-means-that-notifications"><a href="#of-zero-or-multiple-characters-The-empty-string-means-that-notifications" class="headerlink" title="of zero or multiple characters. The empty string means that notifications"></a>of zero or multiple characters. The empty string means that notifications</h1><h1 id="are-disabled"><a href="#are-disabled" class="headerlink" title="are disabled."></a>are disabled.</h1><p>#</p><h1 id="Example-to-enable-list-and-generic-events-from-the-point-of-view-of-the"><a href="#Example-to-enable-list-and-generic-events-from-the-point-of-view-of-the" class="headerlink" title="Example: to enable list and generic events, from the point of view of the"></a>Example: to enable list and generic events, from the point of view of the</h1><h1 id="event-name-use"><a href="#event-name-use" class="headerlink" title="event name, use:"></a>event name, use:</h1><p>#</p><h1 id="notify-keyspace-events-Elg"><a href="#notify-keyspace-events-Elg" class="headerlink" title="notify-keyspace-events Elg"></a>notify-keyspace-events Elg</h1><p>#</p><h1 id="Example-2-to-get-the-stream-of-the-expired-keys-subscribing-to-channel"><a href="#Example-2-to-get-the-stream-of-the-expired-keys-subscribing-to-channel" class="headerlink" title="Example 2: to get the stream of the expired keys subscribing to channel"></a>Example 2: to get the stream of the expired keys subscribing to channel</h1><h1 id="name-keyevent-0-expired-use"><a href="#name-keyevent-0-expired-use" class="headerlink" title="name keyevent@0:expired use:"></a>name <strong>keyevent@0</strong>:expired use:</h1><p>#</p><h1 id="notify-keyspace-events-Ex"><a href="#notify-keyspace-events-Ex" class="headerlink" title="notify-keyspace-events Ex"></a>notify-keyspace-events Ex</h1><p>#</p><h1 id="By-default-all-notifications-are-disabled-because-most-users-don’t-need"><a href="#By-default-all-notifications-are-disabled-because-most-users-don’t-need" class="headerlink" title="By default all notifications are disabled because most users don’t need"></a>By default all notifications are disabled because most users don’t need</h1><h1 id="this-feature-and-the-feature-has-some-overhead-Note-that-if-you-don’t"><a href="#this-feature-and-the-feature-has-some-overhead-Note-that-if-you-don’t" class="headerlink" title="this feature and the feature has some overhead. Note that if you don’t"></a>this feature and the feature has some overhead. Note that if you don’t</h1><h1 id="specify-at-least-one-of-K-or-E-no-events-will-be-delivered"><a href="#specify-at-least-one-of-K-or-E-no-events-will-be-delivered" class="headerlink" title="specify at least one of K or E, no events will be delivered."></a>specify at least one of K or E, no events will be delivered.</h1><p>notify-keyspace-events “”</p><p>############################### ADVANCED CONFIG ###############################</p><h1 id="Hashes-are-encoded-using-a-memory-efficient-data-structure-when-they-have-a"><a href="#Hashes-are-encoded-using-a-memory-efficient-data-structure-when-they-have-a" class="headerlink" title="Hashes are encoded using a memory efficient data structure when they have a"></a>Hashes are encoded using a memory efficient data structure when they have a</h1><h1 id="small-number-of-entries-and-the-biggest-entry-does-not-exceed-a-given"><a href="#small-number-of-entries-and-the-biggest-entry-does-not-exceed-a-given" class="headerlink" title="small number of entries, and the biggest entry does not exceed a given"></a>small number of entries, and the biggest entry does not exceed a given</h1><h1 id="threshold-These-thresholds-can-be-configured-using-the-following-directives"><a href="#threshold-These-thresholds-can-be-configured-using-the-following-directives" class="headerlink" title="threshold. These thresholds can be configured using the following directives."></a>threshold. These thresholds can be configured using the following directives.</h1><p>hash-max-ziplist-entries 512<br>hash-max-ziplist-value 64</p><h1 id="Lists-are-also-encoded-in-a-special-way-to-save-a-lot-of-space"><a href="#Lists-are-also-encoded-in-a-special-way-to-save-a-lot-of-space" class="headerlink" title="Lists are also encoded in a special way to save a lot of space."></a>Lists are also encoded in a special way to save a lot of space.</h1><h1 id="The-number-of-entries-allowed-per-internal-list-node-can-be-specified"><a href="#The-number-of-entries-allowed-per-internal-list-node-can-be-specified" class="headerlink" title="The number of entries allowed per internal list node can be specified"></a>The number of entries allowed per internal list node can be specified</h1><h1 id="as-a-fixed-maximum-size-or-a-maximum-number-of-elements"><a href="#as-a-fixed-maximum-size-or-a-maximum-number-of-elements" class="headerlink" title="as a fixed maximum size or a maximum number of elements."></a>as a fixed maximum size or a maximum number of elements.</h1><h1 id="For-a-fixed-maximum-size-use-5-through-1-meaning"><a href="#For-a-fixed-maximum-size-use-5-through-1-meaning" class="headerlink" title="For a fixed maximum size, use -5 through -1, meaning:"></a>For a fixed maximum size, use -5 through -1, meaning:</h1><h1 id="5-max-size-64-Kb-lt-–-not-recommended-for-normal-workloads"><a href="#5-max-size-64-Kb-lt-–-not-recommended-for-normal-workloads" class="headerlink" title="-5: max size: 64 Kb  &lt;– not recommended for normal workloads"></a>-5: max size: 64 Kb &lt;– not recommended for normal workloads</h1><h1 id="4-max-size-32-Kb-lt-–-not-recommended"><a href="#4-max-size-32-Kb-lt-–-not-recommended" class="headerlink" title="-4: max size: 32 Kb  &lt;– not recommended"></a>-4: max size: 32 Kb &lt;– not recommended</h1><h1 id="3-max-size-16-Kb-lt-–-probably-not-recommended"><a href="#3-max-size-16-Kb-lt-–-probably-not-recommended" class="headerlink" title="-3: max size: 16 Kb  &lt;– probably not recommended"></a>-3: max size: 16 Kb &lt;– probably not recommended</h1><h1 id="2-max-size-8-Kb-lt-–-good"><a href="#2-max-size-8-Kb-lt-–-good" class="headerlink" title="-2: max size: 8 Kb   &lt;– good"></a>-2: max size: 8 Kb &lt;– good</h1><h1 id="1-max-size-4-Kb-lt-–-good"><a href="#1-max-size-4-Kb-lt-–-good" class="headerlink" title="-1: max size: 4 Kb   &lt;– good"></a>-1: max size: 4 Kb &lt;– good</h1><h1 id="Positive-numbers-mean-store-up-to-exactly-that-number-of-elements"><a href="#Positive-numbers-mean-store-up-to-exactly-that-number-of-elements" class="headerlink" title="Positive numbers mean store up to exactly that number of elements"></a>Positive numbers mean store up to <em>exactly</em> that number of elements</h1><h1 id="per-list-node"><a href="#per-list-node" class="headerlink" title="per list node."></a>per list node.</h1><h1 id="The-highest-performing-option-is-usually-2-8-Kb-size-or-1-4-Kb-size"><a href="#The-highest-performing-option-is-usually-2-8-Kb-size-or-1-4-Kb-size" class="headerlink" title="The highest performing option is usually -2 (8 Kb size) or -1 (4 Kb size),"></a>The highest performing option is usually -2 (8 Kb size) or -1 (4 Kb size),</h1><h1 id="but-if-your-use-case-is-unique-adjust-the-settings-as-necessary"><a href="#but-if-your-use-case-is-unique-adjust-the-settings-as-necessary" class="headerlink" title="but if your use case is unique, adjust the settings as necessary."></a>but if your use case is unique, adjust the settings as necessary.</h1><p>list-max-ziplist-size -2</p><h1 id="Lists-may-also-be-compressed"><a href="#Lists-may-also-be-compressed" class="headerlink" title="Lists may also be compressed."></a>Lists may also be compressed.</h1><h1 id="Compress-depth-is-the-number-of-quicklist-ziplist-nodes-from-each-side-of"><a href="#Compress-depth-is-the-number-of-quicklist-ziplist-nodes-from-each-side-of" class="headerlink" title="Compress depth is the number of quicklist ziplist nodes from each side of"></a>Compress depth is the number of quicklist ziplist nodes from <em>each</em> side of</h1><h1 id="the-list-to-exclude-from-compression-The-head-and-tail-of-the-list"><a href="#the-list-to-exclude-from-compression-The-head-and-tail-of-the-list" class="headerlink" title="the list to exclude from compression.  The head and tail of the list"></a>the list to <em>exclude</em> from compression. The head and tail of the list</h1><h1 id="are-always-uncompressed-for-fast-push-pop-operations-Settings-are"><a href="#are-always-uncompressed-for-fast-push-pop-operations-Settings-are" class="headerlink" title="are always uncompressed for fast push/pop operations.  Settings are:"></a>are always uncompressed for fast push/pop operations. Settings are:</h1><h1 id="0-disable-all-list-compression"><a href="#0-disable-all-list-compression" class="headerlink" title="0: disable all list compression"></a>0: disable all list compression</h1><h1 id="1-depth-1-means-“don’t-start-compressing-until-after-1-node-into-the-list"><a href="#1-depth-1-means-“don’t-start-compressing-until-after-1-node-into-the-list" class="headerlink" title="1: depth 1 means “don’t start compressing until after 1 node into the list,"></a>1: depth 1 means “don’t start compressing until after 1 node into the list,</h1><h1 id="going-from-either-the-head-or-tail”"><a href="#going-from-either-the-head-or-tail”" class="headerlink" title="going from either the head or tail”"></a>going from either the head or tail”</h1><h1 id="So-head-gt-node-gt-node-gt-…-gt-node-gt-tail"><a href="#So-head-gt-node-gt-node-gt-…-gt-node-gt-tail" class="headerlink" title="So: [head]-&gt;node-&gt;node-&gt;…-&gt;node-&gt;[tail]"></a>So: [head]-&gt;node-&gt;node-&gt;…-&gt;node-&gt;[tail]</h1><h1 id="head-tail-will-always-be-uncompressed-inner-nodes-will-compress"><a href="#head-tail-will-always-be-uncompressed-inner-nodes-will-compress" class="headerlink" title="[head], [tail] will always be uncompressed; inner nodes will compress."></a>[head], [tail] will always be uncompressed; inner nodes will compress.</h1><h1 id="2-head-gt-next-gt-node-gt-node-gt-…-gt-node-gt-prev-gt-tail"><a href="#2-head-gt-next-gt-node-gt-node-gt-…-gt-node-gt-prev-gt-tail" class="headerlink" title="2: [head]-&gt;[next]-&gt;node-&gt;node-&gt;…-&gt;node-&gt;[prev]-&gt;[tail]"></a>2: [head]-&gt;[next]-&gt;node-&gt;node-&gt;…-&gt;node-&gt;[prev]-&gt;[tail]</h1><h1 id="2-here-means-don’t-compress-head-or-head-gt-next-or-tail-gt-prev-or-tail"><a href="#2-here-means-don’t-compress-head-or-head-gt-next-or-tail-gt-prev-or-tail" class="headerlink" title="2 here means: don’t compress head or head-&gt;next or tail-&gt;prev or tail,"></a>2 here means: don’t compress head or head-&gt;next or tail-&gt;prev or tail,</h1><h1 id="but-compress-all-nodes-between-them"><a href="#but-compress-all-nodes-between-them" class="headerlink" title="but compress all nodes between them."></a>but compress all nodes between them.</h1><h1 id="3-head-gt-next-gt-next-gt-node-gt-node-gt-…-gt-node-gt-prev-gt-prev-gt-tail"><a href="#3-head-gt-next-gt-next-gt-node-gt-node-gt-…-gt-node-gt-prev-gt-prev-gt-tail" class="headerlink" title="3: [head]-&gt;[next]-&gt;[next]-&gt;node-&gt;node-&gt;…-&gt;node-&gt;[prev]-&gt;[prev]-&gt;[tail]"></a>3: [head]-&gt;[next]-&gt;[next]-&gt;node-&gt;node-&gt;…-&gt;node-&gt;[prev]-&gt;[prev]-&gt;[tail]</h1><h1 id="etc"><a href="#etc" class="headerlink" title="etc."></a>etc.</h1><p>list-compress-depth 0</p><h1 id="Sets-have-a-special-encoding-in-just-one-case-when-a-set-is-composed"><a href="#Sets-have-a-special-encoding-in-just-one-case-when-a-set-is-composed" class="headerlink" title="Sets have a special encoding in just one case: when a set is composed"></a>Sets have a special encoding in just one case: when a set is composed</h1><h1 id="of-just-strings-that-happen-to-be-integers-in-radix-10-in-the-range"><a href="#of-just-strings-that-happen-to-be-integers-in-radix-10-in-the-range" class="headerlink" title="of just strings that happen to be integers in radix 10 in the range"></a>of just strings that happen to be integers in radix 10 in the range</h1><h1 id="of-64-bit-signed-integers"><a href="#of-64-bit-signed-integers" class="headerlink" title="of 64 bit signed integers."></a>of 64 bit signed integers.</h1><h1 id="The-following-configuration-setting-sets-the-limit-in-the-size-of-the"><a href="#The-following-configuration-setting-sets-the-limit-in-the-size-of-the" class="headerlink" title="The following configuration setting sets the limit in the size of the"></a>The following configuration setting sets the limit in the size of the</h1><h1 id="set-in-order-to-use-this-special-memory-saving-encoding"><a href="#set-in-order-to-use-this-special-memory-saving-encoding" class="headerlink" title="set in order to use this special memory saving encoding."></a>set in order to use this special memory saving encoding.</h1><p>set-max-intset-entries 512</p><h1 id="Similarly-to-hashes-and-lists-sorted-sets-are-also-specially-encoded-in"><a href="#Similarly-to-hashes-and-lists-sorted-sets-are-also-specially-encoded-in" class="headerlink" title="Similarly to hashes and lists, sorted sets are also specially encoded in"></a>Similarly to hashes and lists, sorted sets are also specially encoded in</h1><h1 id="order-to-save-a-lot-of-space-This-encoding-is-only-used-when-the-length-and"><a href="#order-to-save-a-lot-of-space-This-encoding-is-only-used-when-the-length-and" class="headerlink" title="order to save a lot of space. This encoding is only used when the length and"></a>order to save a lot of space. This encoding is only used when the length and</h1><h1 id="elements-of-a-sorted-set-are-below-the-following-limits"><a href="#elements-of-a-sorted-set-are-below-the-following-limits" class="headerlink" title="elements of a sorted set are below the following limits:"></a>elements of a sorted set are below the following limits:</h1><p>zset-max-ziplist-entries 128<br>zset-max-ziplist-value 64</p><h1 id="HyperLogLog-sparse-representation-bytes-limit-The-limit-includes-the"><a href="#HyperLogLog-sparse-representation-bytes-limit-The-limit-includes-the" class="headerlink" title="HyperLogLog sparse representation bytes limit. The limit includes the"></a>HyperLogLog sparse representation bytes limit. The limit includes the</h1><h1 id="16-bytes-header-When-an-HyperLogLog-using-the-sparse-representation-crosses"><a href="#16-bytes-header-When-an-HyperLogLog-using-the-sparse-representation-crosses" class="headerlink" title="16 bytes header. When an HyperLogLog using the sparse representation crosses"></a>16 bytes header. When an HyperLogLog using the sparse representation crosses</h1><h1 id="this-limit-it-is-converted-into-the-dense-representation"><a href="#this-limit-it-is-converted-into-the-dense-representation" class="headerlink" title="this limit, it is converted into the dense representation."></a>this limit, it is converted into the dense representation.</h1><p>#</p><h1 id="A-value-greater-than-16000-is-totally-useless-since-at-that-point-the"><a href="#A-value-greater-than-16000-is-totally-useless-since-at-that-point-the" class="headerlink" title="A value greater than 16000 is totally useless, since at that point the"></a>A value greater than 16000 is totally useless, since at that point the</h1><h1 id="dense-representation-is-more-memory-efficient"><a href="#dense-representation-is-more-memory-efficient" class="headerlink" title="dense representation is more memory efficient."></a>dense representation is more memory efficient.</h1><p>#</p><h1 id="The-suggested-value-is-3000-in-order-to-have-the-benefits-of"><a href="#The-suggested-value-is-3000-in-order-to-have-the-benefits-of" class="headerlink" title="The suggested value is ~ 3000 in order to have the benefits of"></a>The suggested value is ~ 3000 in order to have the benefits of</h1><h1 id="the-space-efficient-encoding-without-slowing-down-too-much-PFADD"><a href="#the-space-efficient-encoding-without-slowing-down-too-much-PFADD" class="headerlink" title="the space efficient encoding without slowing down too much PFADD,"></a>the space efficient encoding without slowing down too much PFADD,</h1><h1 id="which-is-O-N-with-the-sparse-encoding-The-value-can-be-raised-to"><a href="#which-is-O-N-with-the-sparse-encoding-The-value-can-be-raised-to" class="headerlink" title="which is O(N) with the sparse encoding. The value can be raised to"></a>which is O(N) with the sparse encoding. The value can be raised to</h1><h1 id="10000-when-CPU-is-not-a-concern-but-space-is-and-the-data-set-is"><a href="#10000-when-CPU-is-not-a-concern-but-space-is-and-the-data-set-is" class="headerlink" title="~ 10000 when CPU is not a concern, but space is, and the data set is"></a>~ 10000 when CPU is not a concern, but space is, and the data set is</h1><h1 id="composed-of-many-HyperLogLogs-with-cardinality-in-the-0-15000-range"><a href="#composed-of-many-HyperLogLogs-with-cardinality-in-the-0-15000-range" class="headerlink" title="composed of many HyperLogLogs with cardinality in the 0 - 15000 range."></a>composed of many HyperLogLogs with cardinality in the 0 - 15000 range.</h1><p>hll-sparse-max-bytes 3000</p><h1 id="Active-rehashing-uses-1-millisecond-every-100-milliseconds-of-CPU-time-in"><a href="#Active-rehashing-uses-1-millisecond-every-100-milliseconds-of-CPU-time-in" class="headerlink" title="Active rehashing uses 1 millisecond every 100 milliseconds of CPU time in"></a>Active rehashing uses 1 millisecond every 100 milliseconds of CPU time in</h1><h1 id="order-to-help-rehashing-the-main-Redis-hash-table-the-one-mapping-top-level"><a href="#order-to-help-rehashing-the-main-Redis-hash-table-the-one-mapping-top-level" class="headerlink" title="order to help rehashing the main Redis hash table (the one mapping top-level"></a>order to help rehashing the main Redis hash table (the one mapping top-level</h1><h1 id="keys-to-values-The-hash-table-implementation-Redis-uses-see-dict-c"><a href="#keys-to-values-The-hash-table-implementation-Redis-uses-see-dict-c" class="headerlink" title="keys to values). The hash table implementation Redis uses (see dict.c)"></a>keys to values). The hash table implementation Redis uses (see dict.c)</h1><h1 id="performs-a-lazy-rehashing-the-more-operation-you-run-into-a-hash-table"><a href="#performs-a-lazy-rehashing-the-more-operation-you-run-into-a-hash-table" class="headerlink" title="performs a lazy rehashing: the more operation you run into a hash table"></a>performs a lazy rehashing: the more operation you run into a hash table</h1><h1 id="that-is-rehashing-the-more-rehashing-“steps”-are-performed-so-if-the"><a href="#that-is-rehashing-the-more-rehashing-“steps”-are-performed-so-if-the" class="headerlink" title="that is rehashing, the more rehashing “steps” are performed, so if the"></a>that is rehashing, the more rehashing “steps” are performed, so if the</h1><h1 id="server-is-idle-the-rehashing-is-never-complete-and-some-more-memory-is-used"><a href="#server-is-idle-the-rehashing-is-never-complete-and-some-more-memory-is-used" class="headerlink" title="server is idle the rehashing is never complete and some more memory is used"></a>server is idle the rehashing is never complete and some more memory is used</h1><h1 id="by-the-hash-table"><a href="#by-the-hash-table" class="headerlink" title="by the hash table."></a>by the hash table.</h1><p>#</p><h1 id="The-default-is-to-use-this-millisecond-10-times-every-second-in-order-to"><a href="#The-default-is-to-use-this-millisecond-10-times-every-second-in-order-to" class="headerlink" title="The default is to use this millisecond 10 times every second in order to"></a>The default is to use this millisecond 10 times every second in order to</h1><h1 id="actively-rehash-the-main-dictionaries-freeing-memory-when-possible"><a href="#actively-rehash-the-main-dictionaries-freeing-memory-when-possible" class="headerlink" title="actively rehash the main dictionaries, freeing memory when possible."></a>actively rehash the main dictionaries, freeing memory when possible.</h1><p>#</p><h1 id="If-unsure"><a href="#If-unsure" class="headerlink" title="If unsure:"></a>If unsure:</h1><h1 id="use-“activerehashing-no”-if-you-have-hard-latency-requirements-and-it-is"><a href="#use-“activerehashing-no”-if-you-have-hard-latency-requirements-and-it-is" class="headerlink" title="use “activerehashing no” if you have hard latency requirements and it is"></a>use “activerehashing no” if you have hard latency requirements and it is</h1><h1 id="not-a-good-thing-in-your-environment-that-Redis-can-reply-from-time-to-time"><a href="#not-a-good-thing-in-your-environment-that-Redis-can-reply-from-time-to-time" class="headerlink" title="not a good thing in your environment that Redis can reply from time to time"></a>not a good thing in your environment that Redis can reply from time to time</h1><h1 id="to-queries-with-2-milliseconds-delay"><a href="#to-queries-with-2-milliseconds-delay" class="headerlink" title="to queries with 2 milliseconds delay."></a>to queries with 2 milliseconds delay.</h1><p>#</p><h1 id="use-“activerehashing-yes”-if-you-don’t-have-such-hard-requirements-but"><a href="#use-“activerehashing-yes”-if-you-don’t-have-such-hard-requirements-but" class="headerlink" title="use “activerehashing yes” if you don’t have such hard requirements but"></a>use “activerehashing yes” if you don’t have such hard requirements but</h1><h1 id="want-to-free-memory-asap-when-possible"><a href="#want-to-free-memory-asap-when-possible" class="headerlink" title="want to free memory asap when possible."></a>want to free memory asap when possible.</h1><p>activerehashing yes</p><h1 id="The-client-output-buffer-limits-can-be-used-to-force-disconnection-of-clients"><a href="#The-client-output-buffer-limits-can-be-used-to-force-disconnection-of-clients" class="headerlink" title="The client output buffer limits can be used to force disconnection of clients"></a>The client output buffer limits can be used to force disconnection of clients</h1><h1 id="that-are-not-reading-data-from-the-server-fast-enough-for-some-reason-a"><a href="#that-are-not-reading-data-from-the-server-fast-enough-for-some-reason-a" class="headerlink" title="that are not reading data from the server fast enough for some reason (a"></a>that are not reading data from the server fast enough for some reason (a</h1><h1 id="common-reason-is-that-a-Pub-Sub-client-can’t-consume-messages-as-fast-as-the"><a href="#common-reason-is-that-a-Pub-Sub-client-can’t-consume-messages-as-fast-as-the" class="headerlink" title="common reason is that a Pub/Sub client can’t consume messages as fast as the"></a>common reason is that a Pub/Sub client can’t consume messages as fast as the</h1><h1 id="publisher-can-produce-them"><a href="#publisher-can-produce-them" class="headerlink" title="publisher can produce them)."></a>publisher can produce them).</h1><p>#</p><h1 id="The-limit-can-be-set-differently-for-the-three-different-classes-of-clients"><a href="#The-limit-can-be-set-differently-for-the-three-different-classes-of-clients" class="headerlink" title="The limit can be set differently for the three different classes of clients:"></a>The limit can be set differently for the three different classes of clients:</h1><p>#</p><h1 id="normal-gt-normal-clients-including-MONITOR-clients"><a href="#normal-gt-normal-clients-including-MONITOR-clients" class="headerlink" title="normal -&gt; normal clients including MONITOR clients"></a>normal -&gt; normal clients including MONITOR clients</h1><h1 id="slave-gt-slave-clients"><a href="#slave-gt-slave-clients" class="headerlink" title="slave  -&gt; slave clients"></a>slave -&gt; slave clients</h1><h1 id="pubsub-gt-clients-subscribed-to-at-least-one-pubsub-channel-or-pattern"><a href="#pubsub-gt-clients-subscribed-to-at-least-one-pubsub-channel-or-pattern" class="headerlink" title="pubsub -&gt; clients subscribed to at least one pubsub channel or pattern"></a>pubsub -&gt; clients subscribed to at least one pubsub channel or pattern</h1><p>#</p><h1 id="The-syntax-of-every-client-output-buffer-limit-directive-is-the-following"><a href="#The-syntax-of-every-client-output-buffer-limit-directive-is-the-following" class="headerlink" title="The syntax of every client-output-buffer-limit directive is the following:"></a>The syntax of every client-output-buffer-limit directive is the following:</h1><p>#</p><h1 id="client-output-buffer-limit"><a href="#client-output-buffer-limit" class="headerlink" title="client-output-buffer-limit    "></a>client-output-buffer-limit<class><hard limit><soft limit><soft seconds></soft></soft></hard></class></h1><p>#</p><h1 id="A-client-is-immediately-disconnected-once-the-hard-limit-is-reached-or-if"><a href="#A-client-is-immediately-disconnected-once-the-hard-limit-is-reached-or-if" class="headerlink" title="A client is immediately disconnected once the hard limit is reached, or if"></a>A client is immediately disconnected once the hard limit is reached, or if</h1><h1 id="the-soft-limit-is-reached-and-remains-reached-for-the-specified-number-of"><a href="#the-soft-limit-is-reached-and-remains-reached-for-the-specified-number-of" class="headerlink" title="the soft limit is reached and remains reached for the specified number of"></a>the soft limit is reached and remains reached for the specified number of</h1><h1 id="seconds-continuously"><a href="#seconds-continuously" class="headerlink" title="seconds (continuously)."></a>seconds (continuously).</h1><h1 id="So-for-instance-if-the-hard-limit-is-32-megabytes-and-the-soft-limit-is"><a href="#So-for-instance-if-the-hard-limit-is-32-megabytes-and-the-soft-limit-is" class="headerlink" title="So for instance if the hard limit is 32 megabytes and the soft limit is"></a>So for instance if the hard limit is 32 megabytes and the soft limit is</h1><h1 id="16-megabytes-10-seconds-the-client-will-get-disconnected-immediately"><a href="#16-megabytes-10-seconds-the-client-will-get-disconnected-immediately" class="headerlink" title="16 megabytes / 10 seconds, the client will get disconnected immediately"></a>16 megabytes / 10 seconds, the client will get disconnected immediately</h1><h1 id="if-the-size-of-the-output-buffers-reach-32-megabytes-but-will-also-get"><a href="#if-the-size-of-the-output-buffers-reach-32-megabytes-but-will-also-get" class="headerlink" title="if the size of the output buffers reach 32 megabytes, but will also get"></a>if the size of the output buffers reach 32 megabytes, but will also get</h1><h1 id="disconnected-if-the-client-reaches-16-megabytes-and-continuously-overcomes"><a href="#disconnected-if-the-client-reaches-16-megabytes-and-continuously-overcomes" class="headerlink" title="disconnected if the client reaches 16 megabytes and continuously overcomes"></a>disconnected if the client reaches 16 megabytes and continuously overcomes</h1><h1 id="the-limit-for-10-seconds"><a href="#the-limit-for-10-seconds" class="headerlink" title="the limit for 10 seconds."></a>the limit for 10 seconds.</h1><p>#</p><h1 id="By-default-normal-clients-are-not-limited-because-they-don’t-receive-data"><a href="#By-default-normal-clients-are-not-limited-because-they-don’t-receive-data" class="headerlink" title="By default normal clients are not limited because they don’t receive data"></a>By default normal clients are not limited because they don’t receive data</h1><h1 id="without-asking-in-a-push-way-but-just-after-a-request-so-only"><a href="#without-asking-in-a-push-way-but-just-after-a-request-so-only" class="headerlink" title="without asking (in a push way), but just after a request, so only"></a>without asking (in a push way), but just after a request, so only</h1><h1 id="asynchronous-clients-may-create-a-scenario-where-data-is-requested-faster"><a href="#asynchronous-clients-may-create-a-scenario-where-data-is-requested-faster" class="headerlink" title="asynchronous clients may create a scenario where data is requested faster"></a>asynchronous clients may create a scenario where data is requested faster</h1><h1 id="than-it-can-read"><a href="#than-it-can-read" class="headerlink" title="than it can read."></a>than it can read.</h1><p>#</p><h1 id="Instead-there-is-a-default-limit-for-pubsub-and-slave-clients-since"><a href="#Instead-there-is-a-default-limit-for-pubsub-and-slave-clients-since" class="headerlink" title="Instead there is a default limit for pubsub and slave clients, since"></a>Instead there is a default limit for pubsub and slave clients, since</h1><h1 id="subscribers-and-slaves-receive-data-in-a-push-fashion"><a href="#subscribers-and-slaves-receive-data-in-a-push-fashion" class="headerlink" title="subscribers and slaves receive data in a push fashion."></a>subscribers and slaves receive data in a push fashion.</h1><p>#</p><h1 id="Both-the-hard-or-the-soft-limit-can-be-disabled-by-setting-them-to-zero"><a href="#Both-the-hard-or-the-soft-limit-can-be-disabled-by-setting-them-to-zero" class="headerlink" title="Both the hard or the soft limit can be disabled by setting them to zero."></a>Both the hard or the soft limit can be disabled by setting them to zero.</h1><p>client-output-buffer-limit normal 0 0 0<br>client-output-buffer-limit slave 256mb 64mb 60<br>client-output-buffer-limit pubsub 32mb 8mb 60</p><h1 id="Redis-calls-an-internal-function-to-perform-many-background-tasks-like"><a href="#Redis-calls-an-internal-function-to-perform-many-background-tasks-like" class="headerlink" title="Redis calls an internal function to perform many background tasks, like"></a>Redis calls an internal function to perform many background tasks, like</h1><h1 id="closing-connections-of-clients-in-timeout-purging-expired-keys-that-are"><a href="#closing-connections-of-clients-in-timeout-purging-expired-keys-that-are" class="headerlink" title="closing connections of clients in timeout, purging expired keys that are"></a>closing connections of clients in timeout, purging expired keys that are</h1><h1 id="never-requested-and-so-forth"><a href="#never-requested-and-so-forth" class="headerlink" title="never requested, and so forth."></a>never requested, and so forth.</h1><p>#</p><h1 id="Not-all-tasks-are-performed-with-the-same-frequency-but-Redis-checks-for"><a href="#Not-all-tasks-are-performed-with-the-same-frequency-but-Redis-checks-for" class="headerlink" title="Not all tasks are performed with the same frequency, but Redis checks for"></a>Not all tasks are performed with the same frequency, but Redis checks for</h1><h1 id="tasks-to-perform-according-to-the-specified-“hz”-value"><a href="#tasks-to-perform-according-to-the-specified-“hz”-value" class="headerlink" title="tasks to perform according to the specified “hz” value."></a>tasks to perform according to the specified “hz” value.</h1><p>#</p><h1 id="By-default-“hz”-is-set-to-10-Raising-the-value-will-use-more-CPU-when"><a href="#By-default-“hz”-is-set-to-10-Raising-the-value-will-use-more-CPU-when" class="headerlink" title="By default “hz” is set to 10. Raising the value will use more CPU when"></a>By default “hz” is set to 10. Raising the value will use more CPU when</h1><h1 id="Redis-is-idle-but-at-the-same-time-will-make-Redis-more-responsive-when"><a href="#Redis-is-idle-but-at-the-same-time-will-make-Redis-more-responsive-when" class="headerlink" title="Redis is idle, but at the same time will make Redis more responsive when"></a>Redis is idle, but at the same time will make Redis more responsive when</h1><h1 id="there-are-many-keys-expiring-at-the-same-time-and-timeouts-may-be"><a href="#there-are-many-keys-expiring-at-the-same-time-and-timeouts-may-be" class="headerlink" title="there are many keys expiring at the same time, and timeouts may be"></a>there are many keys expiring at the same time, and timeouts may be</h1><h1 id="handled-with-more-precision"><a href="#handled-with-more-precision" class="headerlink" title="handled with more precision."></a>handled with more precision.</h1><p>#</p><h1 id="The-range-is-between-1-and-500-however-a-value-over-100-is-usually-not"><a href="#The-range-is-between-1-and-500-however-a-value-over-100-is-usually-not" class="headerlink" title="The range is between 1 and 500, however a value over 100 is usually not"></a>The range is between 1 and 500, however a value over 100 is usually not</h1><h1 id="a-good-idea-Most-users-should-use-the-default-of-10-and-raise-this-up-to"><a href="#a-good-idea-Most-users-should-use-the-default-of-10-and-raise-this-up-to" class="headerlink" title="a good idea. Most users should use the default of 10 and raise this up to"></a>a good idea. Most users should use the default of 10 and raise this up to</h1><h1 id="100-only-in-environments-where-very-low-latency-is-required"><a href="#100-only-in-environments-where-very-low-latency-is-required" class="headerlink" title="100 only in environments where very low latency is required."></a>100 only in environments where very low latency is required.</h1><p>hz 10</p><h1 id="When-a-child-rewrites-the-AOF-file-if-the-following-option-is-enabled"><a href="#When-a-child-rewrites-the-AOF-file-if-the-following-option-is-enabled" class="headerlink" title="When a child rewrites the AOF file, if the following option is enabled"></a>When a child rewrites the AOF file, if the following option is enabled</h1><h1 id="the-file-will-be-fsync-ed-every-32-MB-of-data-generated-This-is-useful"><a href="#the-file-will-be-fsync-ed-every-32-MB-of-data-generated-This-is-useful" class="headerlink" title="the file will be fsync-ed every 32 MB of data generated. This is useful"></a>the file will be fsync-ed every 32 MB of data generated. This is useful</h1><h1 id="in-order-to-commit-the-file-to-the-disk-more-incrementally-and-avoid"><a href="#in-order-to-commit-the-file-to-the-disk-more-incrementally-and-avoid" class="headerlink" title="in order to commit the file to the disk more incrementally and avoid"></a>in order to commit the file to the disk more incrementally and avoid</h1><h1 id="big-latency-spikes"><a href="#big-latency-spikes" class="headerlink" title="big latency spikes."></a>big latency spikes.</h1><p>aof-rewrite-incremental-fsync yes</p><script type="text/javascript" src="https://cdn.jsdelivr.net/npm/kity@2.0.4/dist/kity.min.js"></script><script type="text/javascript" src="https://cdn.jsdelivr.net/npm/kityminder-core@1.4.50/dist/kityminder.core.min.js"></script><script defer type="text/javascript" src="https://cdn.jsdelivr.net/npm/hexo-simple-mindmap@0.2.0/dist/mindmap.min.js"></script><link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/npm/hexo-simple-mindmap@0.2.0/dist/mindmap.min.css"></div><br><hr><div class="reprint" id="reprint-statement"><div class="reprint__author"><span class="reprint-meta" style="font-weight:700"><i class="fas fa-user">文章作者: </i></span><span class="reprint-info"><a href="/about" rel="external nofollow noreferrer">Small Rose / 张小菜苔</a></span></div><div class="reprint__type"><span class="reprint-meta" style="font-weight:700"><i class="fas fa-link">文章链接: </i></span><span class="reprint-info"><a href="https://www.zhangxiaocai.cn/posts/ce7e4b33.html">https://www.zhangxiaocai.cn/posts/ce7e4b33.html</a></span></div><div class="reprint__notice"><span class="reprint-meta" style="font-weight:700"><i class="fas fa-copyright">版权声明: </i></span><span class="reprint-info">本博客所有文章除特別声明外，均采用 <a href="https://creativecommons.org/licenses/by/4.0/deed.zh" rel="external nofollow noreferrer" target="_blank">CC BY 4.0</a> 许可协议。转载请注明来源 <a href="/about" target="_blank">Small Rose / 张小菜苔</a> !</span></div></div><script async defer>document.addEventListener("copy", function (e) {
        let toastHTML = '<span>复制成功，请遵循本文的转载规则</span><button class="btn-flat toast-action" onclick="navToReprintStatement()" style="font-size: smaller">查看</a>';
        M.toast({html: toastHTML})
      });

      function navToReprintStatement() {
        $("html, body").animate({scrollTop: $("#reprint-statement").offset().top - 80}, 800);
      }</script><div class="tag_share" style="display:block"><div class="post-meta__tag-list" style="display:inline-block"><div class="article-tag"><span class="chip bg-color">无标签</span></div></div><div class="post_share" style="zoom:80%;width:fit-content;display:inline-block;float:right;margin:-.15rem 0"><link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/gh/small-rose/small-rose.github.io/libs/share/css/share.min.css"><div id="article-share"><div class="social-share" data-sites="twitter,facebook,google,qq,qzone,wechat,weibo,douban,linkedin" data-wechat-qrcode-helper="<p>微信扫一扫即可分享！</p>"></div><script src="https://cdn.jsdelivr.net/gh/small-rose/small-rose.github.io/libs/share/js/social-share.min.js"></script></div></div></div><style>#reward{margin:40px 0;text-align:center}#reward .reward-link{font-size:1.4rem;line-height:38px}#reward .btn-floating:hover{box-shadow:0 6px 12px rgba(0,0,0,.2),0 5px 15px rgba(0,0,0,.2)}#rewardModal{width:320px;height:350px}#rewardModal .reward-title{margin:15px auto;padding-bottom:5px}#rewardModal .modal-content{padding:10px}#rewardModal .close{position:absolute;right:15px;top:15px;color:rgba(0,0,0,.5);font-size:1.3rem;line-height:20px;cursor:pointer}#rewardModal .close:hover{color:#ef5350;transform:scale(1.3);-moz-transform:scale(1.3);-webkit-transform:scale(1.3);-o-transform:scale(1.3)}#rewardModal .reward-tabs{margin:0 auto;width:210px}.reward-tabs .tabs{height:38px;margin:10px auto;padding-left:0}.reward-content ul{padding-left:0!important}.reward-tabs .tabs .tab{height:38px;line-height:38px}.reward-tabs .tab a{color:#fff;background-color:#ccc}.reward-tabs .tab a:hover{background-color:#ccc;color:#fff}.reward-tabs .wechat-tab .active{color:#fff!important;background-color:#22AB38!important}.reward-tabs .alipay-tab .active{color:#fff!important;background-color:#019FE8!important}.reward-tabs .reward-img{width:210px;height:210px}</style><div id="reward"><a href="#rewardModal" class="reward-link modal-trigger btn-floating btn-medium waves-effect waves-light red">赏</a><div id="rewardModal" class="modal"><div class="modal-content"><a class="close modal-close"><i class="fas fa-times"></i></a><h4 class="reward-title">你的赏识是我前进的动力</h4><div class="reward-content"><div class="reward-tabs"><ul class="tabs row"><li class="tab col s6 alipay-tab waves-effect waves-light"><a href="#alipay">支付宝</a></li><li class="tab col s6 wechat-tab waves-effect waves-light"><a href="#wechat">微 信</a></li></ul><div id="alipay"><img src="https://cdn.jsdelivr.net/gh/small-rose/small-rose.github.io/medias/reward/alipay.jpg" class="reward-img" alt="支付宝打赏二维码"></div><div id="wechat"><img src="https://cdn.jsdelivr.net/gh/small-rose/small-rose.github.io/medias/reward/wechat.jpg" class="reward-img" alt="微信打赏二维码"></div></div></div></div></div></div><script>$(function(){$(".tabs").tabs()})</script></div></div><style>.valine-card{margin:1.5rem auto}.valine-card .card-content{padding:20px 20px 5px 20px}#vcomments textarea{box-sizing:border-box;background:url(/medias/202007bg.webp) 100% 100% no-repeat}#vcomments p{margin:2px 2px 10px;font-size:1.05rem;line-height:1.78rem}#vcomments blockquote p{text-indent:.2rem}#vcomments a{padding:0 2px;color:#4cbf30;font-weight:500;text-decoration:none}#vcomments img{max-width:100%;height:auto;cursor:pointer}#vcomments ol li{list-style-type:decimal}#vcomments ol,ul{display:block;padding-left:2em;word-spacing:.05rem}#vcomments ul li,ol li{display:list-item;line-height:1.8rem;font-size:1rem}#vcomments ul li{list-style-type:disc}#vcomments ul ul li{list-style-type:circle}#vcomments table,td,th{padding:12px 13px;border:1px solid #dfe2e5}#vcomments table,td,th{border:0}table tr:nth-child(2n),thead{background-color:#fafafa}#vcomments table th{background-color:#f2f2f2;min-width:80px}#vcomments table td{min-width:80px}#vcomments h1{font-size:1.85rem;font-weight:700;line-height:2.2rem}#vcomments h2{font-size:1.65rem;font-weight:700;line-height:1.9rem}#vcomments h3{font-size:1.45rem;font-weight:700;line-height:1.7rem}#vcomments h4{font-size:1.25rem;font-weight:700;line-height:1.5rem}#vcomments h5{font-size:1.1rem;font-weight:700;line-height:1.4rem}#vcomments h6{font-size:1rem;line-height:1.3rem}#vcomments p{font-size:1rem;line-height:1.5rem}#vcomments hr{margin:12px 0;border:0;border-top:1px solid #ccc}#vcomments blockquote{margin:15px 0;border-left:5px solid #42b983;padding:1rem .8rem .3rem .8rem;color:#666;background-color:rgba(66,185,131,.1)}#vcomments pre{font-family:monospace,monospace;padding:1.2em;margin:.5em 0;background:#272822;overflow:auto;border-radius:.3em;tab-size:4}#vcomments code{font-family:monospace,monospace;padding:1px 3px;font-size:.92rem;color:#e96900;background-color:#f8f8f8;border-radius:2px}#vcomments pre code{font-family:monospace,monospace;padding:0;color:#e8eaf6;background-color:#272822}#vcomments pre[class*=language-]{padding:1.2em;margin:.5em 0}#vcomments code[class*=language-],pre[class*=language-]{color:#e8eaf6}#vcomments [type=checkbox]:not(:checked),[type=checkbox]:checked{position:inherit;margin-left:-1.3rem;margin-right:.4rem;margin-top:-1px;vertical-align:middle;left:unset;visibility:visible}#vcomments b,strong{font-weight:700}#vcomments dfn{font-style:italic}#vcomments small{font-size:85%}#vcomments cite{font-style:normal}#vcomments mark{background-color:#fcf8e3;padding:.2em}#vcomments table,td,th{padding:12px 13px;border:1px solid #dfe2e5}table tr:nth-child(2n),thead{background-color:#fafafa}#vcomments table th{background-color:#f2f2f2;min-width:80px}#vcomments table td{min-width:80px}#vcomments [type=checkbox]:not(:checked),[type=checkbox]:checked{position:inherit;margin-left:-1.3rem;margin-right:.4rem;margin-top:-1px;vertical-align:middle;left:unset;visibility:visible}#vcomments .vbtn{background-color:#0bb7fbd6;color:#fff}.v[data-class="v"] .vwrap .vheader .vinput{width:32%;border-bottom:1px dashed #dedede}.v[data-class=v] .vwrap .vemojis i{font-style:normal;padding-top:7px;width:36px;cursor:pointer;text-align:center;display:inline-block;vertical-align:middle;padding-right:3px;padding-left:3px}</style><div class="card valine-card" data-aos="fade-up"><div class="comment_headling" style="font-size:20px;font-weight:700;position:relative;padding-left:20px;top:15px;padding-bottom:5px"><i class="fas fa-comments fa-fw" aria-hidden="true"></i> <span>评论</span></div><div id="vcomments" class="card-content" style="display:grid"></div></div><script src="https://cdn.jsdelivr.net/gh/small-rose/small-rose.github.io/libs/valine/av-min.js"></script><script src="https://cdn.jsdelivr.net/gh/small-rose/small-rose.github.io/libs/valine/Valine.min.js"></script><script>let metaPlaceholder = {"nick":"昵称/QQ号(必填)","mail":"邮箱(必填)","link":"网址(https://)"}

    new Valine({
        el: '#vcomments',
        mode: 'xCss',
        appId: 'iTxfqh5e9IaRfiiVOTbIWoKa-9Nh9j0Va',
        appKey: 'C5s5xGFErD1Et90bvbPvNDsB',
        notify: 'true' === 'true',
        verify: 'true' === 'true',
        visitor: 'true' === 'true',
        avatar: 'monsterid',
        pageSize: '10',
        lang: 'zh-CN',
        placeholder: 'ヾﾉ≧∀≦)o来啊，快活啊！什么？想走？打劫！赶紧提交出你的评论，全部要写好~ ',
        meta: ["nick", "mail", "link"],
        recordIP: 'true' === 'true',
        enableQQ: 'monsterid',
        requiredFields: ["68c4c9e1b9a3d34317dc6faefe2ea00e"],
        master: ["68c4c9e1b9a3d34317dc6faefe2ea00e"],
        friends: ["7a455d704b60807098d18cc8c2470da2", "8acd51671b7e0e1dc68cc76d4d987813", "c08508165c8eba9a77f87285c046d09e", "901345d4c91ddfd8db0f975bbceaf0c8", "1512958e18378c98b498d5ef8e3e763f", "db6069f3bda06d2a9157c4a622ce4648"],
        tagMeta: ["博主", "小伙伴", "访客"],
        metaPlaceholder: metaPlaceholder,

    });

    document.body.addEventListener('click', function(e) {
    if (e.target.classList.contains('vsubmit')) {
        const email = document.querySelector('input[type=email]');
        const nick = document.querySelector('input[name=nick]');
        const reg = /^[A-Za-z0-9_-\u4e00-\u9fa5]+@[a-zA-Z0-9_-]+(\.[a-zA-Z0-9_-]+)+$/;
        if (!email.value || !nick.value || !reg.test(email.value)) {
            const str = `<div class="valert txt-center"><div class="vtext">请填写正确的昵称和邮箱！</div></div>`;
            const vmark = document.querySelector('.vmark');
            vmark.innerHTML = str;
            vmark.style.display = 'block';

            e.stopPropagation();

            setTimeout(function() {
                vmark.style.display = 'none';
                vmark.innerHTML = '';
            }, 2500);
        }
    }
    }, true);</script><article id="prenext-posts" class="prev-next articles"><div class="row article-row"><div class="article col s12 m6" data-aos="fade-up" data-aos="fade-up"><div class="article-badge left-badge text-color"><i class="far fa-dot-circle"></i>&nbsp;本篇</div><div class="card"><a href="/posts/ce7e4b33.html"><div class="card-image"><img src="https://cdn.jsdelivr.net/gh/small-rose/small-rose.github.io/medias/featureimages/17.jpg" class="responsive-img" alt="java/其他/redis.conf"> <span class="card-title">java/其他/redis.conf</span></div></a><div class="card-content article-content"><div class="summary block-with-text">Redis configuration file example.# Note that in order to read the configuration file, Redis must bestarted with the file</div><div class="publish-info"><span class="publish-date"><i class="far fa-clock fa-fw icon-date"></i>2020-09-21 </span><span class="publish-author"><i class="fas fa-user fa-fw"></i> Small Rose / 张小菜苔</span></div></div></div></div><div class="article col s12 m6" data-aos="fade-up"><div class="article-badge right-badge text-color">下一篇&nbsp;<i class="fas fa-chevron-right"></i></div><div class="card"><a href="/posts/1e514b2c.html"><div class="card-image"><img src="https://cdn.jsdelivr.net/gh/small-rose/small-rose.github.io/medias/featureimages/8.jpg" class="responsive-img" alt="Valine 评论系统紧急防御"> <span class="card-title">Valine 评论系统紧急防御</span></div></a><div class="card-content article-content"><div class="summary block-with-text">Valine 评论系统紧急防御</div><div class="publish-info"><span class="publish-date"><i class="far fa-clock fa-fw icon-date"></i>2020-09-18 </span><span class="publish-author"><i class="fas fa-bookmark fa-fw icon-category"></i> <a href="/categories/Hexo/" class="post-category">Hexo</a></span></div></div><div class="card-action article-tags"><a href="/tags/Hexo/"><span class="chip bg-color">Hexo</span></a></div></div></div></div></article></div><script>$("#articleContent").on("copy",function(e){if("undefined"!=typeof window.getSelection){var n=window.getSelection();if(!((""+n).length<Number.parseInt("120"))){var t=document.getElementsByTagName("body")[0],o=document.createElement("div");o.style.position="absolute",o.style.left="-99999px",t.appendChild(o),o.appendChild(n.getRangeAt(0).cloneContents()),"PRE"===n.getRangeAt(0).commonAncestorContainer.nodeName?o.innerHTML="<pre>"+o.innerHTML+"</pre>":o.innerHTML="<pre>"+o.innerHTML+"</pre>";var i=document.location.href;o.innerHTML+='<br />来源: 张小菜苔<br />文章作者: Small Rose / 张小菜苔<br />文章链接: <a href="'+i+'">'+i+"</a><br />本文章著作权归作者所有，任何形式的转载都请注明出处。",n.selectAllChildren(o),window.setTimeout(function(){t.removeChild(o)},200)}}})</script><script type="text/javascript" src="https://cdn.jsdelivr.net/gh/small-rose/small-rose.github.io/libs/codeBlock/codeBlockFuction.js"></script><script type="text/javascript" src="https://cdn.jsdelivr.net/gh/small-rose/small-rose.github.io/libs/codeBlock/codeLang.js"></script><script type="text/javascript" src="https://cdn.jsdelivr.net/gh/small-rose/small-rose.github.io/libs/codeBlock/codeCopy.js"></script><script type="text/javascript" src="https://cdn.jsdelivr.net/gh/small-rose/small-rose.github.io/libs/codeBlock/codeShrink.js"></script></div><div id="toc-aside" class="expanded col l3 hide-on-med-and-down"><div class="toc-widget"><div class="toc-title"><i class="far fa-list-alt"></i>&nbsp;&nbsp;目录</div><div id="toc-content"></div></div></div></div><div id="floating-toc-btn" class="hide-on-med-and-down"><a class="btn-floating btn-large bg-color"><i class="fas fa-list-ul"></i></a></div><script src="https://cdn.jsdelivr.net/gh/small-rose/small-rose.github.io/libs/tocbot/tocbot.min.js"></script><script>$(function () {
        tocbot.init({
            tocSelector: '#toc-content',
            contentSelector: '#articleContent',
            headingsOffset: -($(window).height() * 0.4 - 45),
            collapseDepth: Number('0'),
            headingSelector: 'h2, h3, h4'
        });

        // modify the toc link href to support Chinese.
        let i = 0;
        let tocHeading = 'toc-heading-';
        $('#toc-content a').each(function () {
            $(this).attr('href', '#' + tocHeading + (++i));
        });

        // modify the heading title id to support Chinese.
        i = 0;
        $('#articleContent').children('h2, h3, h4').each(function () {
            $(this).attr('id', tocHeading + (++i));
        });

        // Set scroll toc fixed.
        let tocHeight = parseInt($(window).height() * 0.4 - 64);
        let $tocWidget = $('.toc-widget');
        $(window).scroll(function () {
            let scroll = $(window).scrollTop();
            /* add post toc fixed. */
            if (scroll > tocHeight) {
                $tocWidget.addClass('toc-fixed');
            } else {
                $tocWidget.removeClass('toc-fixed');
            }
        });

        
        /* 修复文章卡片 div 的宽度. */
        let fixPostCardWidth = function (srcId, targetId) {
            let srcDiv = $('#' + srcId);
            if (srcDiv.length === 0) {
                return;
            }

            let w = srcDiv.width();
            if (w >= 450) {
                w = w + 21;
            } else if (w >= 350 && w < 450) {
                w = w + 18;
            } else if (w >= 300 && w < 350) {
                w = w + 16;
            } else {
                w = w + 14;
            }
            $('#' + targetId).width(w);
        };

        // 切换TOC目录展开收缩的相关操作.
        const expandedClass = 'expanded';
        let $tocAside = $('#toc-aside');
        let $mainContent = $('#main-content');
        $('#floating-toc-btn .btn-floating').click(function () {
            if ($tocAside.hasClass(expandedClass)) {
                $tocAside.removeClass(expandedClass).hide();
                $mainContent.removeClass('l9');
            } else {
                $tocAside.addClass(expandedClass).show();
                $mainContent.addClass('l9');
            }
            fixPostCardWidth('artDetail', 'prenext-posts');
        });
        
    });</script></main><footer class="page-footer bg-color"><link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/small-rose/small-rose.github.io/libs/aplayer/APlayer.min.css"><style>.aplayer .aplayer-lrc p{display:none;font-size:12px;font-weight:700;line-height:16px!important}.aplayer .aplayer-lrc p.aplayer-lrc-current{display:none;font-size:15px;color:#42b983}.aplayer.aplayer-fixed.aplayer-narrow .aplayer-body{left:-66px!important}.aplayer.aplayer-fixed.aplayer-narrow .aplayer-body:hover{left:0!important}</style><div><div class="row"><meting-js class="col l8 offset-l2 m10 offset-m1 s12" server="netease" type="playlist" id="2056253259" fixed="true" autoplay theme="#42b983" loop order="random" preload="auto" volume="0.7" list-folded="true"></meting-js></div></div><script src="https://cdn.jsdelivr.net/gh/small-rose/small-rose.github.io/libs/aplayer/APlayer.min.js"></script><script src="https://cdn.jsdelivr.net/npm/meting@2/dist/Meting.min.js"></script><div class="container row center-align" style="margin-bottom:15px!important"><div class="col s12 m8 l8 copy-right">Copyright&nbsp;&copy; <span id="year">2020</span> <a href="/about" target="_blank">Small Rose / 张小菜苔</a> |&nbsp;Powered by&nbsp;<a href="https://hexo.io/" target="_blank">Hexo</a> |&nbsp;Theme&nbsp;<a href="https://github.com/blinkfox/hexo-theme-matery" target="_blank">Matery</a> |&nbsp;Comments&nbsp;<a href="https://valine.zhangxiaocia.cn" target="_blank">Valine</a><br>&nbsp;<i class="fas fa-chart-area"></i>&nbsp;站点总字数:&nbsp;<span class="white-color">206.1k</span>&nbsp;字 <span id="busuanzi_container_site_pv">|&nbsp;<i class="far fa-eye"></i>&nbsp;总访问量:&nbsp;<span id="busuanzi_value_site_pv" class="white-color"></span>&nbsp;次 </span><span id="busuanzi_container_site_uv">|&nbsp;<i class="fas fa-users"></i>&nbsp;总访问人数:&nbsp;<span id="busuanzi_value_site_uv" class="white-color"></span>&nbsp;人</span><br><span id="sitetime">载入运行时间...</span><script>function siteTime(){var e=1e3,t=60*e,n=60*t,o=24*n,l=365*o,r=new Date,a="2020",i="5",d="1",m="0",M="0",g="0",s=r.getFullYear(),u=r.getMonth()+1,T=r.getDate(),c=r.getHours(),f=r.getMinutes(),h=r.getSeconds(),y=Date.UTC(a,i,d,m,M,g),H=Date.UTC(s,u,T,c,f,h),I=H-y,B=Math.floor(I/l),D=Math.floor(I/o-365*B),E=Math.floor((I-(365*B+D)*o)/n),L=Math.floor((I-(365*B+D)*o-E*n)/t),v=Math.floor((I-(365*B+D)*o-E*n-L*t)/e);a==s?(document.getElementById("year").innerHTML=s,document.getElementById("sitetime").innerHTML="本站已 <del>安全</del> 苟全运行 "+D+" 天 "+E+" 小时 "+L+" 分钟 "+v+" 秒"):(document.getElementById("year").innerHTML=a+" - "+s,document.getElementById("sitetime").innerHTML="本站已 <del>安全</del> 苟全运行 "+B+" 年 "+D+" 天 "+E+" 小时 "+L+" 分钟 "+v+" 秒")}setInterval(siteTime,1e3)</script><br><span id="icp"><img src="https://cdn.jsdelivr.net/gh/small-rose/small-rose.github.io/medias/icp.png" style="vertical-align:text-bottom"> <a href="http://beian.miit.gov.cn/" target="_blank">鄂ICP备19015637号-1</a></span><br></div><div class="col s12 m4 l4 social-link social-statis"><a href="https://github.com/small-rose" class="tooltipped" target="_blank" data-tooltip="访问我的GitHub" data-position="top" data-delay="50"><i class="fab fa-github"></i> </a><a href="mailto:small-rose@qq.com" class="tooltipped" target="_blank" data-tooltip="邮件联系我" data-position="top" data-delay="50"><i class="fas fa-envelope-open"></i> </a><a href="tencent://AddContact/?fromId=50&fromSubId=1&subcmd=all&uin=970175021" class="tooltipped" target="_blank" data-tooltip="QQ联系我: 970175021" data-position="top" data-delay="50"><i class="fab fa-qq"></i> </a><a href="https://yun.zhangxiaocia.cn" class="tooltipped" target="_blank" data-tooltip="个人云盘" data-position="top" data-delay="50"><i class="fas fa-cloud"></i></a></div></div></footer><div class="progress-bar"></div><script type="text/javascript">window.$crisp=[],window.CRISP_WEBSITE_ID="bf3c468c-2fd7-4dcc-866d-3b008127fff0",function(){d=document,s=d.createElement("script"),s.src="https://client.crisp.chat/l.js",s.async=1,d.getElementsByTagName("head")[0].appendChild(s)}()</script><div id="searchModal" class="modal"><div class="modal-content"><div class="search-header"><span class="title"><i class="fas fa-search"></i>&nbsp;&nbsp;搜索</span> <input type="search" id="searchInput" name="s" placeholder="请输入搜索的关键字" class="search-input"></div><div id="searchResult"></div></div></div><script src="https://cdn.jsdelivr.net/gh/small-rose/small-rose.github.io/js/search.js"></script><script type="text/javascript">$(function(){searchFunc("https://cdn.jsdelivr.net/gh/small-rose/small-rose.github.io/search.xml","searchInput","searchResult")})</script><div id="backTop" class="top-scroll"><a class="btn-floating btn-large waves-effect waves-light" href="#!"><i class="fas fa-arrow-up"></i></a></div><script src="https://cdn.jsdelivr.net/gh/small-rose/small-rose.github.io/libs/materialize/materialize.min.js"></script><script src="https://cdn.jsdelivr.net/gh/small-rose/small-rose.github.io/libs/masonry/masonry.pkgd.min.js"></script><script src="https://cdn.jsdelivr.net/gh/small-rose/small-rose.github.io/libs/aos/aos.js"></script><script src="https://cdn.jsdelivr.net/gh/small-rose/small-rose.github.io/libs/scrollprogress/scrollProgress.min.js"></script><script src="https://cdn.jsdelivr.net/gh/small-rose/small-rose.github.io/libs/lightGallery/js/lightgallery-all.min.js"></script><script src="https://cdn.jsdelivr.net/gh/small-rose/small-rose.github.io/js/matery.js"></script><script>var _hmt=_hmt||[];!function(){var e=document.createElement("script");e.src="https://hm.baidu.com/hm.js?90b288cd6d944c8f4f8f0258e60bf981";var t=document.getElementsByTagName("script")[0];t.parentNode.insertBefore(e,t)}()</script><script>!function(){var t=document.createElement("script"),s=window.location.protocol.split(":")[0];"https"===s?t.src="https://zz.bdstatic.com/linksubmit/push.js":t.src="http://push.zhanzhang.baidu.com/push.js";var e=document.getElementsByTagName("script")[0];e.parentNode.insertBefore(t,e)}()</script><script src="https://cdn.jsdelivr.net/gh/small-rose/small-rose.github.io/libs/others/clicklove.js" async></script><script async src="https://cdn.jsdelivr.net/gh/small-rose/small-rose.github.io/libs/others/busuanzi.pure.mini.js"></script><script type="text/javascript" size="150" alpha="0.6" zindex="-1" src="https://cdn.jsdelivr.net/gh/small-rose/small-rose.github.io/libs/background/ribbon-refresh.min.js" async></script><script src="https://cdn.jsdelivr.net/gh/small-rose/small-rose.github.io/libs/instantpage/instantpage.js" type="module"></script><script src="/js/sakura.js" type="module"></script><script src="https://cdn.jsdelivr.net/gh/small-rose/small-rose.github.io/js/fullscreen.js" type="module"></script><script>
            window.imageLazyLoadSetting = {
                isSPA: false,
                processImages: null,
            };
        </script><script>window.addEventListener("load",function(){var t=/\.(gif|jpg|jpeg|tiff|png)$/i,r=/^data:image\/[a-z]+;base64,/;Array.prototype.slice.call(document.querySelectorAll("img[data-original]")).forEach(function(a){var e=a.parentNode;"A"===e.tagName&&(e.href.match(t)||e.href.match(r))&&(e.href=a.dataset.original)})});</script><script>!function(n){n.imageLazyLoadSetting.processImages=o;var i=n.imageLazyLoadSetting.isSPA,r=Array.prototype.slice.call(document.querySelectorAll("img[data-original]"));function o(){i&&(r=Array.prototype.slice.call(document.querySelectorAll("img[data-original]")));for(var t,e,a=0;a<r.length;a++)t=r[a],0<=(e=t.getBoundingClientRect()).bottom&&0<=e.left&&e.top<=(n.innerHeight+240||document.documentElement.clientHeight+240)&&function(){var t,e,n,i,o=r[a];t=o,e=function(){r=r.filter(function(t){return o!==t})},n=new Image,i=t.getAttribute("data-original"),n.onload=function(){t.src=i,e&&e()},n.src=i}()}o(),n.addEventListener("scroll",function(){var t,e;t=o,e=n,clearTimeout(t.tId),t.tId=setTimeout(function(){t.call(e)},500)})}(this);</script><script>(function(w,d, s, id) {w.webpushr=w.webpushr||function(){(w.webpushr.q=w.webpushr.q||[]).push(arguments)};var js, fjs = d.getElementsByTagName(s)[0];js = d.createElement(s); js.id = id;js.src = 'https://cdn.webpushr.com/app.min.js';fjs.parentNode.appendChild(js);}(window,document, 'script', 'webpushr-jssdk'));webpushr('init','BJrux_BJKMKcoDBNWov5dsd0zhl3p0eF00OUzgogE5bQRheUA7eytp5rcZXYHdodyiVfbOmMlAkf140zUrAPfv4');</script></body></html><!-- rebuild by neat -->